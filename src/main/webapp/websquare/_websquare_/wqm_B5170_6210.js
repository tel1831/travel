"use strict";(self.webpackChunkwebpack_test=self.webpackChunkwebpack_test||[]).push([[6210],{6210:(t,e,i)=>{i.r(e),i.d(e,{wq_window:()=>p});var o=i(2981),n=i(1656),s=i(2085),r=i(1960),a=i(3082),d=i(7275),h=i(6615),l=i(6191),p=function(t,e,i){h.s.call(this,t,e,i)};o.x.extend(p.prototype,h.s.prototype),p.prototype.defaultOptions={pluginType:"uiplugin.window",pluginName:"window",parseChild:!0,userEvents:["onclose","onminimize","onmaximize","onrestore","ondragstart","ondragend","onwindowkeyup","onwindowmousedown","onpopup","ondrawcomplete","onwindowload","onwindowunload"],defaultTop:"5px",defaultLeft:"5px",defaultWidth:"300px",defaultHeight:"210px",useRestoreDefaultSize:!1,useInitialSizePosition:!1,minimumWidth:"150px",minimumHeight:"150px",frameMode:"iframe",windowTitle:"",windowHeaderHTML:"",nameLayerHTML:"",statusMsg:"",customMsg:"",src:"",wmode:!1,useStatusMsg:!0,useCustomMsg:!1,windowTooltipDisplay:!0,title:"",dragResizable:!0,dragResizableHeader:!1,displayParentWindowScroll:!1,disableCloseButton:!1,spa:!1,noAttatchedEvent:!1,params:"",popupParam:"",spaReplaceHistory:!1,buttonFormatter:"",foldOnMinimized:!1,useATagBtn:!1,windowDragMove:!1,windowMoveType:"restrict",windowMaximizeAll:!1,minVisibleWindowPixel:20,frameModal:"",processMsgFrame:!1,msaName:"",fixPosition:!1,accessibility:!1,_targetId:""},p.prototype.initialize=function(t){try{if(this.frame=null,this.modal=null,this.windowInfo={status:this.options.parent?"maximized":"restored",drag:!this.options.parent,top:this.options.defaultTop,left:this.options.defaultLeft,defaultWidth:"px"==this.options.defaultWidth.slice(-2)||"%"==this.options.defaultWidth.slice(-1)?this.options.defaultWidth:parseInt(this.options.defaultWidth,10)+"px",defaultHeight:"px"==this.options.defaultHeight.slice(-2)||"%"==this.options.defaultHeight.slice(-1)?this.options.defaultHeight:parseInt(this.options.defaultHeight,10)+"px",width:"px"==this.options.defaultWidth.slice(-2)||"%"==this.options.defaultWidth.slice(-1)?this.options.defaultWidth:parseInt(this.options.defaultWidth,10)+"px",height:"px"==this.options.defaultHeight.slice(-2)||"%"==this.options.defaultHeight.slice(-1)?this.options.defaultHeight:parseInt(this.options.defaultHeight,10)+"px",minWidth:parseInt(this.options.minimumWidth,10)<150?"150px":this.options.minimumWidth,minHeight:parseInt(this.options.minimumHeight,10)<150?"150px":this.options.minimumHeight,minimized:this.options.minimized||!1,setInfo:function(t){this.top=t.style.top,this.left=t.style.left,this.width=t.style.width,this.height=t.style.height},getInfo:function(t,e){t.style.top=this.top,t.style.left=this.left,t.style.width="restored"===e?this.defaultWidth:this.width,t.style.height="restored"===e?this.defaultHeight:this.height}},"iframe"==this.options.frameMode||this.options.frameMode,"true"===n.v.getConfiguration("/WebSquare/spa/@value")&&(this.options.spa=!0),this.options.parent&&this.options.parent.options.hideTitleOnMaximize&&(this.hideTitleOnMaximize=!0),this.options.parent&&this.options.parent.options.usePopup&&(this.usePopup=!0),this._multiViewUUID="",this._direction=0,this.buttons=[],this.buttonInfo={},this.hasButtons=!1,this.options.buttonFormatter){var e=a.D.getGlobalFunction(this.options.buttonFormatter,this.scope_id);"function"==typeof e&&(this.hasButtons=!0,this.buttonInfo={},this.buttonInfo.buttons=e(),this.buttonInfo.alignment="right",this.buttonInfo.useButtonFormatter=!0)}this.popupIdx=0,this._isWframePopup=!1,this.options.windowDragMove||"true"!==n.v.getConfiguration("/WebSquare/window/windowDragMove/@value")||(this.options.windowDragMove=!0),!0===this.options.fixPosition&&(this.windowInfo.drag=!1)}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.toHTML=function(){try{var t=""==this.options.disabled?"":"disabled='true'",e=[],i="",o="",n=""==this.options.style?"":"style='"+this.options.style+"'",r="restored"===this.windowInfo.status?"w2window_restored":"w2window_maximized",d="overflow"===this.options.windowMoveType?" w2window_window_move_type":""
;this.options.windowTooltipDisplay&&(o="title='"+this.options.windowTitle+"'"),e.push("<div "+t+" id='"+this.id+"' "+n+" class='w2window "+r+" "+this.options.className+d+"' tabindex='0' >"),1==this.options.wmode&&(i=WebSquare.net.getSSLBlankPage(),e.push("<iframe frameBorder='no' title='"+this.options.title+"' class='w2window_wmode' "+i+"></iframe>")),a.D.isMobile()&&this.options.useATagBtn&&e.push("<button id='"+this.id+"_start' name='"+this.id+"_start' style='position:absolute;left:-9999px;width:0;height:0;' class='w2window_popup_start'>"+WebSquare.language.getMessage("Window_popup_start")+"</button>");var h="w2window_header",l="w2window_body";1==this.hideTitleOnMaximize&&"maximized"==this.windowInfo.status&&(h+=" w2window_header_extend",l+=" w2window_body_extend");var p=a.D.getDataPrefix("btn_index");if(""==this.options.windowHeaderHTML){if(e.push("<div id='"+this.id+"_header' class='"+h+"'"+o+">"),!0===this.options.useHeadingTagTitle||!0===this.options.accessibility?e.push("<span id='"+this.id+"_header_icon' class='w2window_header_icon'></span>"):e.push("<div id='"+this.id+"_header_icon' class='w2window_header_icon'></div>"),!0===this.options.useATagTitle?e.push("<a id='"+this.id+"_header_title' class='w2window_header_title' href='javascript:void(null);' title='"+this.options.windowTitle+"' style='text-decoration:none;'>"+this.options.windowTitle+"</a>"):!0===this.options.useHeadingTagTitle||!0===this.options.accessibility?e.push("<h2 id='"+this.id+"_header_title' class='w2window_header_title_h2'>"+this.options.windowTitle+"</h2>"):e.push("<div id='"+this.id+"_header_title' class='w2window_header_title'>"+this.options.windowTitle+"</div>"),this.hasButtons){e.push("<div id='"+this.id+"_header_buttonArea' class='w2window_header_buttonArea'>");for(var w=0;w<this.buttonInfo.buttons.length;w++){var u=this.buttonInfo.buttons[w].title||"";if(this.buttonInfo.useButtonFormatter){var c=this.buttonInfo.buttons[w].className||"";e.push("<div id='"+this.id+"_header_button_"+w+"' class='w2window_header_custom_button "+c+"' "+p+"='"+w+"' title='"+u+"' ></div>")}else{var m=this.buttonInfo.buttons[w].value?"<span id='"+this.id+"_header_button_"+w+"_value' class='w2window_header_button_value' title='"+u+"' "+p+"='"+w+"' > "+this.buttonInfo.buttons[w].value+" </span>":"";e.push("<div id='"+this.id+"_header_button_"+w+"' class='w2window_header_button w2window_header_button_"+w+"' "+p+"='"+w+"' >"),e.push("<div id='"+this.id+"_header_button_"+w+"_content' class='w2window_header_button_content w2window_header_button_content_"+w+"' "+p+"='"+w+"' >"),e.push(m),e.push("</div>"),e.push("</div>")}}e.push("</div>")}if(!0!==this.options.accessibility){var f=this.options.dragResizableHeader?" w2window_header_control_resizeDragHeader":"";e.push("<div id='"+this.id+"_header_control' class='w2window_header_control"+f+"'>"),e.push("<div id='"+this.id+"_minimize' class='w2window_minimize' title='"+WebSquare.language.getMessage("Window_minimize")+"'></div>"),e.push("<div id='"+this.id+"_restore' class='w2window_restore' title='"+WebSquare.language.getMessage("Window_restore")+"' ></div>")}var g=this.options.disableCloseButton?" w2window_close_disabled":"";this.options.useATagBtn?a.D.isMobile()?e.push("<a id='"+this.id+"_close' class='w2window_close w2window_close_atag"+g+"' href='javascript:void(null);' >"+WebSquare.language.getMessage("Window_close")+"</a></div>"):e.push("<a id='"+this.id+"_close' class='w2window_close w2window_close_atag"+g+"' href='javascript:void(null);' title='"+WebSquare.language.getMessage("Window_close")+"'>"+WebSquare.language.getMessage("Window_close")+"</a></div>"):!0!==this.options.accessibility&&e.push("<div id='"+this.id+"_close' class='w2window_close"+g+"' title='"+WebSquare.language.getMessage("Window_close")+"' ></div>"),1==this.usePopup&&e.push("<div id='"+this.id+"_popup' class='w2window_popup' title='"+WebSquare.language.getMessage("Window_popup")+"' ></div>"),e.push("</div>"),e.push("</div>")
}else e.push("<div id='"+this.id+"_header' class='"+h+"'>"+this.options.windowHeaderHTML+"</div>");if(this.options.useStatusMsg?e.push("<div id='"+this.id+"_body' class='"+l+"'>"):e.push("<div id='"+this.id+"_body' class='"+l+" w2window_no_status'>"),e.push("<div id='"+this.id+"_content' class='w2window_content'>"),e.push("</div>"),(this.options.useStatusMsg||this.options.useCustomMsg)&&(e.push("<div id='"+this.id+"_status' class='w2window_status'>"),this.options.useStatusMsg&&e.push("<div id='"+this.id+"_msg' class='w2window_msg'>"+this.options.statusMsg+"</div>"),this.options.useCustomMsg&&e.push("<div id='"+this.id+"_custom_msg' class='w2window_custom_msg'>"+this.options.customMsg+"</div>"),e.push("</div>")),e.push("</div>"),!0===this.options.accessibility){var y=a.D.getDataPrefix("refId");f=this.options.dragResizableHeader?" w2window_header_control_resizeDragHeader":"";e.push("<div id='"+this.id+"_header_control' class='w2window_header_control"+f+"'>"),e.push("<button type='button' id='"+this.id+"_minimize' class='w2window_minimize' aria-label='"+WebSquare.language.getMessage("Window_minimize")+"'"+y+"="+this.id+"></button>"),e.push("<button type='button' id='"+this.id+"_restore' class='w2window_restore' aria-label='"+WebSquare.language.getMessage("Window_restore")+"'"+y+"="+this.id+" ></button>"),e.push("<button type='button' id='"+this.id+"_close' class='w2window_close"+g+"' aria-label='"+WebSquare.language.getMessage("Window_close")+"'"+y+"="+this.id+"></div>")}return this.options.dragResizable&&(e.push("<div id='"+this.id+"_resize1' class='w2window_resize_right'></div>"),e.push("<div id='"+this.id+"_resize2' class='w2window_resize'></div>"),e.push("<div id='"+this.id+"_resize3' class='w2window_resize_bottom'></div>"),e.push("<div id='"+this.id+"_resize4' class='w2window_resize_bottomLeft'></div>"),e.push("<div id='"+this.id+"_resize5' class='w2window_resize_left'></div>"),this.options.dragResizableHeader&&(e.push("<div id='"+this.id+"_resize6' class='w2window_resize_upLeft'></div>"),e.push("<div id='"+this.id+"_resize7' class='w2window_resize_up'></div>"),e.push("<div id='"+this.id+"_resize8' class='w2window_resize_upRight'></div>"))),e.push("</div>"),e.join("")}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.setAction=function(){try{!0===this.options.accessibility&&(this.render.setAttribute("role","dialog"),this.render.setAttribute("aria-labelledby",this.id+"_header_title'"),this.options.parent||this.render.setAttribute("aria-modal","true")),this.dom.header=document.getElementById(this.id+"_header"),this.dom.statusMsg=document.getElementById(this.id+"_msg"),this.dom.customMsg=document.getElementById(this.id+"_custom_msg"),this.dom.body=document.getElementById(this.id+"_body"),this.dom.header&&this.dom.header.setAttribute("data-title",this.options.windowTitle),void 0!==this.options.useMaximize&&this.event.addListener(this.render,"ondblclick",this.event.bindAsEventListener(this,this.handleDblclickEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),this.event.addListener(this.render,"onselectstart",this.event.bindAsEventListener(this,this.handleSelectStartEvent)),a.D.isTouchDevice()?(this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,this.handleMousedownEvent)),this.event.addListener(this.render,"onpointerup",this.event.bindAsEventListener(this,this.handleClickEvent))):this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleMousedownEvent)),1==this.options.accessibility&&this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.drawFrame(this.options.src);a.D.getDataPrefix("btn_index")
;if(this.hasButtons){for(var t=0;t<this.buttonInfo.buttons.length;t++){if(!this.buttonInfo.useButtonFormatter){var e=document.getElementById(this.id+"_header_button_"+t+"_content");e.style.marginTop=-e.offsetHeight/2+"px",e.style.marginLeft=-e.offsetWidth/2+"px"}if(this.buttonInfo.buttons[t].value){var i=document.getElementById(this.id+"_header_button_"+t+"_value");i.style.marginTop=-i.offsetHeight/2+"px",i.style.marginLeft=-i.offsetWidth/2+"px"}this.buttons.push({dataBtn_index:t,disable:!1,hidden:!1,contentDom:e,valueDom:i})}if("right"==this.buttonInfo.alignment){var o=document.getElementById(this.id+"_header_control"),n=document.getElementById(this.id+"_header_buttonArea");WebSquare.style.setStyle(n,"float","right"),WebSquare.style.setStyle(n,"left","-"+o.offsetWidth+"px")}if(1==this.buttonInfo.useButtonFormatter){n=document.getElementById(this.id+"_header_buttonArea");WebSquare.style.setStyle(n,"height",n.offsetHeight-5+"px"),WebSquare.style.setStyle(n,"padding-top","5px")}}this.options.useInitialSizePosition&&this.restore(!0)}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.drawFrame=function(t,e){try{if(this.frame&&(this.removeControl(this.frame),this.frame.remove(),this.frame=null),this.options.src=t||"","iframe"==this.options.frameMode){if(!WebSquare.uiplugin.iframe)return void(o=requires("uiplugin.iframe")).then(function(t,e,i){return function(o,n){t.drawFrame(e,i)}}(this,t,e));this.frame=new WebSquare.uiplugin.iframe(this.id+"_iframe",{className:"w2window_iframe",src:this.options.src||"",spa:this.options.spa,title:this.options.title,params:this.options.params,popupParam:this.options.popupParam,spaReplaceHistory:this.options.spaReplaceHistory,msaName:this.options.msaName})}else if("wframe"==this.options.frameMode){var i=this.org_id||this.id;this.frame=l.D.create(i+"_wframe",{className:"w2window_wframe",src:this.options.src||"",scope:!0,params:this.options.params,popupParam:this.options.popupParam,pluginName:"wframe",preload:!0,frameModal:this.options.frameModal,processMsgFrame:this.options.processMsgFrame,msaName:this.options.msaName},null,this.scope_obj,this.parentFrame,!0),this.options.frameModal&&(this.frame._targetFrameObjUUID=this._targetFrameObjUUID),this.frame._isWframePopup=this._isWframePopup;var o=l.D.initAsync(),n=this.uuid;o.then((function(t,e){WebSquare.idCache[n]._activateFrame()}))}e&&e.dataObject?this.setDataObject(e.dataObject):this._dataObject&&this.setDataObject(this._dataObject);var s=this.uuid;this.frame.bind("onload",(function(){r.B.fireEvent(WebSquare.idCache[s],"ondrawcomplete")}));var h="on"+this.frame.options.pluginName+"load";this.frame.bind(h,(function(){r.B.fireEvent(WebSquare.idCache[s],"onwindowload")}));var p="on"+this.frame.options.pluginName+"unload";if(this.frame.bind(p,(function(){null!=WebSquare.idCache[s]&&r.B.fireEvent(WebSquare.idCache[s],"onwindowunload")})),"iframe"==this.options.frameMode){this._activateFrame();try{if(1!=this.options.noAttatchedEvent){n=this.uuid;this.temp_cnt=0;var w=this.id+"_drawframe";a.D.setInterval((function(){try{var t=WebSquare.idCache[n];if(!t)return void a.D.clearInterval(w);t.temp_cnt++,"about:blank"!==t.frame.render.contentWindow.location.href&&t.frame.render.contentWindow.location.href!==WebSquare.net.getSSLBlankPage(!0)?(document.addEventListener&&!a.D.isIE()?(t.frame.render.contentWindow.document.addEventListener("mousedown",(function(){self.WebSquare.idCache[n].handleFrameMouseDownEvent({})})),t.frame.render.contentWindow.document.addEventListener("keyup",(function(t){self.WebSquare.idCache[n].handleFrameKeyupEvent({keyCode:t.charCode?t.charCode:t.keyCode})}))):document.attachEvent&&(t.frame.render.contentWindow.document.attachEvent("onmousedown",(function(){self.WebSquare.idCache[n].handleFrameMouseDownEvent({})})),t.frame.render.contentWindow.document.attachEvent("onkeyup",(function(t){self.WebSquare.idCache[n].handleFrameKeyupEvent({keyCode:t.charCode?t.charCode:t.keyCode})}))),
a.D.clearInterval(w)):t.temp_cnt>1200&&(a.D.clearInterval(w),d.k.printLog("["+t.id+"] addListener fail 1"))}catch(e){(!t||t.temp_cnt>750)&&a.D.clearInterval(w)}}),{key:w,delay:80})}}catch(t){d.k.printLog("["+this.id+"] addListener fail 3")}}else"wframe"==this.options.frameMode&&(this.frame.popupParam=this.popupParam,this.frame.popupId=this.popupId)}catch(t){d.k.printLog("error : window.drawFrame["+this.id+"]")}},p.prototype._activateFrame=function(){try{var t=this.getElementById(this.id+"_content");this.frame.writeTo(t),this.frame.activate(),this.addControl(this.frame)}catch(t){d.k.printLog("error : window.drawFrame["+this.id+"]")}},p.prototype.resizeForIE6=function(t,e,i){try{if(a.D.isIE(6)){i||(i="windowContainer"),t=parseInt(t,10),e=parseInt(e,10);var o=this.options.useStatusMsg?0:20;"windowContainer"==i&&this.setSize(t-3,e-2),this.dom.windowBody=document.getElementById(this.id+"_body"),this.dom.windowContent=document.getElementById(this.id+"_content"),this.dom.windowStatus=document.getElementById(this.id+"_status"),this.dom.header.style.setAttribute("width",t-5+"px"),this.dom.windowBody.style.setAttribute("width",t-5+"px"),this.dom.windowBody.style.setAttribute("height",e-27+"px"),this.dom.windowContent.style.setAttribute("width",t-11+"px"),"popup"==i?this.dom.windowContent.style.setAttribute("height",e-31+o+"px"):this.dom.windowContent.style.setAttribute("height",e-50+o+"px"),"popup"==i?this.frame.setSize(t-11,e-31+o):this.frame.setSize(t-11,e-50+o),this.options.useStatusMsg&&this.dom.windowStatus.style.setAttribute("width",t-11+"px")}}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.resizeParentGroup=function(){try{if(this.parentControl&&this.parentControl.parentControl&&("windowContainer"==this.parentControl.parentControl.options.pluginName||"windowContainer"==this.parentControl.parentControl.options.inheritFrom))return{width:WebSquare.style.getSize(this.parentControl.parentControl.render,"width"),height:this.parentControl.parentControl.options.nameLayerMenu?WebSquare.style.getSize(this.parentControl.parentControl.render,"height")-WebSquare.style.getSize(document.getElementById(this.parentControl.parentControl.id+"_nameContainer"),"height"):WebSquare.style.getSize(this.parentControl.parentControl.render,"height")-WebSquare.style.getSize(this.parentControl.parentControl.dom.toolBar,"height")}}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.close=function(t){try{if(!0===this._closed)return;this._closed=!0;try{WebSquare.dragdrop.gDragManager.remove(this.id+"_drag")}catch(t){s.w.printStackTrace(t,null,this)}if(t&&"object"==typeof t||(t={}),this.options.closeAction){var e=a.D.getGlobalFunction(this.options.closeAction,this.scope_id);if("function"==typeof e)if(!0!==e.call(this,this.options.title,t))return this._closed=!1,!1}if(!0===t.sync?this._close(!0===t.skipRemove):a.D.setTimeout(this._close,{key:this.id+"_onwindowclosed",caller:this,delay:100,args:[{skipRemove:!0===t.skipRemove}]}),1==this.options.accessibility&&""!=this.options._targetId){var i=this.options._targetId;a.D.requestAnimationFrame((function(){var t=document.getElementById(i);t&&t.focus()}))}return!0}catch(t){s.w.printStackTrace(t,null,this),this._closed=!1}},p.prototype.forceClose=function(){try{var t=this;setTimeout((function(){"iframe"==t.options.frameMode&&t.frame.setSrc("about:blank");var e={src:t.options.src,title:t.options.windowTitle};r.B.fireEvent(t,"onclose",e),t.remove()}),100)}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.toggleMinimize=function(){if(!0===this.options.foldOnMinimized){var t=this.windowInfo.status;if(!this.windowInfo.minimized)switch(t){case"restored":this.windowInfo.setInfo(this.render);break;case"maximized":this.restore(!0),this.windowInfo.setInfo(this.render)}this.fold()}else this.minimize()},p.prototype.minimize=function(t,e){try{!0===t||0==this.windowInfo.minimized&&!1!==t?(this.setStyle("display","none"),this.windowInfo.minimized=!0):(this.setStyle("display","block"),this.windowInfo.minimized=!1),
e||r.B.fireEvent(this,"onminimize")}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.fold=function(){try{if(0==this.windowInfo.minimized){var t=this.options.foldSize&&this.options.foldSize.width?this.options.foldSize.width:this.dom.clientWidth;this.setStyle("height",this.dom.header.clientHeight+"px"),this.dom.body.style.display="none",this.setStyle("width",t+"px"),this.windowInfo.minimized=!0,this.options.dragResizable&&(this.getElementById(this.id+"_resize1").style.display="none",this.getElementById(this.id+"_resize2").style.display="none",this.getElementById(this.id+"_resize3").style.display="none",this.getElementById(this.id+"_resize4").style.display="none",this.getElementById(this.id+"_resize5").style.display="none",this.options.dragResizableHeader&&(this.getElementById(this.id+"_resize6").style.display="none",this.getElementById(this.id+"_resize7").style.display="none",this.getElementById(this.id+"_resize8").style.display="none"))}else{this.options.dragResizable&&(this.getElementById(this.id+"_resize1").style.display="",this.getElementById(this.id+"_resize2").style.display="",this.getElementById(this.id+"_resize3").style.display="",this.getElementById(this.id+"_resize4").style.display="",this.getElementById(this.id+"_resize5").style.display="",this.options.dragResizableHeader&&(this.getElementById(this.id+"_resize6").style.display="",this.getElementById(this.id+"_resize7").style.display="",this.getElementById(this.id+"_resize8").style.display=""));var e=this.render.offsetLeft,i=this.render.offsetTop,o=this.render.clientWidth,n=this.render.clientHeight,a=this.getMaxSize(),d=a.width,h=a.height,l=parseInt(this.windowInfo.width,10)-o,p=parseInt(this.windowInfo.height,10)-n,w=e,u=i,c=0,m=0;if(this.parentControl&&(c=document.documentElement.scrollTop||document.body.scrollTop,m=document.documentElement.scrollLeft||document.body.scrollLeft),e+l<0&&(w=0),e+l>d+m?w=o<=d?d-(o+l)+m:0:m>w&&(w=m),i+p<0&&(u=0),i+p>h){if(n<=h){if((u=h-(n+p))<c)return u=c,this.setStyle("height",h-c+"px"),this.setPosition(w,u),this.dom.body.style.display="block",void(this.windowInfo.minimized=!1)}else if(u=0+c,n>h)return h-=c,this.setStyle("height",h+"px"),this.setPosition(w,u),this.dom.body.style.display="block",void(this.windowInfo.minimized=!1)}else c>u&&(u=c);this.setPosition(w,u),this.setStyle("width",this.windowInfo.width),this.setStyle("height",this.windowInfo.height),this.dom.body.style.display="block",this.windowInfo.minimized=!1}r.B.fireEvent(this,"onminimize")}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.popup=function(){try{r.B.fireEvent(this,"onpopup")}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.maximize=function(){try{if(this.removeClass(this.render,"w2window_restored"),this.addClass(this.render,"w2window_maximized"),this.hideTitleOnMaximize){this.dom.header.className="w2window_header w2window_header_extend";var t="w2window_body w2window_body_extend";this.options.useStatusMsg||(t+=" w2window_no_status"),this.dom.body.className=t}this.dom.body.style.display="block",this.windowInfo.status="maximized",this.windowInfo.drag=!1,this.windowInfo.minimized||this.windowInfo.setInfo(this.render),this.windowInfo.minimized=!1;var e=this.getMaxSize();if(this.parentControl){var i=document.documentElement.scrollTop||document.body.scrollTop,o=document.documentElement.scrollLeft||document.body.scrollLeft;this.render.style.left=o+"px",this.render.style.top=i+"px",this.render.style.height=e.height-i+"px",this.render.style.width=o>0?e.width+"px":""}else this.render.style.left="0px",this.render.style.top="0px",this.render.style.width="",this.render.style.height="";r.B.fireEvent(this,"onmaximize")}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.restore=function(t){try{if(this.removeClass(this.render,"w2window_maximized"),this.addClass(this.render,"w2window_restored"),this.hideTitleOnMaximize){this.dom.header.className="w2window_header";var e="w2window_body";this.options.useStatusMsg||(e+=" w2window_no_status"),
this.dom.body.className=e}"none"==this.getStyle("display")&&this.setStyle("display","block"),this.dom.body.style.display="block",this.windowInfo.status="restored",!0!==this.options.fixPosition&&(this.windowInfo.drag=!0),this.windowInfo.minimized=!1,this.options.useRestoreDefaultSize?this.windowInfo.getInfo(this.render,"restored"):this.windowInfo.getInfo(this.render),t||r.B.fireEvent(this,"onrestore")}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.toggleResize=function(){try{"restored"==this.windowInfo.status?this.maximize():this.restore()}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.setStatusMsg=function(t){try{this.options.useStatusMsg&&(this.dom.statusMsg.innerHTML=t)}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.setCustomMsg=function(t){try{this.options.useCustomMsg&&(this.dom.customMsg.innerHTML=t)}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.setSrc=function(t,e){try{if(null!=this.frame)if("iframe"==this.options.frameMode)requires("uiplugin.iframe").then(function(t,e,i){return function(o,n){t.drawFrame(e,i)}}(this,t,e));else"wframe"==this.options.frameMode&&this.frame.setSrc(t,e)}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.movable=function(t){try{t=a.D.getBoolean(t),this.windowInfo.drag=t}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.showModal=function(t){try{if(r.B.fireEvent(this,"ondragstart"),!this.modal){if(this.modal=document.createElement("div"),this.modal.id=this.id+"_modal",this.modal.className="w2modal",a.D.isIE(6)){this.resizeParentGroup();var e=document.documentElement.offsetWidth||0,i=document.documentElement.offsetHeight||0;this.modal.style.width=e+"px",this.modal.style.height=i+"px",this.modal.style.left="-"+this.render.offsetLeft+"px",this.modal.style.top="-"+this.render.offsetTop+"px"}t&&!0===t.transparent&&(this.modal.style.backgroundColor="transparent"),this.render.appendChild(this.modal),WebSquare.style.setOpacity(this.modal,.3)}if(this.modal){if(this.modal.style.display="block",a.D.isIE(6)){this.resizeParentGroup();e=document.documentElement.offsetWidth||0,i=document.documentElement.offsetHeight||0;this.modal.style.width=e+"px",this.modal.style.height=i+"px",this.modal.style.left="-"+this.render.offsetLeft+"px",this.modal.style.top="-"+this.render.offsetTop+"px"}!a.D.isMobile()&&this.options.frameModal&&this.addClass(document.documentElement,"w2modalopened_ghost")}}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.hideModal=function(){try{r.B.fireEvent(this,"ondragend"),this.modal&&(this.modal.style.display="none",!a.D.isMobile()&&this.options.frameModal&&this.removeClass(document.documentElement,"w2modalopened_ghost"))}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.setFocus=function(){try{a.D.isMobile()&&this.options.useAtagButton?document.getElementById(this.id+"_start").focus():"iframe"==this.options.frameMode?this.frame.render.contentWindow&&this.frame.render.contentWindow.focus():"wframe"==this.options.frameMode&&this.frame.focus()}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype._focus=function(){try{a.D.isMobile()&&this.options.useATagBtn?document.getElementById(this.id+"_start").focus():(this.render.setAttribute("tabindex",0),this.render.focus())}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.getMaxSize=function(){var t,e;(this.parentControl?(t=WebSquare.style.getSize(this.parentControl.render,"width"),e=WebSquare.style.getSize(this.parentControl.render,"height")+(document.documentElement.scrollTop||document.body.scrollTop)):(t=this.options.width,e=this.options.height),this.render)&&(t=t-(parseInt(a.D.getStyleProperty(this.render,"border-left-width"),10)||0)-(parseInt(a.D.getStyleProperty(this.render,"border-right-width"),10)||0)-(parseInt(a.D.getStyleProperty(this.render,"padding-left"),10)||0)-(parseInt(a.D.getStyleProperty(this.render,"padding-right"),10)||0),
e=e-(parseInt(a.D.getStyleProperty(this.render,"border-top-width"),10)||0)-(parseInt(a.D.getStyleProperty(this.render,"border-bottom-width"),10)||0)-(parseInt(a.D.getStyleProperty(this.render,"padding-top"),10)||0)-(parseInt(a.D.getStyleProperty(this.render,"padding-bottom"),10)||0));return{width:t,height:e}},p.prototype.getElementSize=function(t){var e,i;(t||(t=this.render),t)&&(e=t.offsetWidth,i=t.offsetHeight,e=e-(parseInt(a.D.getStyleProperty(t,"border-left-width"),10)||0)-(parseInt(a.D.getStyleProperty(t,"border-right-width"),10)||0)-(parseInt(a.D.getStyleProperty(t,"padding-left"),10)||0)-(parseInt(a.D.getStyleProperty(t,"padding-right"),10)||0),i=i-(parseInt(a.D.getStyleProperty(t,"border-top-width"),10)||0)-(parseInt(a.D.getStyleProperty(t,"border-bottom-width"),10)||0)-(parseInt(a.D.getStyleProperty(t,"padding-top"),10)||0)-(parseInt(a.D.getStyleProperty(t,"padding-bottom"),10)||0));return{width:e,height:i}},p.prototype.handleClickEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2window_close")&&!0!==this.options.disableCloseButton&&(this.close({isCloseButtonClick:!0}),this.options&&this.options.frameModal&&r.B.stopPropagation(t)),e.match("w2window_minimize")&&(r.B.stopEvent(t),this.toggleMinimize(),this.options.frameModal&&r.B.stopPropagation(t),r.B.fireEvent(this,"onminimizebtnclick",t),this.parentControl&&this.parentControl.parentControl&&("windowContainer"==this.parentControl.parentControl.options.pluginName||"windowContainer"==this.parentControl.parentControl.options.inheritFrom))){var i={src:this.options.src,title:this.options.title,windowTitle:this.options.windowTitle,id:this.id,windowId:this._windowId};r.B.fireEvent(this.parentControl.parentControl,"onminimizebtnclick",i)}if(e.match("w2window_restore")&&(this.toggleResize(),this.options.frameModal&&r.B.stopPropagation(t),r.B.fireEvent(this,"onrestorebtnclick",t),this.parentControl&&this.parentControl.parentControl&&("windowContainer"==this.parentControl.parentControl.options.pluginName||"windowContainer"==this.parentControl.parentControl.options.inheritFrom))){i={src:this.options.src,title:this.options.title,windowTitle:this.options.windowTitle,id:this.id,windowId:this._windowId};r.B.fireEvent(this.parentControl.parentControl,"onrestorebtnclick",i)}e.match("w2window_popup")&&(r.B.stopEvent(t),this.popup())}e=null}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.handleFrameMouseDownEvent=function(t){try{r.B.fireEvent(this,"onwindowmousedown",t)}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.handleDblclickEvent=function(t){try{if(!1===this.options.useMaximize)return;for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2window_header_button"))return;e.match("w2window_header")&&this.toggleResize()}e=null}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.handleMouseoverEvent=function(t){try{for(var e=a.D.getDataPrefix("btn_index"),i=this.event.getTargetIterator(t,this.render);i.next();)if(i.match("w2window_minimize")&&this.addClass(i.getElement(),"w2window_minimize_on"),i.match("w2window_restore")&&this.addClass(i.getElement(),"w2window_restore_on"),i.match("w2window_close")&&this.addClass(i.getElement(),"w2window_close_on"),i.match("w2window_popup")&&this.addClass(i.getElement(),"w2window_popup_on"),i.match("w2window_header_button_content")){var o=i.getElement();this.buttons[Number(o.getAttribute(e))].disable||this.addClass(o,"w2window_header_button_content_on")}i=null}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.handleMouseoutEvent=function(t){try{r.B.stopEvent(t);for(var e=a.D.getDataPrefix("btn_index"),i=this.event.getTargetIterator(t,this.render);i.next();)if(i.match("w2window_minimize")&&this.removeClass(i.getElement(),"w2window_minimize_on"),i.match("w2window_restore")&&this.removeClass(i.getElement(),"w2window_restore_on"),i.match("w2window_close")&&this.removeClass(i.getElement(),"w2window_close_on"),
i.match("w2window_popup")&&this.removeClass(i.getElement(),"w2window_popup_on"),i.match("w2window_header_button_content")){var o=i.getElement();this.buttons[Number(o.getAttribute(e))].disable||this.removeClass(o,"w2window_header_button_content_on")}i=null}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.handleMousedownEvent=function(t){try{this.resizeParentGroup();for(var e=a.D.getDataPrefix("btn_index"),i=this.event.getTargetIterator(t,this.render);i.next();){if(i.match("w2window_header")&&(!0!==this.options.enableHeaderSelect&&r.B.stopEvent(t),1==this.windowInfo.drag&&!WebSquare.idCache[this._multiViewUUID])){var o=r.B.getTarget(t);if(!o||o.id==this.id+"_minimize"||o.id==this.id+"_restore"||o.id==this.id+"_close"||o.id==this.id+"_popup")return;var n=this;WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",delay:5,mode:"move",windowDragMove:this.options.windowDragMove,makeGhostLayer:!0===this.options.windowDragMove?null:function(t){var e=WebSquare.style.getAbsoluteLeft(n.render),i=WebSquare.style.getAbsoluteTop(n.render),o=n.getElementSize(n.render),s=o.width,r=o.height;return s=s-(parseInt(a.D.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(a.D.getStyleProperty(t.render,"border-right-width"),10)||0),r=r-(parseInt(a.D.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(a.D.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.show(),t.setSize(s,r),t.setPosition(e,i),t.hide(),t},handleStart:function(){!0===n.options.windowDragMove?(n.showModal.call(n,{transparent:!0}),1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll()):(n.showModal.call(n),1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll())},handleUpdate:function(t,e,i,o,r){n.render.offsetLeft;var d,h,l=n.render.offsetTop,p=(n.render.clientWidth,n.render.clientHeight,(S=n.getMaxSize()).width),w=S.height,u=0,c=0;if(n.parentControl&&(u=document.documentElement.scrollTop||document.body.scrollTop,c=document.documentElement.scrollLeft||document.body.scrollLeft,d=WebSquare.style.getAbsoluteLeft(n.parentControl.render),h=WebSquare.style.getAbsoluteTop(n.parentControl.render),n.frame&&"wframe"===n.frame.getPluginName()&&(d-=c,h-=u)),!0!==n.options.windowDragMove){if(1==n.options.displayParentWindowScroll&&!n.options.frameModal)try{var m=a.D.getStyleProperty(document.documentElement,"overflow");if(("auto"==m||"scroll"==m)&&!n.modal)return}catch(r){s.w.printStackTrace(r,null,this)}n.frame&&"iframe"===n.frame.getPluginName()?(r.clientX<d+40||r.clientX>p+d-40||l+o+1-u<0||r.clientY+20+u>h+w-20)&&WebSquare.dragdrop.gDragManager.finish(r):"overflow"===n.options.windowMoveType?(r.clientX<d+20&&i<0||r.clientX>p+d-20&&i>0||r.clientY+1<h||r.clientY>h+w-20&&o>0)&&WebSquare.dragdrop.gDragManager.finish(r):(r.clientX<d+20||r.clientX>p+d-20||r.clientY+1<h||r.clientY>h+w-20)&&WebSquare.dragdrop.gDragManager.finish(r)}else{var f=0,g=0;try{f=WebSquare.style.getAbsoluteLeft(n.render.parentNode),g=WebSquare.style.getAbsoluteTop(n.render.parentNode)}catch(r){s.w.printStackTrace(r,null,this)}var y=Math.max(t+i-f,0),_=Math.max(e+o-g,0),b=0,v=0;if(!n.parentControl.parentControl||"tabControl"!=n.parentControl.parentControl.options.pluginName&&"tabControl"!=n.parentControl.parentControl.options.inheritFrom){var S=n.getMaxSize(),I=(u=n.parentControl?document.documentElement.scrollTop||document.body.scrollTop:0,n.render.offsetWidth),z=n.render.offsetHeight;"overflow"===n.options.windowMoveType&&(I=n.options.minVisibleWindowPixel,z=n.options.minVisibleWindowPixel);var M=S.width-I,C=S.height-z-u;y=Math.min(y,M),_=Math.min(_,C)}else b=n.parentControl?n.parentControl.render.scrollLeft:0,v=n.parentControl?n.parentControl.render.scrollTop:0;n.setPosition(y+b,_+v)}},handleFinish:function(t,e,i,o){if(n.hideModal.call(n),!0!==n.options.windowDragMove){
var r=n.render.offsetLeft,d=n.render.offsetTop,h=n.render.clientWidth,l=n.render.clientHeight,p=n.getMaxSize(),w=p.width,u=p.height,c=r+i,m=d+o,f=0,g=0,y=0,_=0,b=0,v=0;if(n.parentControl&&(f=document.documentElement.scrollTop||document.body.scrollTop,g=document.documentElement.scrollLeft||document.body.scrollLeft,n.options.frameModal&&(b=parseInt(n.parentControl.getStyle("border-top-width"))||0,v=parseInt(n.parentControl.getStyle("border-left-width"))||0,w=n.parentControl.render.offsetWidth-v,u=n.parentControl.render.offsetHeight-b,h=n.render.offsetWidth,l=n.render.offsetHeight,n.render.offsetParent!==n.parentControl.render&&(d-=y=n.parentControl.render.offsetTop,r-=_=n.parentControl.render.offsetLeft))),1==n.options.displayParentWindowScroll&&!n.options.frameModal||"overflow"===n.options.windowMoveType)try{var S=a.D.getStyleProperty(document.documentElement,"overflow");"auto"!=S&&"scroll"!=S&&"overflow"!==n.options.windowMoveType||(w=Math.max(w,h,r+h+i),u=Math.max(u,l,d+l+o))}catch(t){s.w.printStackTrace(t,null,this)}"overflow"!==n.options.windowMoveType&&r+i<0&&(c=_+v),r+h+i>w+g?c=h<=w?w-h+g+_:_:"overflow"!==n.options.windowMoveType&&g>c&&(c=g),d+o<0&&(m=y+b),d+l+o>u?l<=u?(m=u-l+y)<f&&(m=f,n.render.style.height=u-f+"px"):(m=0+f,l>u&&(u-=f,n.render.style.height=u+"px")):f>m&&(m=f),n.setPosition(c,m)}}})}if(i.match("w2window_header_button")){r.B.stopEvent(t);var d=i.getElement().getAttribute(e);if(!(p=this.buttons[Number(d)]).disable)try{var h=this.buttonInfo.buttons[d].clickAction;if("function"==typeof h)h.apply(this,this);else{var l=a.D.getGlobalFunction(h,this.scope_id);"function"==typeof l&&l(this)}}catch(t){s.w.printStackTrace(t,null,this)}return}if(i.match("w2window_header_custom_button")){r.B.stopEvent(t);d=i.getElement().getAttribute(e);var p=this.buttons[parseInt(d,10)],w={uniqueId:this.id,btnId:this.id+"_header_button_"+p[e],btnIdx:p[e],disable:p.disable,hidden:p.hidden};return void(p.disable||this.parentControl&&this.parentControl.parentControl&&("windowContainer"==this.parentControl.parentControl.options.pluginName||"windowContainer"==this.parentControl.parentControl.options.inheritFrom)&&r.B.fireEvent(this.parentControl.parentControl,"onclickcustombtn",w))}var u=i.match("w2window_resize"),c=i.match("w2window_resize_bottomLeft");if((u||c)&&(r.B.stopEvent(t),1==this.windowInfo.drag&&!WebSquare.idCache[this._multiViewUUID])){n=this;WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:u?"resize":"resize_bottomLeft",minWidth:n.windowInfo.minWidth,minHeight:n.windowInfo.minHeight,makeGhostLayer:function(t){var e=WebSquare.style.getAbsoluteLeft(n.render),i=WebSquare.style.getAbsoluteTop(n.render),o=n.getElementSize(n.render),s=o.width,r=o.height;return s=s-(parseInt(a.D.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(a.D.getStyleProperty(t.render,"border-right-width"),10)||0),r=r-(parseInt(a.D.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(a.D.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(s,r),t.setPosition(e,i),t},handleStart:function(){n.showModal.call(n)},handleFinish:function(t,e,i,o,s){n.hideModal.call(n);var r="resize"===this.mode?1:-1,a=parseInt(n.getStyle("width"),10),d=parseInt(n.getStyle("height"),10),h=n.render.offsetTop,l=n.render.offsetLeft,p=a+i*r,w=d+o;p<parseInt(n.windowInfo.minWidth,10)&&(p=parseInt(n.windowInfo.minWidth,10),1===r?i+=a-p:i=a-p),w<parseInt(n.windowInfo.minHeight,10)&&(w=parseInt(n.windowInfo.minHeight,10));var u,c=n.getMaxSize(),m=c.height-h;if((u=1===r?c.width-l:Math.min(l+a,c.width))<n.render.clientWidth+i*r&&(p=u),m<n.render.clientHeight+o&&(w=m),n.setSize(p,w),-1===r){var f=Math.max(l+i,0);n.setPosition(f,null)}}})}var m=i.match("w2window_resize_right"),f=i.match("w2window_resize_left");if((m||f)&&(r.B.stopEvent(t),1==this.windowInfo.drag&&(!WebSquare.idCache[this._multiViewUUID]||1!==this._direction))){n=this;WebSquare.idCache[this._multiViewUUID]&&this.showModal.call(this),
WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:m?"resize_right":"resize_left",minWidth:n.windowInfo.minWidth,minHeight:n.windowInfo.minHeight,makeGhostLayer:function(t){var e=WebSquare.style.getAbsoluteLeft(n.render),i=WebSquare.style.getAbsoluteTop(n.render),o=n.getElementSize(n.render),s=o.width,r=o.height;return s=s-(parseInt(a.D.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(a.D.getStyleProperty(t.render,"border-right-width"),10)||0),r=r-(parseInt(a.D.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(a.D.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(s,r),t.setPosition(e,i),t},handleStart:function(){WebSquare.idCache[n._multiViewUUID]||n.showModal.call(n)},handleFinish:function(t,e,i,o,s){var r="resize_right"===this.mode?1:-1;n.hideModal.call(n);var a=parseInt(n.getStyle("width"),10),d=parseInt(n.getStyle("height"),10),h=a+i*r;h<parseInt(n.windowInfo.minWidth,10)&&(h=parseInt(n.windowInfo.minWidth,10),1===r?i+=a-h:i=a-h);var l=n.getMaxSize().width;if("resize_right"===this.mode&&(l-=n.render.offsetLeft),l<n.render.clientWidth+i*r&&(h=l),WebSquare.idCache[n._multiViewUUID]&&1!==n._direction){var p=WebSquare.idCache[n._multiViewUUID],w=parseInt(p.windowInfo.minWidth,10);h>l-w&&(h=l-w),p.setSize(parseInt(p.getStyle("width"),10)-h+a,null),p.setPosition(p.getPosition("left")+h-a,null)}if(n.setSize(h,d),n.frame&&n.frame._processMsgModal&&"block"===n.frame._processMsgModal.render.style.display&&n.frame._processMsgModal.setSize(h,d),-1===r){var u=n.getPosition("left")+i;u+h>l&&(u=l-h),u=Math.max(u,0),n.setPosition(u,null)}}})}var g=i.match("w2window_resize_bottom"),y=i.match("w2window_resize_up");if((g||y&&this.options.dragResizableHeader)&&(r.B.stopEvent(t),1==this.windowInfo.drag&&(!WebSquare.idCache[this._multiViewUUID]||1===this._direction))){n=this;WebSquare.idCache[this._multiViewUUID]&&this.showModal.call(this),WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:g?"resize_bottom":"resize_up",minWidth:n.windowInfo.minWidth,minHeight:n.windowInfo.minHeight,makeGhostLayer:function(t){var e=WebSquare.style.getAbsoluteLeft(n.render),i=WebSquare.style.getAbsoluteTop(n.render),o=n.getElementSize(n.render),s=o.width,r=o.height;return s=s-(parseInt(a.D.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(a.D.getStyleProperty(t.render,"border-right-width"),10)||0),r=r-(parseInt(a.D.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(a.D.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(s,r),t.setPosition(e,i),t},handleStart:function(){WebSquare.idCache[n._multiViewUUID]||n.showModal.call(n)},handleFinish:function(t,e,i,o,s){var r="resize_bottom"===this.mode?1:-1;n.hideModal.call(n);var a=parseInt(n.getStyle("width"),10),d=parseInt(n.getStyle("height"),10),h=parseInt(n.getStyle("left"),10),l=parseInt(n.getStyle("top"),10),p=d+o*r;p<parseInt(n.windowInfo.minHeight,10)&&(p=parseInt(n.windowInfo.minHeight,10));var w=n.getMaxSize(),u=w.height;r||(u=l+d),1==r?u-=n.render.offsetTop:u=Math.min(l+d,w.height);var c=n.render.clientHeight+o*r;if(u<p&&(p=u,1===r&&(o+=c-p)),WebSquare.idCache[n._multiViewUUID]&&1===n._direction){var m=WebSquare.idCache[n._multiViewUUID],f=parseInt(m.windowInfo.minHeight,10);p>u-f&&(p=u-f),m.setSize(null,parseInt(m.getStyle("height"),10)-p+d),m.setPosition(null,m.getPosition("top")+p-d)}else if("resize_up"===this.mode){var g=l-o*r;g<0&&(g=0),g+p>u&&(g=u-p),n.setPosition(h,g)}n.setSize(a,p)}})}if(this.options.dragResizableHeader){var _=i.match("w2window_resize_upRight"),b=i.match("w2window_resize_upLeft");if((_||b)&&(r.B.stopEvent(t),1==this.windowInfo.drag&&!WebSquare.idCache[this._multiViewUUID])){n=this;WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:_?"resize_upRight":"resize_upLeft",minWidth:n.windowInfo.minWidth,minHeight:n.windowInfo.minHeight,
makeGhostLayer:function(t){var e=WebSquare.style.getAbsoluteLeft(n.render),i=WebSquare.style.getAbsoluteTop(n.render),o=n.getElementSize(n.render),s=o.width,r=o.height;return s=s-(parseInt(a.D.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(a.D.getStyleProperty(t.render,"border-right-width"),10)||0),r=r-(parseInt(a.D.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(a.D.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(s,r),t.setPosition(e,i),t},handleStart:function(){n.showModal.call(n)},handleFinish:function(t,e,i,o,s){n.hideModal.call(n);var r="resize_upRight"===this.mode?1:-1,a=parseInt(n.getStyle("width"),10),d=parseInt(n.getStyle("height"),10),h=n.render.offsetTop,l=n.render.offsetLeft,p=a+i*r,w=d-o;p<parseInt(n.windowInfo.minWidth,10)&&(p=parseInt(n.windowInfo.minWidth,10),1===r?i+=a-p:i=a-p),w<parseInt(n.windowInfo.minHeight,10)&&(o=d-(w=parseInt(n.windowInfo.minHeight,10)));var u,c,m=n.getMaxSize();1===r?(u=m.width-l,c=h+d):(u=Math.min(l+a,m.width),c=Math.min(h+d,m.height));var f=d-o;u<a+i*r&&(p=u),c<f&&(w=c,1===r&&(o+=f-w)),n.setSize(p,w);var g=h+o,y=l;-1===r&&(g=Math.max(g,0),y=Math.max(l+i,0)),g+w>=m.height&&(g=m.height-w),n.setPosition(y,g)}})}}}i=null}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.handleMouseupEvent=function(t){try{r.B.stopEvent(t)}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.handleFrameKeyupEvent=function(t){try{r.B.fireEvent(this,"onwindowkeyup",t)}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.checkLoadEvent=function(){try{if(this.frame&&this.frame.render){var t=this.frame.render.contentWindow;t.WebSquare&&t.WebSquare.scriptSectionExcuteFlag&&"executed"===t.WebSquare.scriptSectionExcuteFlag&&(a.D.clearInterval(this.id+"_checkLoadEvent"),a.D.fullViewed&&a.D.zoomed(t.document.body,"1"))}}catch(t){}},p.prototype.handleSelectStartEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next();)(!0!==this.options.enableHeaderSelect&&e.match("w2window_header")||e.match("w2window_status"))&&r.B.preventDefault(t);e=null}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.handleKeydownEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode;if(1==this.options.accessibility&&""!=this.options._targetId){if(27==e)this.close({isCloseButtonClick:!0});else if(t.shiftKey&&9==e){if((o=a.D._getTabbableComp(this.render)).length>=1&&t.target==o[0])if(n=document.getElementById(this.id+"_close"))return n.focus(),void r.B.preventDefault(t)}for(var i=this.event.getTargetIterator(t,this.render);i.next();)if(i.match("w2window_close"))if(13==e||32==e)this.handleClickEvent(t);else if(t.shiftKey||9!=e){if(t.shiftKey&&9==e){if(3==(o=a.D._getTabbableComp(this.render)).length)return o[2].focus(),void r.B.preventDefault(t)}}else{var o,n;if((o=a.D._getTabbableComp(this.render)).length>=1)o[0].focus(),r.B.preventDefault(t);else if(n=document.getElementById(this.id+"_close"))return void n.focus()}return void(i=null)}}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.setWindowTitle=function(t){try{var e=document.getElementById(this.id+"_header_title");if(e){if(e.innerHTML=t,this.options.windowTitle=t,this.options.windowTooltipDisplay&&this.render)document.getElementById(this.id+"_header").setAttribute("title",t);!0===this.options.useATagTitle&&e.setAttribute("title",t)}}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.setWindowHeaderHTML=function(t){try{if(t){try{var e=a.D.getGlobalFunction(t,this.scope_id);"function"==typeof e?e():e}catch(e){t}var i=this.getElementById(this.id+"_header");i&&(i.innerHTML=t,this.options.windowHeaderHTML=t)}}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.setButtonCondition=function(t,e,i){try{var o=this.buttons[Number(e)];if(o){var n=o.contentDom;i=a.D.getBoolean(i);switch(t){case"hidden":o.visisble=i,n.parentNode.style.display=i?"none":"inline-block";break;case"disabled":o.disable=i,
i?this.addClass(n,"w2window_header_button_disabled"):this.removeClass(n,"w2window_header_button_disabled")}}}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.setCloseButtonStatus=function(t){try{this.options.disableCloseButton=!a.D.getBoolean(t);var e=document.getElementById(this.id+"_close");this.options.disableCloseButton?this.addClass(e,"w2window_close_disabled"):this.removeClass(e,"w2window_close_disabled")}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.setDataObject=function(t){try{this.frame?(this.frame.setDataObject(t),this._dataObject&&delete this._dataObject):this._dataObject=t}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype._getDataObject=function(){try{return this.frame?this.frame._getDataObject():this._dataObject}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.finalize=function(){try{h.s.prototype.finalize.call(this),!0!==this._closed&&this.close({sync:!0,skipRemove:!0})}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype._close=function(t){try{if(!this.options)return;var e={src:this.options.src,title:this.options.windowTitle,id:this.id};r.B.fireEvent(this,"onbeforeclose",e);var i=this.options.parent&&this.options.parent.options.spaIframeMaxSize>this.options.parent.storedFrame.length;if("iframe"==this.options.frameMode)if(i)this.frame.setSrc(WebSquare.net.getBlankXML());else{try{var o=n.v.getConfiguration("/WebSquare/clearMemory/@value");a.D.isIEAllVersion()&&"true"==o||this.frame.getWindow().WebSquare&&this.frame.getWindow().WebSquare.clearMemory()}catch(t){d.k.printLog("WebSquare.uiplugin.window._close : skip clearMemory :"+this.id)}this.frame.setSrc("about:blank")}if(r.B.fireEvent(this,"onclose",e),i){this.render&&(this.render.style.display="none");for(var h=!1,l=0;l<this.options.parent.storedFrame.length;l++)if(this.options.parent.storedFrame[l]==this.id){h=!0;break}h||this.options.parent.storedFrame.push(this.id)}else this.remove&&!0!==t&&("wframe"===this.options.frameMode&&r.B.fireEvent(this,"onwindowunload"),this.remove())}catch(t){s.w.printStackTrace(t,null,this),this._closed=!1}}}}]);