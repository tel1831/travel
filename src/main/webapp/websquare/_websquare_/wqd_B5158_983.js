"use strict";(self.webpackChunkwebpack_test=self.webpackChunkwebpack_test||[]).push([[983],{4983:(t,e,s)=>{s.r(e),s.d(e,{pivotTable:()=>p});var i=s(2981),o=s(1656),r=s(2085),n=s(1960),a=s(3082),l=s(6615),p=function(t,e,s){l.s.call(this,t,e,s)};p.prototype.initAsync=async function(){p.isImported||(await inquires("externalJS/underscore/underscore-min.js"),await inquires("externalJS/jquery/jquery-ui-1.9.2.custom.min.js"),await inquires("uiplugin/pivotTable/pivot_min.js"),await inquires("uiplugin/pivotTable/pivot_ko.js"),p.isImported=!0)},i.x.extend(p.prototype,l.s.prototype),p.prototype.defaultOptions={pluginType:"uiplugin.pivotTable",pluginName:"pivotTable",useConfig:!0,userEvents:["onrefresh"],dataList:"",rows:"",cols:"",vals:"",defaultAggregator:"Sum",valuesAxis:"row",sortFunction:"",numberFormatter:"",rendererOptions:"",refreshOptions:!1,renderMode:"full",showGrandTotal:!0,noResultMessageVisible:!1,noResultMessage:"",noResultMessageClass:"",noResultMessageStyle:""},p.prototype.initialize=function(t){try{this.initFlag=!0,this.columnInfoList=[],this.seperator=",",this.pivotLanguage="ko";for(var e=WebSquare.Elem.api.getElementsByTagName(t,"fieldInfo",o.v._XML_NAMESPACE.W2)[0],s=WebSquare.Elem.api.getElementsByTagName(e,"field",o.v._XML_NAMESPACE.W2),i=0;i<s.length;i++){var n=s[i],a=WebSquare.Parser.parseAttribute(n);null!=a.sortOrder&&(a.sortOrder=a.sortOrder.split(this.seperator)),this.columnInfoList.push(a)}this._dataList=null,this.options.noResultMessage=this.options.noResultMessage||WebSquare.language.getMessage("Grid_noResultMessage")||"조회 결과가 없습니다."}catch(t){r.w.printStackTrace(t)}},p.prototype.toHTML=function(){try{var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'";return t.push("<div id='"+this.id+"' "+e+" class='w2pivotTable "+this.options.className+"'>"),t.push("</div>"),t.join("")}catch(t){r.w.printStackTrace(t)}},p.prototype.setAction=function(){try{this.refreshItemset()}catch(t){r.w.printStackTrace(t)}},p.prototype.refreshItemset=function(t){try{var e=WebSquare.DataCollection.comp[this.options.dataList];null==this._dataList&&null!=e&&(e.addChild(this),e=WebSquare.DataCollection.api.getObj(e),this._dataList=e,this.modelControl.isDataCollectionItemsetBinded=!0,this.modelControl.useItemset=!0);for(var s=[],i=e.options.depthColumn?e.getTotalRow():e.filteredRowIndexArr.length,o=e.cellIdList.length,l=0;l<i;l++){for(var p={},u=e.options.depthColumn?l:e.filteredRowIndexArr[l],h=0;h<e.cellIdList.length;h++){var c=e.getCellInfo(h);c&&("expression"==c.options.inputType?p[c.id]=c.getExpressionValue(u):(p[c.id]=e.dataArr[u*o+h],null==p[c.id]&&(p[c.id]="")))}s.push(p)}if(s.length>0){var d={},g={},f={},m={};for(l=0;l<this.columnInfoList.length;l++){var y=this.columnInfoList[l];d[y.id]=y.name||y.id,y.aggregator&&(g[y.id]=y.aggregator),y.exclusions&&(f[y.id]=y.exclusions.split(this.seperator)),m[y.id]=l}var v=this.id,w=a.D.getGlobalFunction(this.options.numberFormatter);"function"!=typeof w&&(w=null);var b=a.D.getGlobalFunction(this.options.sortFunction);"function"!=typeof b&&(b=function(t){var e=m[t],s=a.D.getComponentById(v);if(null!=s&&null!=e&&null!=s.columnInfoList[e].sortOrder)return $.pivotUtilities.sortAs(s.columnInfoList[e].sortOrder)});var I={rows:this.options.rows.split(this.seperator),cols:this.options.cols.split(this.seperator),vals:this.options.vals.split(this.seperator),valuesAxis:this.options.valuesAxis,aggregatorName:this.options.defaultAggregator,aggregatorList:g,exclusions:f,attributeLabels:d,numberFormat:w,onRefresh:function(t){n.B.fireEvent(a.D.getComponentById(v),"onrefresh",t)},sorters:b};if(this.options.unusedAttrsVertical&&"true"===this.options.unusedAttrsVertical&&(I.unusedAttrsVertical=!0),""!==this.options.rendererOptions)try{I.rendererOptions=WebSquare.jsonUtil.getJSONByPath(window,this.options.rendererOptions),"string"==typeof I.rendererOptions&&(I.rendererOptions=JSON.parse(I.rendererOptions))}catch(t){r.w.printStackTrace(t)}var S=document.getElementById(this.id+"_noresult")
;S&&S.remove(),"compact"==this.options.renderMode?$("#"+this.id).pivot(s,I,t||this.options.refreshOptions,this.pivotLanguage,this):$("#"+this.id).pivotUI(s,I,t||this.options.refreshOptions,this.pivotLanguage,this)}else{if(0==this.initFlag){var T=document.getElementById(this.id),C=T.childNodes;for(h=C.length-1;h>=0;h--)T.removeChild(C.item(h));if(this.options.noResultMessageVisible&&0==this.initFlag){var L=document.createElement("div");L.innerHTML="<div id='"+this.id+"_noresult' style='display:none;position:absolute;"+this.options.noResultMessageStyle+"' class='"+this.options.noResultMessageClass+"'>"+this.options.noResultMessage+"</div>",L.firstChild.style.display="block",this.appendChild(L.firstChild)}}this.initFlag=!1}}catch(t){r.w.printStackTrace(t)}},p.prototype.setOption=function(t){try{for(var e in t)this.options[e]=t[e];this.refreshItemset(!0)}catch(t){r.w.printStackTrace(t)}},p.prototype.getOption=function(){try{return i.x.extend({},this.options)}catch(t){r.w.printStackTrace(t)}},p.prototype.setRows=function(t){try{"string"==typeof t&&(this.options.rows=t,this.refreshItemset(!0))}catch(t){r.w.printStackTrace(t)}},p.prototype.setCols=function(t){try{"string"==typeof t&&(this.options.cols=t,this.refreshItemset(!0))}catch(t){r.w.printStackTrace(t)}},p.prototype.setVals=function(t){try{"string"==typeof t&&(this.options.vals=t,this.refreshItemset(!0))}catch(t){r.w.printStackTrace(t)}},p.prototype.finalize=function(){try{null!=this._dataList&&this._dataList.removeChild(this.id)}catch(t){r.w.printStackTrace(t)}}}}]);