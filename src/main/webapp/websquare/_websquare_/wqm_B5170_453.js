"use strict";(self.webpackChunkwebpack_test=self.webpackChunkwebpack_test||[]).push([[453],{453:(e,t,r)=>{r.r(t),r.d(t,{wframe:()=>u});var i=r(2981),a=r(1656),o=r(2085),s=r(1960),n=r(3082),c=r(7275),p=r(6615),u=function(e,t,r){p.s.call(this,e,t,r)};i.x.extend(u.prototype,p.s.prototype),u.prototype.defaultOptions={pluginType:"uiplugin.wframe",pluginName:"wframe",userEvents:["onload","onwframeload","onwframeunload","onbeforewframeunload"],useConfig:!0,src:"",tagname:"div",mode:"async",scope:!1,initScript:"",postScript:"",scopeVariable:"",cloneVariable:"",linkVariable:"",scopeFunction:"$w",scopeExternal:!1,scopeValue:"",isWidget:!1,params:"",popupParam:"",initStyle:!1,preload:!1,strictFrame:!1,processMsgFrame:!1,frameModal:!1,udc2Name:"",popupAutoClose:!1,msaName:""},u.prototype.initialize=function(e){this.options.mode="async",this.createFlag=!1,(e&&"w2:wframe"===e.getTagName()||!0===this.options.preload)&&(this.createFlag=!0),this.frameDoc=null,this.wframeScript=[],this.lazyImportsArr=[],this.childAllControlList=[],this.userComponentList=[],this.userPluginList=[],this.scope={},this.scopeLazyList=[],this.scopeVariable={};var t=this.options.pluginName;"true"===this.options.initScript&&"true"===a.v.getConfiguration("/WebSquare/"+t+"/initScript/@value")&&(this.options.initScript=a.v.getConfigurationJSON("/WebSquare/"+t+"/initScript",{type:"json"}),this.options.initScript["#cdata"]&&(this.options.initScript=this.options.initScript["#cdata"],"function"==typeof this.options.initScript&&(this.options.initScript="("+this.options.initScript.toString()+")()"))),"true"===this.options.postScript&&"true"===a.v.getConfiguration("/WebSquare/"+t+"/postScript/@value")&&(this.options.postScript=a.v.getConfigurationJSON("/WebSquare/"+t+"/postScript",{type:"json"}),this.options.postScript["#cdata"]&&(this.options.postScript=this.options.postScript["#cdata"],"function"==typeof this.options.postScript&&(this.options.postScript="("+this.options.postScript.toString()+")()"))),this.options.scope&&(""==this.options.scopeVariable&&(this.options.scopeVariable=a.v.getConfiguration("/WebSquare/spa/variable/@value")||""),""==this.options.cloneVariable&&(this.options.cloneVariable=a.v.getConfiguration("/WebSquare/spa/variable/@clone")||""),""==this.options.linkVariable&&(this.options.linkVariable=a.v.getConfiguration("/WebSquare/spa/variable/@link")||""),this.options.initScript&&(this.options.initScript=n.D.scopingFuncBody(this.options.initScript,this.id,!0)),this.options.postScript&&(this.options.postScript=n.D.scopingFuncBody(this.options.postScript,this.id,!0))),this.makeScopeVariable(),this.options.params&&this.parseParameter(),this.options.dataObject&&this.setDataObject(this.options.dataObject),this._isWframePopup=!1,this._scriptLazy=!1,this._clearExecuteStatus(),this._processMsgComp=null,this._processMsgModal=null,this._processMsgQueue=[],this._wframePopupModal=null,this._wframeModelStack=[],this._processMsgAjaxCnt=0,this.udc2Parent=null,this._isUDC2=!1,this._bSkipAsync=!1,this._pCount=0,this._onsetSrc=!1,this._onsetSrcAfter=null,this._pageCommonArr=[],this._cssCacheArr=[]},u.prototype.toHTML=function(){try{var e={footer:"div",header:"div",nav:"div",section:"div"},t=[],r=this.options.tagname,i=""==this.options.style?"":"style='"+this.options.style+"'",s=""==this.options.tabIndex?"":"tabIndex='"+this.options.tabIndex+"'";if(a.v.browserCheck.ie){var n=a.v.browserVersion();"6"!=n&&"7"!=n&&"8"!=n||e[r]&&(r=e[r])}if(t.push("<"+r+" id='"+this.id+"' "+i+" class='w2wframe "+this.options.className+"' "+s+">"),this.createFlag)for(var c=this.getChildren(),p=0;p<c.length;p++)t.push(c[p].toHTML());return t.push("</"+r+">"),t.join("")}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.setChildAction=function(e){try{e=e||{};var t=this.childControlList[0];if(!t)return;this._markStart2(),!0!==(e&&!0===e.skipPreActivate)&&"stop"===t.activeStatus&&t.preActivate();var r=[];for(var i in WebSquare.DataCollection.activated=!0,WebSquare.DataCollection.comp){
var n=WebSquare.DataCollection.comp[i];n&&n.parentFrame===this.uuid&&(n.activate(),r.push(n.uuid))}WebSquare.uiplugin.wframe._increasePendingWframeCount(),WebSquare.uiplugin.wframe._addWframePreorder(this.uuid),t.activate(),WebSquare.uiplugin.wframe._decreasePendingWframeCount(),WebSquare.uiplugin.wframe._addWframePostorder(this.uuid),t.render=null,t.onComplete();for(var c=0;c<r.length;c++)WebSquare.idCache[r[c]].completed||WebSquare.idCache[r[c]].onComplete();var p=this.getSrc(),u=!0===this._scriptLazy&&!0!==a.v.scriptPrecedence&&"preExecuted"===WebSquare.scriptSectionExcuteFlag;if("executed"===WebSquare.scriptSectionExcuteFlag||u){if(!0===a.v.scriptPrecedence)WebSquare.uiplugin.wframe._execute("script"),e._isProcessMsgFrame?WebSquare.uiplugin.wframe._execute("onpageload",e):WebSquare.uiplugin.wframe._execute("onpageload"),WebSquare.uiplugin.wframe._execute("postscript",{order:"postorder"}),WebSquare.uiplugin.wframe._execute("onwframeload");else{var l=e&&!0===e.preExecuted,h=!0===this._scriptLazy&&this.parentControl&&this.parentControl.parentControl&&this.parentControl.parentControl.options&&"wframe"===this.parentControl.parentControl.options.pluginName,d={order:"postorder",reverse:!0};if(u&&(d.preExecuted=!0),h||!0===this.options.preload||!0===l)WebSquare.uiplugin.wframe._execute("script",d),WebSquare.uiplugin.wframe._execute("onpageload",{order:"postorder"});else{if(this.frameDoc&&"string"==typeof this.frameDoc.scriptSection&&this.frameDoc.scriptSection){var m=WebSquare.scriptIdentifier+this.getURL(this.getSrc())+'";';m+=this.frameDoc.scriptSection,WebSquare.BootLoader.globalEval(m),this.frameDoc.scriptSection=""}for(c=0;c<this.childControlList.length;c++)s.B.fireEvent(this.childControlList[c],"onpageload",p);this._executeStatus.onpageload=!0}}WebSquare.uiplugin.wframe._execute("lazyscript"),WebSquare.uiplugin.wframe._isPending()||WebSquare.uiplugin.wframe._clearPending()}else if(!0!==a.v.scriptPrecedence){var f=e&&!0===e.preExecuted&&"preExecuted"===WebSquare.scriptSectionExcuteFlag;f&&WebSquare.uiplugin.wframe._execute("script",{order:"postorder",reverse:!0,preExecuted:!0});for(c=0;c<this.childControlList.length;c++)s.B.fireEvent(this.childControlList[c],"onpageload",p);f&&(WebSquare.uiplugin.wframe._execute("lazyscript"),WebSquare.uiplugin.wframe._isPending()||WebSquare.uiplugin.wframe._clearPending())}s.B.fireEvent(t,"onwframeload",p),s.B.fireEvent(t,"oncreated",t.options),s.B.fireEvent(this,"onload",p),!0!==a.v.scriptPrecedence&&s.B.fireEvent(this,"onwframeload",p),this._markEnd2()}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.setAction=function(){try{if(this.options.initStyle){var e=document.getElementById(this.id).style.cssText,t=document.getElementById(this.id).getAttribute("class");WebSquare.initStyle[this.id]={style:e,className:t}}if(this.options.isWidget)return;if(this.createFlag){var r;if(this._isProcessMsgFrame&&(r={_isProcessMsgFrame:!0,_processMsgCompId:this.uuid}),("preExecuted"===WebSquare.scriptSectionExcuteFlag||"executed"===WebSquare.scriptSectionExcuteFlag)&&WebSquare.externalScriptArr&&WebSquare.externalScriptArr.length>0){if("sync"!==this.options.mode){var i=this.uuid;return WebSquare.externalScriptArr.push((function(){try{var e,t=WebSquare.idCache[i];t._isProcessMsgFrame&&(e={_isProcessMsgFrame:!0,_processMsgCompId:t.uuid}),t.setChildAction(e)}catch(e){o.w.printStackTrace(e)}})),n.D.js.apply(null,WebSquare.externalScriptArr),void(WebSquare.externalScriptArr=[])}for(var s=0;s<WebSquare.externalScriptArr.length;s++)WebSquare.BootLoader.globalEval(a.v.load(WebSquare.externalScriptArr[s]));WebSquare.externalScriptArr=[]}this.setChildAction(r)}else{var c;this._dataObject&&(c={dataObject:this._dataObject}),this.setSrc(this.options.src,c)}}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.setSrc=async function(e,t){try{t=t||{};var r=this.getSrc();if(!e||""==e)return!1;if(this.options.src=e,e=this.getSrc(),this._bSkipAsync=!0,"active"!==this.activeStatus&&!this.createFlag)return
;if(this._markStart(),!0===this._onsetSrc)return void(this._onsetSrcAfter=[e,t]);this._onsetSrc=!0;var i=await WebSquare.jsLoader._loadObj(this.getURL(e,t),{msaName:t.msaName||this._getMsaName()});if(i){for(var c=0;c<this.childControlList.length;c++)s.B.fireEvent(this.childControlList[c],"onwframeunload",r);var p;if(n.D.emptySelection(),t.removeAll&&(t.appendModel="replace"),"replace"==t.appendModel)this.removeFrame_old();else(""==r||!r||r===e&&!0===t.reload)&&(t.reload=!1,p={keepDataObject:!0}),this.finalize(r,p);"object"==typeof t.dataObject&&this.setDataObject(t.dataObject),this.makeScopeVariable();var u=WebSquare.jsLoader.getPageType(e);this.frameDoc=WebSquare.jsLoader.getPageInfo(i,u),this.frameDoc.renderStartTime=new Date,this.makeParameter(),await this.frameDoc.parsingUDC(!0,this),await this.frameDoc.parsingWFrame(!0,this),null==t.appendModel&&(this.options.scope?t.appendModel="scope":t.appendModel=!0),this.appendModels(this.frameDoc.models,null,t);var l=WebSquare.uiplugin.wframe._clearPending({keepStatus:!0});await this.renderBody(!0),"executed"===WebSquare.scriptSectionExcuteFlag||!0!==a.v.scriptPrecedence&&"preExecuted"===WebSquare.scriptSectionExcuteFlag||(l.pendingWframePreOrderList=l.pendingWframePreOrderList.concat(WebSquare.uiplugin.wframe.__pendingWframePreOrderList),l.pendingWframePostOrderList=WebSquare.uiplugin.wframe.__pendingWframePostOrderList.concat(l.pendingWframePostOrderList)),WebSquare.uiplugin.wframe._setPending(l)}if(this._onsetSrc=!1,this._onsetSrcAfter){var h=this._onsetSrcAfter[0],d=this._onsetSrcAfter[1];return this._onsetSrcAfter=null,await this.setSrc(h,d)}return!!i}catch(e){return o.w.printStackTrace(e,null,this),this._onsetSrc=!1,this._onsetSrcAfter=null,!1}},u.prototype.msaLoad=async function(e,t,r,i){try{return(r=r||{}).msaName=t||this._getMsaName(),this.options.msaName=r.msaName,await this.setSrc(e,r)}catch(e){return o.w.printStackTrace(e,null,this),!1}},u.prototype.makeFrame=async function(e,t){try{if(this.options.strictFrame)return;var r;this._markStart();var i,s="string"==typeof t&&null!=a.v.udcObj[t];if(s)r=a.v.udcObj[t];else{var n=this.getSrc();n&&(r=await WebSquare.jsLoader._loadObj(this.getURL(n),{msaName:this._getMsaName()}))}if(r)n&&(i=WebSquare.jsLoader.getPageType(n)),this.frameDoc=WebSquare.jsLoader.getPageInfo(r,i),this.frameDoc.renderStartTime=new Date,this.makeParameter(),await this.frameDoc.parsingUDC(!0,this),await this.frameDoc.parsingWFrame(!0,this,void 0,s),this.appendModels(this.frameDoc.models,null,{appendModel:!this.options.scope||"scope"}),await this.renderBody(e)}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.initAsync=async function(){if(!0!==this._bSkipAsync)return await this.makeFrame()},u.prototype.makeFrameUDC2=async function(e){try{this.udc2Parent=e,await this.makeFrame(null,this.options.udc2Name),this._udc2Mapping()}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.makeFrameSync=function(e,t,r){try{if(this.options.strictFrame)return;var i;this._markStart();var s,n="string"==typeof t&&null!=a.v.udcObj[t];if(n)i=a.v.udcObj[t];else if(t&&t.constructor===WebSquare.pageInfo)i=t.getPageInfo();else{var c=this.getSrc();c&&(i=WebSquare.jsLoader._loadObj(this.getURL(c),{msaName:this._getMsaName()}))}if(i)c&&(s=WebSquare.jsLoader.getPageType(c)),this.frameDoc=WebSquare.jsLoader.getPageInfo(i,s),this.frameDoc.renderStartTime=new Date,this.makeParameter(),this.frameDoc.parsingUDC(!0,this),n?this.frameDoc.parsingUDC2Sync(!0,this):this.frameDoc.parsingWFrame(!0,this,!0),this.appendModels(this.frameDoc.models,null,{appendModel:!this.options.scope||"scope"}),this.renderBody(e,r)}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.makeFrameUDC2Sync=function(e,t,r){try{this.udc2Parent=e,this.makeFrameSync(t,this.options.udc2Name,r),this._udc2Mapping()}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.getSrc=function(){try{return this._getMsaSrc()}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype._getMsaSrc=function(e){try{e=e||{}
;var t=this.options.src;if(""==t)return"";var r=a.v.getPageURL(t,{skipURL:!0,skipUri:!0,msaName:e.msaName||this._getMsaName()});if(!0===e.msaSrc)"string"!=typeof r||r.startsWith("/")||r.startsWith("\\")||r.indexOf("://")>=0||(r=this._getMsaHome()+r);return r}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.getMsaSrc=function(e,t){try{return(t=t||{}).msaSrc=!0,e&&(t.msaName=e),this._getMsaSrc(t)}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype._getMsaName=function(){try{if(this.options.msaName)return this.options.msaName;if(this.scope_obj)return this.scope_obj._getMsaName()}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype._getMsaHome=function(){try{var e=this.options.src;if("string"!=typeof e)return"/";if(this.options.msaName){var t=e.lastIndexOf("/");return t>=0?e.slice(0,t)+"/":"/"}if(this.scope_obj)return this.scope_obj._getMsaHome()}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.appendModels=function(e,t,r){try{if("replace"==(r=r||{}).appendModel)return void this.replaceModels(e);if("scope"==r.appendModel)return void this.scopeModels(e,t,r);var i=WebSquare.ModelUtil.getModelByID(t);if(i)for(var a=0;a<e.length;a++){if(r.appendModel)for(var s=i.instances[0].document,n=e[a].instances[0].document.childNodes,c=0;c<n.length;c++)s.appendChild(n[c].cloneNode(!0));i.binds=i.binds.concat(e[a].binds);for(var p=0;p<e[a].submissions.length;p++){var u=e[a].submissions[p];u.parentElement=i.element,i.submissions.push(u)}for(var l=0;l<e[a].workflows.length;l++){var h=e[a].workflows[l];h.parentElement=i.element,i.workflows.push(h)}}}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.replaceModels=function(e){try{WebSquare.WebSquaredoc.models.splice(0,WebSquare.WebSquaredoc.models.length),WebSquare.WebSquaredoc.models=WebSquare.WebSquaredoc.models.concat(e)}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.scopeModels=function(e,t,r){try{var i=WebSquare.ModelUtil.getModelByID(t);if(i&&"scope"==r.appendModel)for(var a=0;a<e.length;a++){if(e[a].instances&&e[a].instances.length>0){var s;i.instances&&i.instances.length>0&&(s=i.instances[0].xmlNode.parentNode);for(var n=e[a].instances,c=0,p=n.length;c<p;c++){for(var u=n[c].xmlNode.cloneNode(!0),l=u.firstChild;null!=l&&1!=l.nodeType;l=l.nextSibling);var h=new WebSquare.Model.Instance(u,l,null);h.scope_id=this.id;var d=h.xmlNode;d.setAttribute("scopeId",this.id),i.instances.push(h),s&&s.appendChild(d)}}i.binds=i.binds.concat(e[a].binds);for(var m=0;m<e[a].submissions.length;m++){var f=e[a].submissions[m];f.parentElement=i.element,i.submissions.push(f)}for(var S=0;S<e[a].workflows.length;S++){var g=e[a].workflows[S];g.parentElement=i.element,i.workflows.push(g)}}}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.remove=function(){try{if(!0===this._removed)return;if(this.options.strictFrame){for(var e in window[this.id]&&(window[this.id]=null),this)delete this[e];return}for(var t in this.finalize(),this.activeStatus="finalize",null!=this.render&&WebSquare.removeNode(this.render),this.parentControl&&this.parentControl.removeControl(this),WebSquare.getBody().childControlList)WebSquare.getBody().childControlList[t]==this&&WebSquare.getBody().childControlList.splice(t,1);this.destroy(),n.D.emptySelection()}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.finalize=function(e,t){try{var r=new Date;if(!0!==a.v.scriptPrecedence)for(var i=0;i<this.childControlList.length;i++)s.B.fireEvent(this.childControlList[i],"onpageunload");for(i=0;i<this.childControlList.length;i++)s.B.fireEvent(this.childControlList[i],"onbeforepageunload");var p=e||this.getSrc(),u=this.options.pluginName.toLowerCase();if(s.B.fireEvent(this,"onbefore"+u+"unload",p),this.popupList){i=0;for(var l=this.popupList.length;i<l;i++){var h=this.popupList[i];if(h){var d=WebSquare.getBody();if(this._parentFrameUUID)d=WebSquare.idCache[this._parentFrameUUID];var m=h.id;if(d){if(null!=d.stackComponents)for(var f in d.stackComponents){var S=d.stackComponents[f]
;if(m)for(var g=d.stackComponents[f].length-1;g>=0;g--)if(S[g].id===m){S.splice(g,1),d.modalStack.pop();break}}d.modalStack.pop()}h.close(),WebSquare.uiplugin.popup.removeFromPopupList(m)}}}this.hideProcessMessage(),null!=this._processMsgComp&&(this._processMsgComp.remove(),this._processMsgComp=null),null!=this._processMsgModal&&(this._processMsgModal.remove(),this._processMsgModal=null),null!=this._wframePopupModal&&(this._wframePopupModal.remove(),this._wframePopupModal=null);for(var b=[];this.childAllControlList.length>0;){var _;if(_=!0===a.v.scriptPrecedence?this.childAllControlList.shift():this.childAllControlList.pop(),(D=WebSquare.idCache[_])&&(!0!==D._isWframePopup||!0===this.options.popupAutoClose||this.options.frameModal))if(null==WebSquare.DataCollection.comp[D.id]){WebSquare.isPrintLog=!1,"function"==typeof D.finalize&&D.finalize(),WebSquare.isPrintLog=!0,"function"==typeof D.unbind&&D.unbind(),D.event&&D.event.clearCache(),D.modelControl&&(D.modelControl.unbindRef(),D.modelControl.unbindItemset()),WebSquare.getBody().getLayerListener().remove(D.id),D.childControlList=[];if(D.options){var y={secret:"input",selectbox:"select1",radio:"select1",multiselect:"select",checkbox:"select",checkcombobox:"select",switch:"Switch"}[D.options.pluginName]||D.options.pluginName;delete(WebSquare.componentsCache[y]||WebSquare.componentsCache[D._wTagName]||{})[D.uuid],a.v.memoryLeakComponent[y]&&(a.v.memoryLeakComponentCount+=a.v.memoryLeakComponent[y])}if(window[WebSquare.noConflict].comp[D.id]=null,delete window[WebSquare.noConflict].comp[D.id],window[WebSquare.noConflict].data[D.id]=null,delete window[WebSquare.noConflict].data[D.id],window[D.id])try{window[D.id]=null,(!n.D.isIE()||parseInt(a.v.browserVersion(),10)>8)&&delete window[D.id]}catch(e){window[D.id]=null}if(null!=D.render){if(D._closed&&D.frame&&D._isWframePopup){var w=D.frame.paramObj.popupID;w&&WebSquare.uiplugin.popup.removeFromPopupList(w);var v=D._targetFrameObjUUID,W=WebSquare.strictModeFrame?WebSquare.strictModeFrame.uuid:"";if(D.options.frameModal&&v&&v!==W){var q=WebSquare.idCache[v];q&&q.hideFrameModal(w)}}WebSquare.removeNode(D.render)}WebSquare.idToUUID[D.id]=null,delete WebSquare.idToUUID[D.id];for(var C=Object.keys(D),k=C.length,M=0;M<k;M++)try{"function"==typeof D[C[M]]?D[C[M]]=a.v._emptyFunction:delete D[C[M]]}catch(e){delete D[C[M]]}if(null!=window.Proxy&&"function"==typeof Object.setPrototypeOf&&"function"==typeof Object.getPrototypeOf){var P=Object.getPrototypeOf(D),T=new window.Proxy(P,{get:function(e,t,r){return function(){}}});Object.setPrototypeOf(D,T)}else{for(var f in{setValue:!0,setDisabled:!0,setLabel:!0,toHTML:!0,setAction:!0,remove:!0,finalize:!0})"function"==typeof D[f]&&(D[f]=a.v._emptyFunction)}D._removed=!0,D=null,WebSquare.idCache[_]=null,delete WebSquare.idCache[_]}else b.push(_)}for(i=b.length-1;i>=0;i--){var D;null!=(D=WebSquare.idCache[b[i]])&&WebSquare.DataCollection.api.remove(D.id,{uuid:D.uuid})}this.childAllControlList=[];for(i=0;i<this.childControlList.length;i++){var L=this.childControlList[i];for(!0===a.v.scriptPrecedence&&s.B.fireEvent(L,"onpageunload");L.childControlList&&L.childControlList.length>0;){var j=L.childControlList.pop();null!=j.uuid&&j.remove()}L.render=null,L.remove()}for(var x in this.childControlList=[],this.scopeVariable)null!=window[this.id+"_"+x]&&(window[this.id+"_"+x]=null,!n.D.isIE()||parseInt(a.v.browserVersion(),10)>8?delete window[this.id+"_"+x]:window[this.id+"_"+x]=null);this.scope={},this.scopeVariable={},this.scopeLazyList=[];for(i=0;i<this.userComponentList.length;i++)n.D.loadedUserComponent[this.userComponentList[i]]=null,delete n.D.loadedUserComponent[this.userComponentList[i]];this.userComponentList=[];for(i=0;i<this.userPluginList.length;i++)n.D.loadedUserComponentPluginName[this.userPluginList[i]]=null,delete n.D.loadedUserComponentPluginName[this.userPluginList[i]];this.userPluginList=[],null!=this.render&&WebSquare.removeChildren(this.render),this.removeCommon(t);var O=new Date
;c.k.printLog(this.options.pluginName+" unloading["+this.id+"]. Time:"+(O-r)+"ms");var F=null==e?this.getSrc():e;s.B.fireEvent(this,"on"+u+"unload",F),WebSquare.uiplugin.dateHelper&&null!=WebSquare.uiplugin.dateHelper._currentDate&&delete WebSquare.uiplugin.dateHelper._currentDate[this.id],this.wframeSubPopup&&(this.wframeSubPopup=[]),this.stackComponents={},this.modalStack=[]}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.removeFrame=function(){try{this.finalize()}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.removeFrame_old=function(){try{c.k.printLog("Wframe unloading start.["+this.id+"]");for(var e=0;e<this.childControlList.length;e++)s.B.fireEvent(this.childControlList[e],"onpageunload");WebSquare.DataCollection.stopBroadCast=!0,WebSquare.dragdrop2={droppable:{},scrollable:{},scrollByDragDelay:300,scrollByDragSpeed:50};var t=WebSquare.getBody();for(var r in WebSquare.idCache){var i=WebSquare.idCache[r];i!==t&&i!==this&&("function"!=typeof i.remove||i.remove==p.s.prototype.remove||i.options&&("wframe"==i.options.pluginName||"pageInherit"==i.options.pluginName)?(WebSquare.isPrintLog=!1,"function"==typeof i.finalize&&i.finalize(),WebSquare.isPrintLog=!0,"function"==typeof i.unbind&&i.unbind(),i.event&&i.event.clearCache(),WebSquare.useVisibleHelper&&i.render&&i.render.parentNode&&i!=WebSquare.body&&i.render.parentNode.removeChild(i.render),i.childControlList=[],window[i.id]&&(window[i.id]=null)):i.remove())}t.getLayerListener().removeAll(),WebSquare.idCache={},WebSquare.idCache[t.uuid]=t,WebSquare.idCache[this.uuid]=this,window[WebSquare.noConflict].comp={},window[WebSquare.noConflict].comp[this.id]=this,WebSquare.idToUUID={},WebSquare.idToUUID[t.id]=t.uuid,WebSquare.idToUUID[this.id]=this.uuid,WebSquare.WebSquaredoc.itemsetElement=[],WebSquare.WebSquaredoc.refElement=[],WebSquare.componentsCache={},WebSquare.componentsCache[t.options.pluginName]={},WebSquare.componentsCache[t.options.pluginName][t.uuid]=!0,WebSquare.componentsCache[this.options.pluginName]={},WebSquare.componentsCache[this.options.pluginName][this.uuid]=!0,this.childAllControlList=[],this.childControlList=[],this.scope={},this.scopeVariable={},this.userComponentList=[],this.userPluginList=[],null!=this.render&&WebSquare.removeChildren(this.render),this.removeCommon(),a.v.clearCommon(),WebSquare&&WebSquare.strictModeFrame&&(WebSquare.strictModeFrame.remove(),WebSquare.strictModeFrame=null),c.k.printLog("Wframe unloading finished.["+this.id+"]")}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.removeCommon=function(e){try{if(void 0!==e&&null!=e||(e={}),this.wframeScript=[],null!=this.frameDoc){for(;this.frameDoc.cssList.length>0;){var t=this.frameDoc.cssList.shift(),r=t&&t.href&&t.href.toString();r=r||"";var i=n.D._getAbsolutePath(r);WebSquare.skin._decreaseCache(i,t)}this.frameDoc.cssList=[];for(var s=0;s<this._cssCacheArr.length;s++){var c=this._cssCacheArr[s];WebSquare.skin._decreaseCache(c)}if(this.frameDoc.models&&this.frameDoc.models.length>0){var p=this.frameDoc.models[0].submissions,u=WebSquare.WebSquaredoc.models[0].submissions;for(s=0;s<p.length;s++){for(var l=0;l<WebSquare.layer.submissionIDQueue.length;l++)WebSquare.layer.submissionIDQueue[l]==p[s].id&&(WebSquare.layer.submissionIDQueue.splice(l,1),WebSquare.layer.submissionMessageQueue.splice(l,1));for(var h=0;h<u.length;h++)if(p[s].id===u[h].id&&p[s].ref===u[h].ref){u[h].dead=!0,a.v.useSubmissionGlobal&&(window[u[h].id]=null),u[h].parentElement=null,u.splice(h,1);break}}var d=this.frameDoc.models[0].workflows;for(u=WebSquare.WebSquaredoc.models[0].workflows,s=0;s<d.length;s++)for(h=0;h<u.length;h++)if(d[s].id===u[h].id&&d[s].ref===u[h].ref){u[h].promiseStatus="REJECT",a.v.useWorkflowGlobal&&(window[u[h].id]=null),u[h].parentElement=null,u.splice(h,1);break}}for(var m in this.frameDoc)this.frameDoc[m]=null,delete this.frameDoc[m]}!0!==e.keepDataObject&&this._removeDataObject(),this.frameDoc=null}catch(e){o.w.printStackTrace(e,null,this)}},
u.prototype.onPropertyChange=function(e,t){try{if("disabled"===e)for(var r=0;r<this.childControlList.length;r++){var i={componentId:this.childControlList[r].id,disabled:t};n.D.setDisabled(i)}}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.onComplete=function(){try{if(null!=this.frame_dc_list){for(var e=0;e<this.frame_dc_list.length;e++)WebSquare.idCache[this.frame_dc_list[e]].completed||WebSquare.idCache[this.frame_dc_list[e]].onComplete();delete this.frame_dc_list}p.s.prototype.onComplete.call(this)}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.getObj=function(e){try{return this.scope[e]}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.getObjList=function(){try{var e=[];for(var t in this.scope)e.push(t);return e}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.getWindow=function(){try{return this.options.scope?this.scope:window}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.makeScopeVariable=function(){try{var e=0;if(this.options.scope&&this.options.scopeVariable)for(var t=this.options.scopeVariable.split(","),r=0;r<t.length;r++){var i=t[r].wq_trim(),a=e>0?String(e):"";e++,this._makeScopeVariable(i,WebSquare.noConflictFunction+a)}if(this.options.scope&&this.options.cloneVariable)for(t=this.options.cloneVariable.split(","),r=0;r<t.length;r++){var s=t[r].wq_trim();a=e>0?String(e):"";e++,this._makeCloneVariable(s)}if(this.options.scope&&this.options.linkVariable)for(t=this.options.linkVariable.split(","),r=0;r<t.length;r++){var n=t[r].wq_trim();a=e>0?String(e):"";e++,this._makeLinkVariable(n)}}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype._makeScopeVariable=function(e,t,r){try{if(this.scopeVariable[e]={},this.scope[e]=this.scopeVariable[e],window[this.id+"_"+e]=this.scopeVariable[e],this.options.scopeFunction){this.scopeVariable[e][this.options.scopeFunction]=new WebSquare.uiplugin.wframe.scope(this.uuid);var a=this.scopeVariable[e][this.options.scopeFunction];for(var s in WebSquare.api)"data"!==s&&"comp"!==s&&null==a[s]&&(a[s]=WebSquare.api[s]);for(var n in a.data=new WebSquare.uiplugin.wframe.scope.data(this.id),a.model=new WebSquare.uiplugin.wframe.scope.model(this.id),a.bigDecimal=new WebSquare.uiplugin.wframe.scope.bigDecimal(this.id),a.bigDecimal._scopeId=this.id,a.id=this.id+"_",WebSquare.api.data)null==a.data[n]&&"function"==typeof WebSquare.api.data&&(a.data[n]=WebSquare.api.data[n]);this.options.scopeFunction!==WebSquare.noConflict&&null!=window[e]&&null==window[e][this.options.scopeFunction]&&i.x.extend(window[e][this.options.scopeFunction],WebSquare.api),t&&(this.scope[t]=this.scopeVariable[e][this.options.scopeFunction])}}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype._makeCloneVariable=function(e){try{this.scopeVariable[e]={},"object"==typeof window[e]&&null!=window[e]&&(this._isUDC2,this.scopeVariable[e]=a.v._copyCommon(e,this)),this.scope[e]=this.scopeVariable[e],window[this.id+"_"+e]=this.scopeVariable[e]}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype._makeLinkVariable=function(e){try{if("object"!=typeof window[e]||null==window[e])return;this.scopeVariable[e]=WebSquare.jsonUtil.cloneNode(window[e],!0,[],[],0,!0),this.scope[e]=this.scopeVariable[e],window[this.id+"_"+e]=this.scopeVariable[e]}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.makeLazyScopeVariable=function(){try{if(this.options.scope&&this.options.scopeVariable){var e=this.options.scopeVariable;this.options.cloneVariable&&(e+=","+this.options.cloneVariable);for(var t=e.split(","),r=0;r<t.length;r++)for(var i=t[r].wq_trim(),a=r>0?String(r):"",s=WebSquare.noConflictFunction+a,n=0;n<this.scopeLazyList.length;n++)WebSquare.idCache[this.scopeLazyList[n]].scope[i]=this.scopeVariable[i],WebSquare.idCache[this.scopeLazyList[n]].scope[s]=this.scopeVariable[i][this.options.scopeFunction]}}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype._addScopeVariable=function(e){try{if(this.options.scope&&this.options.scopeVariable){var t=this.options.scopeVariable
;this.options.cloneVariable&&(t+=","+this.options.cloneVariable);for(var r=t.split(","),i=0;i<r.length;i++){var a=r[i].wq_trim(),s=i>0?String(i):"",n=WebSquare.noConflictFunction+s;WebSquare.idCache[e].scope[a]=this.scopeVariable[a],WebSquare.idCache[e].scope[n]=this.scopeVariable[a][this.options.scopeFunction]}}}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype._udc2Mapping=function(){try{var e=this.udc2Parent;if(!e)return;var t={};for(var r in e._reservedName)for(var i=0;i<e._reservedName[r].length;i++)t[e._reservedName[r][i]]=!0;var s=this.options.cloneVariable.split(","),n={};for(i=0;i<s.length;i++)n[s[i]]=!0;var c,p=WebSquare.Elem.api.getElementsByTagName(this.frameDoc.getPageInfo(),"publicInfo",a.v._XML_NAMESPACE.W2)[0];if(p){var u=WebSquare.Parser.parseAttribute(p);for(var r in c={method:{},submission:{},component:{}},u){var l=u[r].split(",");for(i=0;i<l.length;i++)c[r][l[i].wq_trim()]=!0}}for(var r in this.scopeVariable)if(!0!==n[r]){var h=this.scopeVariable[r];for(var d in h)d!==this.options.scopeFunction&&!0!==t[d]&&(c&&!0!==c.method[r+"."+d]||(e[d]=h[d]))}for(var r in this.scope){var m=this.scope[r];null!=m&&(c?(!0===c.component[r]&&m.uuid&&WebSquare.idCache[m.uuid]===m&&m.id!==m.uuid&&m.org_id!==m.uuid||!0===c.submission[r]&&"submission"===m._pluginName)&&(e[r]=m):e[r]=m)}}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.setMode=function(e){try{this.options.mode=e}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.start=function(e){},u.prototype.renderBody=async function(e,t){var r,i,o=[],s=this.frameDoc.getType();if("json"===s?(o=WebSquare.jsonUtil.getNodesByTagName(this.frameDoc.getPageInfo(),"body"),r=WebSquare.jsonUtil.getAttribute(o[0],"class")):(o=WebSquare.xml.getElementsByTagName(this.frameDoc.getPageInfo(),"body",a.v._XML_NAMESPACE.XHTML),r=o[0].getAttribute("class")),r){var n=this;this.render||"function"!=typeof requestAnimationFrame?this.addClass(r):requestAnimationFrame((function(){n.addClass(r)}))}return WebSquare.cssManager.startCache(),i="json"===s?WebSquare.controlFactory.createByJSON(null,null,o[0],this.options.scope?this:null,this.uuid):WebSquare.controlFactory.create(null,null,o[0],this.options.scope?this:null,this.uuid),WebSquare.cssManager.endCache(),!0!==t&&await WebSquare.controlFactory.initAsync(),this.childControlList.push(i),this.render&&(i.domStatus="new"),i&&(i.parentControl=this,i.options&&i.options.firstTabID&&!this.options.firstTabID&&(this.options.firstTabID=i.options.firstTabID)),this.options.scope&&(this.makeScope(this),this.makeLazyScopeVariable()),this._pageCommonArr.length>0&&(!0===t?this._parsePageCommons():await this._parsePageCommons()),i&&e?this._lazyActivation():!0===WebSquare._async&&(a.v.executePointScript(4),this._markEnd()),!!i},u.prototype.lazyActivation=function(){try{if(!this.render)return;var e=this.childControlList[0];this.render.innerHTML=e.toHTML(),"sync"===this.options.mode?(this._markEnd(),this.setChildAction({preExecuted:!0})):(e.preActivate(),this._markEnd(),n.D.setTimeout(this.setChildAction,{key:this.id+"_setChildAction",caller:this,delay:1,args:[{preExecuted:!0,skipPreActivate:!0}]}))}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype._lazyActivation=function(){try{if(a.v.executePointScript(4),WebSquare.externalScriptArr.length>0)if("sync"!==this.options.mode){var e=this.uuid;WebSquare.externalScriptArr.push((function(){try{WebSquare.idCache[e].lazyActivation()}catch(e){o.w.printStackTrace(e)}})),n.D.js.apply(null,WebSquare.externalScriptArr)}else{for(var t=0;t<WebSquare.externalScriptArr.length;t++)WebSquare.BootLoader.globalEval(a.v.load(WebSquare.externalScriptArr[t]));this.lazyActivation()}else this.lazyActivation();WebSquare.externalScriptArr=[]}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.parseParameter=function(){try{if(!this.options.params||"string"!=typeof this.options.params)return;for(var e in this.paramObj=JSON.parse(this.options.params),this.paramObj){
var t=this.paramObj[e].charAt(0),r=this.paramObj[e].slice(1);switch(t){case"j":case"a":this.paramObj[e]=JSON.parse(r);break;case"x":this.paramObj[e]=WebSquare.xml.parse(r);break;default:this.paramObj[e]=r}}}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.makeParameter=function(){try{if("object"!=typeof this.paramObj&&(this.paramObj={}),this.options.isWidget){var e=this.parentControl.getParams();"object"==typeof e&&(this.paramObj.params=e)}var t=this.getSrc();if(!t)return;for(var r=t.substring(t.indexOf("?")+1).split("&"),i=0;i<r.length;i++){2==(a=r[i].split("=")).length&&(this.paramObj[a[0].wq_trim()]=a[1].wq_trim())}if(location.hash.length>0)for(r=t.substring(t.indexOf("#")+1).split(/[\&\?\#]/),i=0;i<r.length;i++){var a;2==(a=r[i].split("=")).length&&(this.paramObj[a[0].wq_trim()]=a[1].wq_trim())}}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.setDataObject=function(e){try{if("string"==typeof e&&(e=JSON.parse(e)),null==e||"string"!=typeof e.name||0===e.name.length)return;var t=e.type||"string";t=t.toLowerCase();var r,i=e.data,a=e.name;switch(t){case"string":r=i;break;case"json":r="string"==typeof i?JSON.parse(i):n.D.cloneObject(i,{scope:this.scope_id,skipFunction:!0});break;case"xml":r="string"==typeof i?WebSquare.xml.parse(i):WebSquare.xml.parse(WebSquare.xml.serialize(i));break;case"array":r="string"==typeof i?JSON.parse(i):i.slice(0)}this._dataObject={type:t,name:a,data:r}}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype._getDataObject=function(e){try{var t;return this._dataObject&&"string"==typeof this._dataObject.name&&this._dataObject.name.length>0&&this._dataObject.data&&(t=null==e?this._dataObject:this._dataObject[e]),t}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype._removeDataObject=function(){try{this._dataObject&&(delete this._dataObject.data,this._dataObject=null,delete this._dataObject)}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.setFirstTabID=function(e){try{if(null!=e&&e!==this.options.firstTabID&&null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID){var t=WebSquare.tabOrder[this.id].preTabID,r=WebSquare.tabOrder[t].nextTabID,i=n.D.getComponentById(e,this.id).id,a=WebSquare.tabOrder[t].nextTabID;WebSquare.tabOrder[t].nextTabID=i,WebSquare.tabOrder[i]={},WebSquare.tabOrder[i].preTabID=t,a!==this.id&&delete WebSquare.tabOrder[r],this.options.firstTabID=e}}catch(e){o.w.printStackTrace(e)}},u.prototype.getParentFrame=function(){try{return this.scope_obj&&WebSquare.idCache[this.scope_obj.uuid]===this.scope_obj?this.scope_obj:null}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype._getRenderedParentFrame=function(){try{return this.scope_obj&&WebSquare.strictModeFrame.id!==this.scope_obj.id&&WebSquare.idCache[this.scope_obj.uuid]===this.scope_obj?this.scope_obj:null}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.reload=function(e){try{var t;if(this.options.strictFrame)n.D.reinitialize(e);else this._dataObject&&(t={dataObject:this._dataObject,reload:!0}),this.setSrc(this.options.src,t)}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype._clearExecuteStatus=function(){try{this._executeStatus={script:!1,onpageload:!1,postscript:!1,lazyscript:!1,onwframeload:!1}}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype._getVersion=function(){try{var e=this.options.pluginName,t=a.v.getConfiguration("/WebSquare/"+e+"/version/@value");return t||(t=WebSquare.strictMode?3:"sync"===this.options.mode?2:1),Number(t)}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.getURL=function(e,t){try{if(void 0!==t&&null!=t||(t={}),"string"!=typeof e||e.indexOf("://")>-1||!0===t.skipFullUrl)return e;if(this.options.msaName&&(t.msaName=this.options.msaName),t.msaName)return a.v.getURL(e,t);var r=this._getMsaName();if(r)return e=this.getMsaSrc(e),t.msaName=r,a.v.getURL(e,t);var i="",s=this.getParentFrame();if(s){var n,c=s.getSrc(),p=c.indexOf("://")
;if(p>=0)i=(n=e.startsWith("/")||e.startsWith("\\")?c.indexOf("/",p+3):c.lastIndexOf("/"))>0?c.slice(0,n)+"/":c.slice(0)+"/"}return i?i+e:a.v.getURL(e,{tempHome:this.getUdcRoot()})}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.showProcessMessage=async function(e,t){try{return u._showProcessMessage(this,e,t)}catch(e){o.w.printStackTrace(e,null,this),this.hideProcessMessage()}},u.prototype.hideProcessMessage=function(){try{return u._hideProcessMessage(this)}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype._handleProcessEvent=function(e){try{s.B.stopEvent(e)}catch(e){o.w.printStackTrace(e,null,this),this.hideProcessMessage()}},u.prototype.addSubmissionMessage=async function(e,t){try{await this.showProcessMessage(t,{submissionId:e})}catch(e){o.w.printStackTrace(e,null,this),this.hideProcessMessage()}},u.prototype.deleteSubmissionMessage=function(e){try{return this._deleteSubmissionMessage(e)}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype._deleteSubmissionMessage=function(e){try{for(var t=this._processMsgQueue.length-1;t>=0;t--)if(this._processMsgQueue[t].id==e){if(null!=this._processMsgComp&&"promise"!=this._processMsgComp&&t>0){var r=this._processMsgComp.getObj("text_msg");r&&r.setValue(this._processMsgQueue[t-1].msg)}this._processMsgQueue.splice(t,1)}if(e){var i=WebSquare.ModelUtil.getSubmission(e);0===this._processMsgQueue.length&&i&&!1!==i.hideProcessMsg?this.hideProcessMessage():this._processMessageShowCnt>0&&this._processMessageShowCnt--}}catch(e){o.w.printStackTrace(e,null,this),this.hideProcessMessage()}},u.prototype.deleteAjaxMessage=function(){try{this._processMsgAjaxCnt--,this._processMsgAjaxCnt<=0&&this.hideProcessMessage()}catch(e){o.w.printStackTrace(e,null,this),this.hideProcessMessage()}},u.prototype.showFrameModal=function(e){try{var t=e.className||"",r=(e.popupComponents,e.stackComponents||void 0),i=e.popupModal||!1;null==this.modalStack&&(this.modalStack=[]);var a=WebSquare.style.getStyle(this.render,"position");if(null==this._wframePopupModal){var s=WebSquare.controlFactory.create(this.id+"_wq_frameModal",{className:"w2_wframe_modal",pluginName:"group",parseChild:!1},null,this,this,!0);s.writeTo(this),s.activate(),s.render.style.width="100%",s.render.style.height="100%",this.addControl(s),this._wframePopupModal=s}else"static"!=a&&(this._wframePopupModal.render.style.height=this.render.offsetlHeight+"px",this._wframePopupModal.render.style.width=this.render.offsetWidth+"px");if("static"==(a=WebSquare.style.getStyle(this.render,"position"))){var c=this.render.offsetLeft,p=this.render.offsetTop;this._wframePopupModal.render.style.height=this.render.offsetHeight+"px",this._wframePopupModal.render.style.width=this.render.offsetWidth+"px",this._wframePopupModal.setPosition(c,p)}if(t?(this.modalStack[this.modalStack.length]=t,!0===i&&(this._wframePopupModal.className=t)):(this.modalStack[this.modalStack.length]="w2modal",!0===i&&(this._wframePopupModal.className="w2modal")),r)for(var u in null==this.stackComponents&&(this.stackComponents={}),r)if(null==this.stackComponents[u])this.stackComponents[u]=[r[u]];else{var l=this.stackComponents[u].length-1;if(l>=0)for(var h=l;h>=0;h--){var d=WebSquare.idCache[this.stackComponents[u][h].id];if(!d&&this.stackComponents[u][h].id){var m=n.D.getPopup(this.stackComponents[u][h].id);m&&(d=m.popupWin)}if(d&&d.render&&!0===i){var f=parseInt(d.getStyleProperty("z-index"),10),S=parseInt(n.D.getStyleProperty(this._wframePopupModal.render,"z-index"),10)-1;if(f==S)break;d.zIndex=f,d.setStyle("z-index",S)}}this.stackComponents[u].push(r[u])}!0===i&&(this._renderScrollLeft=this.render.scrollLeft,this._renderScrollTop=this.render.scrollTop,this._wframePopupModal.show(),n.D.isMobile()||this.addClass("w2modalopened_wframepopup"))}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.hideFrameModal=function(e){try{if(null!=this._wframePopupModal){var t=!1,r=!1;if(null!=this.stackComponents)for(var i in this.stackComponents){var a=this.stackComponents[i];if(e){
for(var s=this.stackComponents[i].length-1;s>=0;s--)if(a[s].id===e){a.splice(s,1),r=!0;break}}else a.pop(),r=!0;for(s=a.length-1;s>=0;s--){0!=s||0!==a.length&&!1!==a[s].modal||(t=!0);var c=WebSquare.idCache[a[s].id];if(c||(c=n.D.getComponentById(a[s].id)),c&&c.render){var p=c.zIndex;isNaN(p)&&(p=""),c.zIndex=void 0;var u=WebSquare.getBody();u.modal&&"block"===u.modal.style.display?(c.zIndex=n.D.getStyleProperty(u.modal,"z-index")-2,c.setStyle("z-index",c.zIndex)):c.setStyle("z-index",p)}if("popup"!=i||!0===a[s].modal)break}}if(r&&this.modalStack.pop(),0==this.modalStack.length||!0===t){var l=this._modal;this._modal=!1,0==this.modalStack.length&&null!=this._wframePopupModal?(this._wframePopupModal.remove(),this._wframePopupModal=null):!0===t&&this._wframePopupModal.hide(),this.render.scrollLeft=this._renderScrollLeft,this.render.scrollTop=this._renderScrollTop,this._renderScrollLeft=this._renderScrollTop=0,l&&this.removeClass("w2modalopened_wframepopup")}else{var h=this.modalStack[this.modalStack.length-1];this._wframePopupModal.className=h}}}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.modalEvent=function(e){try{this._wframePopupModal&&e&&(s.B.addListener(this._wframePopupModal.render,"onclick",(function(){var t=WebSquare.uiplugin.popup.getPopupWindow(e);t&&t.focus()})),s.B.addListener(this._wframePopupModal.render,"ondblclick",(function(){var t=WebSquare.uiplugin.popup.getPopupWindow(e);t&&t.focus()})))}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype._cloneRecursive=function(e){try{if(!e)return;var t=this._clone(e);return t.initAsync=async function(){},t.makeFrameSync(!0,this.frameDoc,!0),t}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype._getPerfStr=function(e){try{return e+"."+this.id}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype._makeDetail=function(e){try{return{src:this.getURL(this.getSrc()||WebSquare.w2xPath),id:this.id,orgId:this.getOriginalID(),scopeId:this.scope_id,log:e||""}}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype._markStart=function(){try{this._pCount++;var e={detail:this._makeDetail()};WebSquare._performance.mark(this._getPerfStr("wframe.start"),e)}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype._markEnd=function(){try{WebSquare._performance.mark(this._getPerfStr("wframe.step1"));var e=WebSquare.language.getMessage("Performance_wframe_step1");WebSquare._performance.measure(this._getPerfStr("wframe.step1"),this._getPerfStr("wframe.start"),this._makeDetail(e))}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype._markStart2=function(){try{var e={detail:this._makeDetail()};WebSquare._performance.mark(this._getPerfStr("wframe.step2"),e)}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype._markEnd2=function(){try{WebSquare._performance.mark(this._getPerfStr("wframe.end"));var e=WebSquare.language.getMessage("Performance_wframe_step2");WebSquare._performance.measure(this._getPerfStr("wframe.end"),this._getPerfStr("wframe.step2"),this._makeDetail(e))}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype._addPageCommon=function(e,t){try{this._pageCommonArr.push({src:e,id:t})}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype._parsePageCommons=async function(){try{for(var e=[];this._pageCommonArr.length>0;){var t=this._pageCommonArr.shift(),r=this._parsePageCommon(t);e.push(r)}await Promise.all(e)}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype._parsePageCommon=async function(e){try{var t=e.src,r=e.id,s=await WebSquare.jsLoader._loadObj(this.getURL(t),{msaName:this._getMsaName()}),n=WebSquare.jsonUtil.getNodesByTagName(s,"script"),c=i.x.extend({},this.scope),p=this.options.scopeVariable.split(",")[0]||"scwin",u={};null!=this.scope[r]&&(u=this.scope[r]),c[p]=u;for(var l=0;l<n.length;l++){var h=n[l],d=WebSquare.jsonUtil.getCDataNodeValue(h);"function"==typeof d&&d(c)}var m=WebSquare.Elem.api.getElementsByTagName(s,"publicInfo",a.v._XML_NAMESPACE.W2)[0];if(m){var f=m.getAttribute("method");if("string"==typeof f&&f){var S=f.split(","),g={}
;for(l=0;l<S.length;l++){var b=S[l].wq_trim("").replace(p+".","");g[b]=u[b]}u=g}}this.scope[r]=u}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype._addCssCache=function(e){try{this._cssCacheArr.push(e)}catch(e){o.w.printStackTrace(e,null,this)}},u._increasePendingWframeCount=function(){try{WebSquare.uiplugin.wframe.__pendingWframeCount<0&&(WebSquare.uiplugin.wframe.__pendingWframeCount=0),WebSquare.uiplugin.wframe.__pendingWframeCount++}catch(e){o.w.printStackTrace(e,null,this)}},u._decreasePendingWframeCount=function(){try{WebSquare.uiplugin.wframe.__pendingWframeCount--,WebSquare.uiplugin.wframe.__pendingWframeCount<=0&&(WebSquare.uiplugin.wframe.__pendingWframeCount=0)}catch(e){o.w.printStackTrace(e,null,this)}},u._isPending=function(){return WebSquare.uiplugin.wframe.__pendingWframeCount>0},u._addWframePreorder=function(e){try{WebSquare.uiplugin.wframe.__pendingWframePreOrderList.push(e)}catch(e){o.w.printStackTrace(e,null,this)}},u._addWframePostorder=function(e){try{WebSquare.uiplugin.wframe.__pendingWframePostOrderList.push(e)}catch(e){o.w.printStackTrace(e,null,this)}},u._execute=function(e,t){try{if(void 0!==t&&null!=t||(t={}),WebSquare.uiplugin.wframe._isPending())return;var r="postorder"===t.order?WebSquare.uiplugin.wframe.__pendingWframePostOrderList.slice(0):WebSquare.uiplugin.wframe.__pendingWframePreOrderList.slice(0);if(r.length<=0)return;switch(!0===t.reverse&&r.reverse(),e){case"script":for(var i="",a=0;a<r.length;a++){!0!==(u=WebSquare.idCache[r[a]])._executeStatus.script&&(u._executeStatus.script=!0,u.frameDoc&&"string"==typeof u.frameDoc.scriptSection&&u.frameDoc.scriptSection&&(i+=WebSquare.scriptIdentifier+u.getURL(u.getSrc())+'";',i+=u.frameDoc.scriptSection))}"executed"===WebSquare.scriptSectionExcuteFlag||!0===t.preExecuted?WebSquare.BootLoader.globalEval(i):WebSquare.scriptSection+=i;break;case"onpageload":for(a=0;a<r.length;a++){if(!0!==(u=WebSquare.idCache[r[a]])._executeStatus.onpageload&&(!t._isProcessMsgFrame||u.uuid===t._processMsgCompId)){u._executeStatus.onpageload=!0;for(var c=0;c<u.childControlList.length;c++)s.B.fireEvent(u.childControlList[c],"onpageload",u.getSrc())}}break;case"postscript":for(i="",a=0;a<r.length;a++){!0!==(u=WebSquare.idCache[r[a]])._executeStatus.postscript&&(u._executeStatus.postscript=!0,u.frameDoc&&"string"==typeof u.options.postScript&&u.options.postScript&&(i+=WebSquare.scriptIdentifier+u.getURL(u.getSrc())+'";',i+=u.options.postScript))}WebSquare.BootLoader.globalEval(i);break;case"lazyscript":var p=[];for(a=0;a<r.length;a++){!0!==(u=WebSquare.idCache[r[a]])._executeStatus.lazyscript&&(u._executeStatus.lazyscript=!0,u.frameDoc&&u.lazyImportsArr&&u.lazyImportsArr.length>0&&(p=p.concat(u.lazyImportsArr),u.lazyImportsArr=[]))}p.length>0&&"executed"===WebSquare.scriptSectionExcuteFlag&&n.D.js.apply(null,p);break;case"onwframeload":for(a=0;a<r.length;a++){var u;if(!0!==(u=WebSquare.idCache[r[a]])._executeStatus.onwframeload){u._executeStatus.onwframeload=!0;var l=u.options.pluginName.toLowerCase();s.B.fireEvent(u,"on"+l+"load",u.getSrc())}}}}catch(e){o.w.printStackTrace(e,null,this)}},u._clearPending=function(e){try{void 0!==e&&null!=e||(e={});for(var t={pendingWframeCount:WebSquare.uiplugin.wframe.__pendingWframeCount,pendingWframePreOrderList:WebSquare.uiplugin.wframe.__pendingWframePreOrderList.slice(0),pendingWframePostOrderList:WebSquare.uiplugin.wframe.__pendingWframePostOrderList.slice(0)};WebSquare.uiplugin.wframe.__pendingWframePreOrderList.length>0;){(r=WebSquare.idCache[WebSquare.uiplugin.wframe.__pendingWframePreOrderList.pop()])&&!0!==e.keepStatus&&r._clearExecuteStatus()}for(;WebSquare.uiplugin.wframe.__pendingWframePostOrderList.length>0;){var r;(r=WebSquare.idCache[WebSquare.uiplugin.wframe.__pendingWframePostOrderList.pop()])&&!0!==e.keepStatus&&r._clearExecuteStatus()}return WebSquare.uiplugin.wframe.__pendingWframeCount=0,t}catch(e){o.w.printStackTrace(e,null,this)}},u._setPending=function(e){try{
WebSquare.uiplugin.wframe.__pendingWframeCount=e.pendingWframeCount,WebSquare.uiplugin.wframe.__pendingWframePreOrderList=e.pendingWframePreOrderList.slice(0),WebSquare.uiplugin.wframe.__pendingWframePostOrderList=e.pendingWframePostOrderList.slice(0)}catch(e){o.w.printStackTrace(e,null,this)}},u._showProcessMessage=async function(e,t,r){try{if("$blank"==t||!t||!e)return;var s,c=a.v.getConfiguration("processMsgFrameURL");c||(c=i.x._resourceURI+"message/processMsg.js");var p={};if(r&&r.submissionId&&("string"==typeof r.submissionId?(s=r.submissionId,p=WebSquare.ModelUtil.getSubmission(s)):s=(p=r.submissionId).id,!1!==p.hideProcessMsg&&e._processMsgQueue.push({scope_id:p.scope_id,org_id:p.org_id,id:s,msg:t})),r&&!0===r.ajax&&e._processMsgAjaxCnt++,null==e._processMsgComp){e._processMessageShowCnt=1;var l,h=e;!e.scope_obj||e.options&&"wframe"===e.options.pluginName||(h=e.scope_obj),h&&(l=h.uuid);var d=WebSquare.controlFactory.create(e.id+"_wq_processMsgComp",{src:c,className:"w2_proc",scope:!0,pluginName:"wframe",preload:!0},null,h,l,!0);if(e._processMsgComp="promise",await WebSquare.controlFactory.initAsync(),e._processMsgComp=d,d.writeTo(e),d._isProcessMsgFrame=!0,d.activate(),e.addControl(d),!(e._processMessageShowCnt>0))return u._hideProcessMessage(e),void(e._processMessageShowCnt=0)}else if("promise"===e._processMsgComp)return void(isNaN(e._processMessageShowCnt)?e._processMessageShowCnt=1:e._processMessageShowCnt++);e._processMsgComp.show();var m=e._processMsgComp.getObj("btn_hide");m&&(p.hideTrigger?m.show():m.hide());var f=e._processMsgComp.getObj("btn_cancel");f&&(p.abortTrigger?f.show():f.hide());var S=e._processMsgComp.getObj("text_msg");S&&S.setValue(t);var g=WebSquare.style.getStyle(e.render,"position"),b=0,_=0,y="";if("static"==g){y="static";for(var w=e.render.parentElement;w&&"BODY"!=w.tagName;){var v=WebSquare.style.getStyle(w,"position");if("relative"==v||"absolute"==v){y=v;break}w=w.parentElement}}var W=e.render.offsetLeft,q=e.render.offsetTop,C=e.render.offsetHeight,k=e.render.offsetWidth,M=e.render.scrollLeft,P=e.render.scrollTop;"relative"==g?(b=M,_=P):"static"==g&&"absolute"!=y&&(b=W,_=q);var T=b+(e.getSize("outerWidth")-e._processMsgComp.getSize("outerWidth"))/2,D=_+(e.getSize("outerheight")-e._processMsgComp.getSize("outerheight"))/2;if(e._processMsgComp.setPosition(T,D),e.bind("onkeydown",e._handleProcessEvent),null==e._processMsgModal){var L=WebSquare.controlFactory.create(e.id+"_wq_proessMsgModal",{className:"w2_proc_modal",pluginName:"group",parseChild:!1},null,e,e,!0);L.writeTo(e),L.activate(),e.addControl(L),e._processMsgModal=L}e._processMsgModal.render.style.height=C+"px",e._processMsgModal.render.style.width=k+"px",e._processMsgModal.setPosition(b,_),e._processMsgModal.show(),n.D.isMobile()||e.addClass("w2modalopened_wframe")}catch(t){o.w.printStackTrace(t,null,e),u._hideProcessMessage(e)}},u._hideProcessMessage=function(e){try{if(e._processMsgQueue=[],e._processMsgAjaxCnt=0,null!=e._processMsgComp&&"promise"!==e._processMsgComp)e._processMsgComp.hide(),e.unbind("onkeydown",e._handleProcessEvent);else if(e._processMessageShowCnt>0)return void e._processMessageShowCnt--;null!=e._processMsgModal&&e._processMsgModal.hide(),e.removeClass("w2modalopened_wframe")}catch(t){o.w.printStackTrace(t,null,e)}},u.__pendingWframeCount=0,u.__pendingWframePreOrderList=[],u.__pendingWframePostOrderList=[],u._cacheObj={},u.scope=function(e){this._parent_uuid=e,this._identifier="wframe_scope"},u.scope.prototype.getRuntimeId=function(e,t){try{for(var r=this._parent_uuid,i="",a=WebSquare.idCache[this._parent_uuid].options.scopeVariable.split(","),s={},n=0;n<a.length;n++)s[a[n].wq_trim()]=!0;if("string"==typeof t){var c=t.split("parent").length-1;for(n=0;n<c&&null!=r&&null!=WebSquare.idCache[r];n++)r=WebSquare.idCache[r].parentFrame}
return!0===s[e]?i=null!=r?WebSquare.idCache[r].id+"_"+e:e:null!=r&&null!=WebSquare.idCache[r].scope[e]?i=WebSquare.idCache[r].scope[e].id||"":WebSquare.idToUUID[e]&&WebSquare.idCache[WebSquare.idToUUID[e]]&&(i=WebSquare.strictMode&&null!=WebSquare.idCache[r]&&WebSquare.idCache[WebSquare.idToUUID[e]].scope_id!==WebSquare.idCache[r].id?"":e),i}catch(e){return o.w.printStackTrace(e,null,this),""}},u.scope.prototype.getSubmission=function(e,t){try{for(var r=WebSquare.ModelUtil.getModelByID(t),i=null,a=WebSquare.idCache[this._parent_uuid].id,s=WebSquare.idCache[this._parent_uuid].scope[e],n=0;n<r.submissions.length;n++){var c=r.submissions[n];if(s===c||c.scope_id===a&&c.id===e){i=c;break}}return i}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.getSubmissionList=function(e){try{return void 0!==e&&null!=e||(e={}),!0!==e.all&&(e.scopeId=WebSquare.idCache[this._parent_uuid].id),WebSquare.ModelUtil.getSubmissionList(e)}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.executeSubmission=function(e,t,r,i,a){try{var s;if("string"==typeof e)s=this.getSubmission(e);else if(s=e,WebSquare.strictMode&&s.scope_id!==WebSquare.idCache[this._parent_uuid].id)return;return WebSquare.ModelUtil.executeSubmission(s,t,r,i,a)}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.createSubmission=function(e,t){try{var r,i=e.id,a=this.getFrame(),s=a.id,n=s+"_";return e.id=n+i,e.scope_id=s,e.org_id=i,r=WebSquare.ModelUtil.createSubmission(e,t),a.scope[i]=WebSquare.ModelUtil.getSubmission(e.id,null,{scope_id:s}),null!=a.frameDoc&&a.frameDoc.models[0].submissions.push(a.scope[i]),r}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.deleteSubmission=function(e,t){try{var r=this.getSubmission(e),i=WebSquare.ModelUtil.deleteSubmission(r.id,t,{scope_id:this.getFrameId()});return delete WebSquare.idCache[this._parent_uuid].scope[e],i}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.createWorkflow=function(e,t){try{var r,i=e.id,a=this.getFrame(),s=a.id,n=s+"_";return e.id=n+i,e.scope_id=s,r=WebSquare.ModelUtil.createWorkflow(e,t),a.scope[i]=WebSquare.ModelUtil.getWorkflow(e.id,null,{scope_id:s}),r}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.deleteWorkflow=function(e,t){try{var r=this.getWorkflow(e),i=WebSquare.ModelUtil.deleteWorkflow(r.id,t,{scope_id:this.getFrameId()});return delete WebSquare.idCache[this._parent_uuid].scope[e],i}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.getWorkflow=function(e,t){try{for(var r=WebSquare.ModelUtil.getModelByID(t),i=null,a=WebSquare.idCache[this._parent_uuid].id,s=WebSquare.idCache[this._parent_uuid].scope[e],n=0;n<r.workflows.length;n++){var c=r.workflows[n];if(s===c||c.scope_id===a&&c.id===e){i=c;break}}return i}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.getRunningWorkflow=function(e,t){try{var r=null;if(e)null!=(n=this.getWorkflow(e,t))&&n.promiseStatus&&""!=n.promiseStatus&&(r=n);else for(var i=WebSquare.idCache[this._parent_uuid].id,a=WebSquare.ModelUtil.getModelByID(t),s=0;s<a.workflows.length;s++){var n;if((n=a.workflows[s]).scope_id===i&&n.promiseStatus&&""!=n.promiseStatus){r=n;break}}return r}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.isRunningWorkflow=function(e,t){try{return null!=this.getRunningWorkflow(e,t)}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.getRunningWorkflowID=function(e){try{var t=this.getRunningWorkflow(null,e),r=null;return null!=t&&(r=t.id),r}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.rejectWorkflow=function(e,t,r){try{var i=this.getRunningWorkflow(t,r),a=null;return null!=i&&(i.promiseStatus="REJECT",i.promiseValue=e||"REJECT",a=i),a}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.executeWorkflow=function(e){try{return WebSquare.ModelUtil.executeWorkflow(e,{scope_function:this})}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.executeSerial=function(e,t,r,i,a){try{return WebSquare.ModelUtil.executeSerial(e,t,r,i,a,{scope_function:this})}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.executeWhilst=function(e,t,r,i,a,s,n){try{
return WebSquare.ModelUtil.executeWhilst(e,t,r,i,a,s,n,{scope_id:this.getFrameId()})}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.ajax=function(e){try{if(e){var t=this.getFrame();t&&(e.scope=t.id),WebSquare.net.ajax(e)}}catch(e){o.w.printStackTrace(e),this.hideProcessMessage()}},u.scope.prototype.dynamicCreate=function(e,t,r,i,a,s){try{return n.D.dynamicCreate(e,t,r,i,a,s,this.getFrame())}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.getFrameId=function(){try{return WebSquare.idCache[this._parent_uuid]&&WebSquare.idCache[this._parent_uuid].id||null}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.getFrame=function(){try{return WebSquare.idCache[this._parent_uuid]}catch(e){o.w.printStackTrace(e)}},u.scope.prototype._getProcessMsgTargetFrame=function(){try{return WebSquare.idCache[this._parent_uuid].parentControl}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.getParentWindow=function(){try{var e=WebSquare.idCache[this._parent_uuid].getParentFrame();return null==e?this.getFrame().options.strictFrame?n.D.getParentWindow():window:e.scope}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.getTopWindow=function(){try{return top}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.top=function(){try{return n.D.getTopWindow()}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.parent=function(){try{return this.getParentWindow()}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.main=function(){try{return n.D.getMainFrame()}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.self=function(){try{return this.getFrame().scope}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.getComponentById=function(e){try{return n.D.getComponentById(e,this.getFrameId())}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.getPopupParam=function(e){try{void 0!==e&&null!=e||(e={});var t="",r=WebSquare.idCache[this._parent_uuid],i=null!=r._dataObject&&""!=r.options.popupParam&&r._dataObject.name===r.options.popupParam.slice(1);i=i||!0===e.dataObject;var a=null!=r.paramObj&&""!=r.options.popupParam;if(i||a){var s=i?r._dataObject.type.charAt(0):r.options.popupParam.charAt(0),c=i?r._dataObject.data:r.paramObj[r.options.popupParam.slice(1)];switch(s){case"j":t=JSON.stringify(c);break;case"x":t=WebSquare.xml.serialize(c);break;case"a":t=n.D.parseArray(c);break;default:t=c}}return t}catch(e){return o.w.printStackTrace(e),""}},u.scope.prototype.getParameter=function(e){try{var t,r=this.getFrame();if(r._dataObject&&r._dataObject.name===e)t=r._dataObject.data;else{var i=WebSquare.idCache[this._parent_uuid].paramObj;null!=i&&(t=i[e]),WebSquare.strictMode&&!this.getFrame().options.strictFrame||null!=t||(t=WebSquare.net.getParameter(e))}return t}catch(e){return o.w.printStackTrace(e),""}},u.scope.prototype.getAllParameter=function(){try{var e=JSON.parse(WebSquare.idCache[this._parent_uuid].options.params||null);for(var t in e)e[t]=e[t].slice(1);var r=this.getFrame(),i=r._getDataObject();return null!=i&&(null==e&&(e={}),r._getVersion()>=3?e[i.name]=i.data:e[i.name]=this.getPopupParam({dataObject:!0})),WebSquare.strictMode&&!this.getFrame().options.strictFrame||null!=e||(e=WebSquare.net.getAllParameter()),e}catch(e){return o.w.printStackTrace(e),null}},u.scope.prototype.getOptions=function(e){try{var t,r=this.getFrame(),s=a.v._getParentObj();if(r.options.strictFrame){if(WebSquare.isWebSquarePopup&&null!=s&&null!=s.WebSquare){var n=WebSquare.net.getParameter("popupID");t=s.WebSquare.dataObject[n].data}}else t="udcFrame"===r.options.pluginName?WebSquare.WebSquareparser.parseAttribute(r.element):r._getDataObject("data");return i.x.extendKeepingType(e||{},t)||{}}catch(e){return o.w.printStackTrace(e),""}},u.scope.prototype.setPopupParam=function(e,t){},u.scope.prototype.getPopupUrl=function(){try{var e=null;if(this.isWFramePopup()||this.getFrame()._getVersion()<3){var t=WebSquare.idCache[this._parent_uuid].getSrc();e=WebSquare.idCache[this._parent_uuid].getURL(t)}return e}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.getPopupId=function(){try{
var e=null;return this.isWFramePopup()&&(e=WebSquare.idCache[this._parent_uuid].paramObj.popupID),e}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.isWFramePopup=function(e,t){try{if(!e)return WebSquare.idCache[this._parent_uuid]._isWframePopup;for(var r=WebSquare.idCache[this._parent_uuid];r;){if(r.options.strictFrame)return!!t&&n.D.isPopup();if(r._isWframePopup)return r._isWframePopup;r=r.getParentFrame()}}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.isPopup=function(e){try{return this.getFrame().options.strictFrame?n.D.isPopup2():this.isWFramePopup(e,!0)}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.getPopup=function(e){try{return n.D.getPopup(e,this._parent_uuid)}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.getPopupList=function(e){try{return n.D.getPopupList(e,this._parent_uuid)}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.getPopupWindow=function(e){try{return n.D.getPopupWindow(e,this._parent_uuid)}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.getPopupWindowList=function(e){try{return n.D.getPopupWindowList(e,this._parent_uuid)}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.openPopup=function(e,t,r,i){try{void 0!==t&&null!=t||(t={}),t.scope_uuid||(t.scope_uuid=this._parent_uuid),n.D.openPopup(e,t,r,i)}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.closePopup=function(e,t){try{var r=e;void 0===e&&(r=this.getParameter("popupID"));var i=this.getPopup(r);if(i){var a=i.id;i.close(r,t),WebSquare.uiplugin.popup.startChkModalClosed(),!0===i.useWindowPopup()&&WebSquare.uiplugin.popup.removeFromPopupList(a)}else this.getFrame().options.strictFrame&&n.D.closePopup(r,t)}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.reinitialize=function(e){try{this.getFrame().reload(e)}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.getMetaValue=function(e){try{if(this.getFrame().options.strictFrame)return n.D.getMetaValue(e);var t="",r=WebSquare.Elem.api.getElementsByTagName(this.getFrame().frameDoc.getPageInfo(),"head")[0];return r&&(t=WebSquare.Elem.api.getAttribute(r,e)),t}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.multipleExcelUpload=function(e){try{e.scopeId=this.id,n.D.multipleExcelUpload(e)}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.multipleExcelDownload=function(e){try{e.scopeId=this.id,n.D.multipleExcelDownload(e)}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.$=function(e){try{for(var t,r=e.split("#"),i=0;i<r.length;i++){var a=r[i].search(/[\W]/);if(0!==a){var s,c="";a<0?s=r[i]:(s=r[i].slice(0,a),c=r[i].slice(a));var p=this.getComponentById(s);null!=p&&(r[i]=p.id+c)}}t=r.join("#");var u="";return this.getFrame().options.strictFrame||(u="#"+this.getFrameId()+" "),n.D.jQuerySelector(u+t)}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.watermark=function(e,t){try{void 0!==t&&null!=t||(t={});var r=this.getFrame(),i=r.id;t.canvasId||(t.canvasId=i+"_watermarkCanvas"),t.target||(t.target=r),n.D.watermark(e,t)}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.emit=function(e){try{var t=[].slice.apply(arguments,[0]);return t.shift(),this.getFrame().trigger(e,t)}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.updateSuffix=function(e){try{void 0!==e&&null!=e||(e={});var t=this.getFrame().id;e.scopeId=t,n.D.updateSuffix(e)}catch(e){o.w.printStackTrace(e)}},u.scope.bigDecimal=function(e){try{var t=function(e){return WebSquare.bigDecimal(e)};return t.calc=(r=e,function(e,t){return WebSquare.bigDecimal.calc(e,t,r)}),t}catch(e){o.w.printStackTrace(e)}var r},u.scope.prototype.updateServerTime=function(e,t,r){try{var i,a=this.getFrame()._getMsaName();return i=!a||void 0!==r&&""!=r?a||void 0!==r&&""!=r?r:"":a,WebSquare.date.updateServerTime(e,t,i)}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.getCurrentServerDate=function(e,t){try{var r,i=this.getFrame()._getMsaName();return r=!i||void 0!==t&&""!=t?i||void 0!==t&&""!=t?t:void 0:i,WebSquare.date.getCurrentServerDate(e,r)}catch(e){o.w.printStackTrace(e)}},u.scope.data=function(e){this._parent_id=e,
this._identifier="wframe_scope_data"},u.scope.data.prototype.get=function(e,t,r){try{return r||(r={}),r.scope_obj||(r.scope_obj=this._parent_id),WebSquare.DataCollection.api.get(e,t,r)}catch(e){o.w.printStackTrace(e)}},u.scope.data.prototype.set=function(e,t,r,i){try{return i||(i={}),i.scope_obj||(i.scope_obj=this._parent_id),WebSquare.DataCollection.api.set(e,t,r,i)}catch(e){o.w.printStackTrace(e)}},u.scope.data.prototype.create=function(e,t){try{return void 0!==t&&null!=t||(t={}),t.scope_obj||(t.scope_obj=this._parent_id),WebSquare.DataCollection.api.create(e,t)}catch(e){o.w.printStackTrace(e)}},u.scope.data.prototype.remove=function(e,t){try{return void 0!==t&&null!=t||(t={}),t.scope_obj||(t.scope_obj=this._parent_id),WebSquare.DataCollection.api.remove(e,t)}catch(e){o.w.printStackTrace(e)}},u.scope.data.prototype.bindPath=function(e){try{var t=e.split("."),r={};return r.collectionId=t[0].replace(/^data:/,""),t>1&&(r.columnId=t[1]),r}catch(e){o.w.printStackTrace(e)}},u.scope.data.prototype.getAllDataCollection=function(e,t){try{return void 0!==t&&null!=t||(t={}),t.scope_obj||(t.scope_obj=this._parent_id),WebSquare.DataCollection.api.getAllDataCollection(e,t)}catch(e){o.w.printStackTrace(e)}},u.scope.data.prototype.getBroadcast=function(e){try{return void 0!==e&&null!=e||(e={}),e.scope_obj||(e.scope_obj=this._parent_id),WebSquare.DataCollection.api.getBroadcast(e)}catch(e){o.w.printStackTrace(e)}},u.scope.data.prototype.getInfo=function(e,t,r,i){try{return void 0!==i&&null!=i||(i={}),i.scope_obj||(i.scope_obj=this._parent_id),WebSquare.DataCollection.api.getInfo(e,t,r,i)}catch(e){o.w.printStackTrace(e)}},u.scope.data.prototype.getOption=function(e,t){try{return void 0!==t&&null!=t||(t={}),t.scope_obj||(t.scope_obj=this._parent_id),WebSquare.DataCollection.api.getOption(e,t)}catch(e){o.w.printStackTrace(e)}},u.scope.data.prototype.setBroadcast=function(e,t){try{return void 0!==t&&null!=t||(t={}),t.scope_obj||(t.scope_obj=this._parent_id),WebSquare.DataCollection.api.setBroadcast(e,t)}catch(e){o.w.printStackTrace(e)}},u.scope.data.prototype.setOption=function(e,t,r){try{return void 0!==r&&null!=r||(r={}),r.scope_obj||(r.scope_obj=this._parent_id),WebSquare.DataCollection.api.setOption(e,t,r)}catch(e){o.w.printStackTrace(e)}},u.scope.model=function(e){this.scope_id=e},u.scope.model.prototype.setInstanceValue=function(e,t,r){return WebSquare.ModelUtil.setInstanceValue(e,t,r,this.scope_id)},u.scope.model.prototype.getInstanceValue=function(e,t){return WebSquare.ModelUtil.getInstanceValue(e,t,this.scope_id)},u.scope.model.prototype.findInstanceNode=function(e,t){return WebSquare.ModelUtil.findInstanceNode(e,t,this.scope_id)},u.scope.model.prototype.findInstanceNodes=function(e,t){return WebSquare.ModelUtil.findInstanceNodes(e,t,this.scope_id)},u.scope.model.prototype.findSerializedNode=function(e,t){return WebSquare.ModelUtil.findSerializedNode(e,t,this.scope_id)},u.scope.model.prototype.removeInstanceNode=function(e){return WebSquare.ModelUtil.removeInstanceNode(e,this.scope_id)},u.scope.model.prototype.removeInstanceNodes=function(e){return WebSquare.ModelUtil.removeInstanceNodes(e,this.scope_id)},u.scope.model.prototype.removeChildNodes=function(e){return WebSquare.ModelUtil.removeChildNodes(e,this.scope_id)},u.scope.model.prototype.copyNode=function(e,t,r,i){return WebSquare.ModelUtil.copyNode(e,t,r,i,this.scope_id)},u.scope.prototype.updateSuffix=function(e){try{void 0!==e&&null!=e||(e={});var t=this.getFrame().id;e.scopeId=t,n.D.updateSuffix(e)}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.showProcessMessage=function(e,t){try{void 0!==t&&null!=t||(t={});var r=WebSquare.idCache[this._parent_uuid].id;return t.scope||(t.scope=r),WebSquare.layer.showProcessMessage(e,t)}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.hideProcessMessage=function(e){try{void 0!==e&&null!=e||(e={});var t=WebSquare.idCache[this._parent_uuid].id;return e.scope||(e.scope=t),WebSquare.layer.hideProcessMessage(e)}catch(e){o.w.printStackTrace(e)
}},u.scope.prototype.js=function(...e){try{if(0===e.length)return;var t=e.slice(0),r=t[t.length-1];return"string"==typeof r&&a.v._msaServerHash[r]&&t.length>=2||"string"==typeof(r=this.getFrame()._getMsaName())&&a.v._msaServerHash[r]&&t.push(r),WebSquare.util.js.apply(this,t)}catch(e){o.w.printStackTrace(e)}},u.scope.prototype.jsAsync=async function(e,t){try{if("string"==typeof e&&(e=e.split(",")),!(e instanceof Array))return;void 0!==t&&null!=t||(t={});var r=[],i=this.getFrame(),s={frameObj:i,msaName:t.msaName,wpack:t.wpack};if(t.scopeVariable){var c=t.scopeVariable;if("string"==typeof t.scopeVariable&&(c=t.scopeVariable.split(",")),c instanceof Array)for(var p=0;p<c.length;p++){var l=c[p];l&&null==i.scope[l]&&(i.scope[l]={})}}for(p=0;p<e.length;p++){var h,d=e[p],m=a.v._getMsaSrc(d,s);if("function"==typeof u._cacheObj[m]){var f={func:u._cacheObj[m],cached:!0,scopeId:i.id};h=Promise.resolve(f)}else{var S={skipError:!0,noPostfix:!0,useInfo:!0,infoObj:{url:m,scopeId:i.id,noCache:t.noCache}};h=a.v.loadAsync(m,S)}h instanceof window.Promise&&r.push(h)}i.id;await Promise.all(r).then((function(e,t){for(var r=0;r<e.length;r++){var i,a=e[r];if(a&&"object"==typeof a){if(!0===a.cached)i=a.func;else if(a.data){var o=n.D.scopingFuncBody(a.data,"scopeComp","scopeObj");i=new Function("scopeComp",o),"string"==typeof a.url&&a.url&&!0!==a.noCache&&(u._cacheObj[a.url]=i)}if("function"==typeof i)i(n.D.getComponentById(a.scopeId))}}}))}catch(e){o.w.printStackTrace(e)}}}}]);