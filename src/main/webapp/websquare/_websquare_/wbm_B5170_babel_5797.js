"use strict";(self.webpackChunkwebpack_test=self.webpackChunkwebpack_test||[]).push([[5797],{5797:function(e,t,r){r.r(t),r.d(t,{wframe:function(){return f}});var i=r(1002),a=r(5861),o=r(4687),s=r.n(o),n=r(9122),c=r(7827),p=r(1160),u=r(5841),l=r(8754),h=r(6079),d=r(5316),f=function(e,t,r){d.s.call(this,e,t,r)};n.x.extend(f.prototype,d.s.prototype),f.prototype.defaultOptions={pluginType:"uiplugin.wframe",pluginName:"wframe",userEvents:["onload","onwframeload","onwframeunload","onbeforewframeunload"],useConfig:!0,src:"",tagname:"div",mode:"async",scope:!1,initScript:"",postScript:"",scopeVariable:"",cloneVariable:"",linkVariable:"",scopeFunction:"$w",scopeExternal:!1,scopeValue:"",isWidget:!1,params:"",popupParam:"",initStyle:!1,preload:!1,strictFrame:!1,processMsgFrame:!1,frameModal:!1,udc2Name:"",popupAutoClose:!1,msaName:""},f.prototype.initialize=function(e){this.options.mode="async",this.createFlag=!1,(e&&"w2:wframe"===e.getTagName()||!0===this.options.preload)&&(this.createFlag=!0),this.frameDoc=null,this.wframeScript=[],this.lazyImportsArr=[],this.childAllControlList=[],this.userComponentList=[],this.userPluginList=[],this.scope={},this.scopeLazyList=[],this.scopeVariable={};var t=this.options.pluginName;"true"===this.options.initScript&&"true"===c.v.getConfiguration("/WebSquare/"+t+"/initScript/@value")&&(this.options.initScript=c.v.getConfigurationJSON("/WebSquare/"+t+"/initScript",{type:"json"}),this.options.initScript["#cdata"]&&(this.options.initScript=this.options.initScript["#cdata"],"function"==typeof this.options.initScript&&(this.options.initScript="("+this.options.initScript.toString()+")()"))),"true"===this.options.postScript&&"true"===c.v.getConfiguration("/WebSquare/"+t+"/postScript/@value")&&(this.options.postScript=c.v.getConfigurationJSON("/WebSquare/"+t+"/postScript",{type:"json"}),this.options.postScript["#cdata"]&&(this.options.postScript=this.options.postScript["#cdata"],"function"==typeof this.options.postScript&&(this.options.postScript="("+this.options.postScript.toString()+")()"))),this.options.scope&&(""==this.options.scopeVariable&&(this.options.scopeVariable=c.v.getConfiguration("/WebSquare/spa/variable/@value")||""),""==this.options.cloneVariable&&(this.options.cloneVariable=c.v.getConfiguration("/WebSquare/spa/variable/@clone")||""),""==this.options.linkVariable&&(this.options.linkVariable=c.v.getConfiguration("/WebSquare/spa/variable/@link")||""),this.options.initScript&&(this.options.initScript=l.D.scopingFuncBody(this.options.initScript,this.id,!0)),this.options.postScript&&(this.options.postScript=l.D.scopingFuncBody(this.options.postScript,this.id,!0))),this.makeScopeVariable(),this.options.params&&this.parseParameter(),this.options.dataObject&&this.setDataObject(this.options.dataObject),this._isWframePopup=!1,this._scriptLazy=!1,this._clearExecuteStatus(),this._processMsgComp=null,this._processMsgModal=null,this._processMsgQueue=[],this._wframePopupModal=null,this._wframeModelStack=[],this._processMsgAjaxCnt=0,this.udc2Parent=null,this._isUDC2=!1,this._bSkipAsync=!1,this._pCount=0,this._onsetSrc=!1,this._onsetSrcAfter=null,this._pageCommonArr=[],this._cssCacheArr=[]},f.prototype.toHTML=function(){try{var e={footer:"div",header:"div",nav:"div",section:"div"},t=[],r=this.options.tagname,i=""==this.options.style?"":"style='"+this.options.style+"'",a=""==this.options.tabIndex?"":"tabIndex='"+this.options.tabIndex+"'";if(c.v.browserCheck.ie){var o=c.v.browserVersion();"6"!=o&&"7"!=o&&"8"!=o||e[r]&&(r=e[r])}if(t.push("<"+r+" id='"+this.id+"' "+i+" class='w2wframe "+this.options.className+"' "+a+">"),this.createFlag)for(var s=this.getChildren(),n=0;n<s.length;n++)t.push(s[n].toHTML());return t.push("</"+r+">"),t.join("")}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype.setChildAction=function(e){try{e=e||{};var t=this.childControlList[0];if(!t)return;this._markStart2(),!0!==(e&&!0===e.skipPreActivate)&&"stop"===t.activeStatus&&t.preActivate();var r=[]
;for(var i in WebSquare.DataCollection.activated=!0,WebSquare.DataCollection.comp){var a=WebSquare.DataCollection.comp[i];a&&a.parentFrame===this.uuid&&(a.activate(),r.push(a.uuid))}WebSquare.uiplugin.wframe._increasePendingWframeCount(),WebSquare.uiplugin.wframe._addWframePreorder(this.uuid),t.activate(),WebSquare.uiplugin.wframe._decreasePendingWframeCount(),WebSquare.uiplugin.wframe._addWframePostorder(this.uuid),t.render=null,t.onComplete();for(var o=0;o<r.length;o++)WebSquare.idCache[r[o]].completed||WebSquare.idCache[r[o]].onComplete();var s=this.getSrc(),n=!0===this._scriptLazy&&!0!==c.v.scriptPrecedence&&"preExecuted"===WebSquare.scriptSectionExcuteFlag;if("executed"===WebSquare.scriptSectionExcuteFlag||n){if(!0===c.v.scriptPrecedence)WebSquare.uiplugin.wframe._execute("script"),e._isProcessMsgFrame?WebSquare.uiplugin.wframe._execute("onpageload",e):WebSquare.uiplugin.wframe._execute("onpageload"),WebSquare.uiplugin.wframe._execute("postscript",{order:"postorder"}),WebSquare.uiplugin.wframe._execute("onwframeload");else{var l=e&&!0===e.preExecuted,h=!0===this._scriptLazy&&this.parentControl&&this.parentControl.parentControl&&this.parentControl.parentControl.options&&"wframe"===this.parentControl.parentControl.options.pluginName,d={order:"postorder",reverse:!0};if(n&&(d.preExecuted=!0),h||!0===this.options.preload||!0===l)WebSquare.uiplugin.wframe._execute("script",d),WebSquare.uiplugin.wframe._execute("onpageload",{order:"postorder"});else{if(this.frameDoc&&"string"==typeof this.frameDoc.scriptSection&&this.frameDoc.scriptSection){var f=WebSquare.scriptIdentifier+this.getURL(this.getSrc())+'";';f+=this.frameDoc.scriptSection,WebSquare.BootLoader.globalEval(f),this.frameDoc.scriptSection=""}for(o=0;o<this.childControlList.length;o++)u.B.fireEvent(this.childControlList[o],"onpageload",s);this._executeStatus.onpageload=!0}}WebSquare.uiplugin.wframe._execute("lazyscript"),WebSquare.uiplugin.wframe._isPending()||WebSquare.uiplugin.wframe._clearPending()}else if(!0!==c.v.scriptPrecedence){var m=e&&!0===e.preExecuted&&"preExecuted"===WebSquare.scriptSectionExcuteFlag;m&&WebSquare.uiplugin.wframe._execute("script",{order:"postorder",reverse:!0,preExecuted:!0});for(o=0;o<this.childControlList.length;o++)u.B.fireEvent(this.childControlList[o],"onpageload",s);m&&(WebSquare.uiplugin.wframe._execute("lazyscript"),WebSquare.uiplugin.wframe._isPending()||WebSquare.uiplugin.wframe._clearPending())}u.B.fireEvent(t,"onwframeload",s),u.B.fireEvent(t,"oncreated",t.options),u.B.fireEvent(this,"onload",s),!0!==c.v.scriptPrecedence&&u.B.fireEvent(this,"onwframeload",s),this._markEnd2()}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype.setAction=function(){try{if(this.options.initStyle){var e=document.getElementById(this.id).style.cssText,t=document.getElementById(this.id).getAttribute("class");WebSquare.initStyle[this.id]={style:e,className:t}}if(this.options.isWidget)return;if(this.createFlag){var r;if(this._isProcessMsgFrame&&(r={_isProcessMsgFrame:!0,_processMsgCompId:this.uuid}),("preExecuted"===WebSquare.scriptSectionExcuteFlag||"executed"===WebSquare.scriptSectionExcuteFlag)&&WebSquare.externalScriptArr&&WebSquare.externalScriptArr.length>0){if("sync"!==this.options.mode){var i=this.uuid;return WebSquare.externalScriptArr.push((function(){try{var e,t=WebSquare.idCache[i];t._isProcessMsgFrame&&(e={_isProcessMsgFrame:!0,_processMsgCompId:t.uuid}),t.setChildAction(e)}catch(e){p.w.printStackTrace(e)}})),l.D.js.apply(null,WebSquare.externalScriptArr),void(WebSquare.externalScriptArr=[])}for(var a=0;a<WebSquare.externalScriptArr.length;a++)WebSquare.BootLoader.globalEval(c.v.load(WebSquare.externalScriptArr[a]));WebSquare.externalScriptArr=[]}this.setChildAction(r)}else{var o;this._dataObject&&(o={dataObject:this._dataObject}),this.setSrc(this.options.src,o)}}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype.setSrc=function(){var e=(0,a.Z)(s().mark((function e(t,r){var a,o,n,h,d,f,m,S;return s().wrap((function(e){
for(;;)switch(e.prev=e.next){case 0:if(e.prev=1,r=r||{},a=this.getSrc(),t&&""!=t){e.next=6;break}return e.abrupt("return",!1);case 6:if(this.options.src=t,t=this.getSrc(),this._bSkipAsync=!0,"active"===this.activeStatus||this.createFlag){e.next=11;break}return e.abrupt("return");case 11:if(this._markStart(),!0!==this._onsetSrc){e.next=15;break}return this._onsetSrcAfter=[t,r],e.abrupt("return");case 15:return this._onsetSrc=!0,e.next=18,WebSquare.jsLoader._loadObj(this.getURL(t,r),{msaName:r.msaName||this._getMsaName()});case 18:if(!(o=e.sent)){e.next=42;break}for(n=0;n<this.childControlList.length;n++)u.B.fireEvent(this.childControlList[n],"onwframeunload",a);return l.D.emptySelection(),r.removeAll&&(r.appendModel="replace"),"replace"==r.appendModel?this.removeFrame_old():((""==a||!a||a===t&&!0===r.reload)&&(r.reload=!1,h={keepDataObject:!0}),this.finalize(a,h)),"object"===(0,i.Z)(r.dataObject)&&this.setDataObject(r.dataObject),this.makeScopeVariable(),d=WebSquare.jsLoader.getPageType(t),this.frameDoc=WebSquare.jsLoader.getPageInfo(o,d),this.frameDoc.renderStartTime=new Date,this.makeParameter(),e.next=32,this.frameDoc.parsingUDC(!0,this);case 32:return e.next=34,this.frameDoc.parsingWFrame(!0,this);case 34:return null==r.appendModel&&(this.options.scope?r.appendModel="scope":r.appendModel=!0),this.appendModels(this.frameDoc.models,null,r),f=WebSquare.uiplugin.wframe._clearPending({keepStatus:!0}),e.next=39,this.renderBody(!0);case 39:"executed"===WebSquare.scriptSectionExcuteFlag||!0!==c.v.scriptPrecedence&&"preExecuted"===WebSquare.scriptSectionExcuteFlag||(f.pendingWframePreOrderList=f.pendingWframePreOrderList.concat(WebSquare.uiplugin.wframe.__pendingWframePreOrderList),f.pendingWframePostOrderList=WebSquare.uiplugin.wframe.__pendingWframePostOrderList.concat(f.pendingWframePostOrderList)),WebSquare.uiplugin.wframe._setPending(f);case 42:if(this._onsetSrc=!1,!this._onsetSrcAfter){e.next=52;break}return m=this._onsetSrcAfter[0],S=this._onsetSrcAfter[1],this._onsetSrcAfter=null,e.next=49,this.setSrc(m,S);case 49:return e.abrupt("return",e.sent);case 52:return e.abrupt("return",!!o);case 53:e.next=61;break;case 55:return e.prev=55,e.t0=e.catch(1),p.w.printStackTrace(e.t0,null,this),this._onsetSrc=!1,this._onsetSrcAfter=null,e.abrupt("return",!1);case 61:case"end":return e.stop()}}),e,this,[[1,55]])})));return function(t,r){return e.apply(this,arguments)}}(),f.prototype.msaLoad=function(){var e=(0,a.Z)(s().mark((function e(t,r,i,a){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,(i=i||{}).msaName=r||this._getMsaName(),this.options.msaName=i.msaName,e.next=7,this.setSrc(t,i);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(1),p.w.printStackTrace(e.t0,null,this),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,this,[[1,10]])})));return function(t,r,i,a){return e.apply(this,arguments)}}(),f.prototype.makeFrame=function(){var e=(0,a.Z)(s().mark((function e(t,r){var i,a,o,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=1,!this.options.strictFrame){e.next=4;break}return e.abrupt("return");case 4:if(this._markStart(),!(a="string"==typeof r&&null!=c.v.udcObj[r])){e.next=10;break}i=c.v.udcObj[r],e.next=15;break;case 10:if(!(o=this.getSrc())){e.next=15;break}return e.next=14,WebSquare.jsLoader._loadObj(this.getURL(o),{msaName:this._getMsaName()});case 14:i=e.sent;case 15:if(!i){e.next=27;break}return o&&(n=WebSquare.jsLoader.getPageType(o)),this.frameDoc=WebSquare.jsLoader.getPageInfo(i,n),this.frameDoc.renderStartTime=new Date,this.makeParameter(),e.next=22,this.frameDoc.parsingUDC(!0,this);case 22:return e.next=24,this.frameDoc.parsingWFrame(!0,this,void 0,a);case 24:return this.appendModels(this.frameDoc.models,null,{appendModel:!this.options.scope||"scope"}),e.next=27,this.renderBody(t);case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(1),p.w.printStackTrace(e.t0,null,this);case 32:case"end":return e.stop()}
}),e,this,[[1,29]])})));return function(t,r){return e.apply(this,arguments)}}(),f.prototype.initAsync=(0,a.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0===this._bSkipAsync){e.next=4;break}return e.next=3,this.makeFrame();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),f.prototype.makeFrameUDC2=function(){var e=(0,a.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,this.udc2Parent=t,e.next=5,this.makeFrame(null,this.options.udc2Name);case 5:this._udc2Mapping(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),p.w.printStackTrace(e.t0,null,this);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),f.prototype.makeFrameSync=function(e,t,r){try{if(this.options.strictFrame)return;var i;this._markStart();var a,o="string"==typeof t&&null!=c.v.udcObj[t];if(o)i=c.v.udcObj[t];else if(t&&t.constructor===WebSquare.pageInfo)i=t.getPageInfo();else{var s=this.getSrc();s&&(i=WebSquare.jsLoader._loadObj(this.getURL(s),{msaName:this._getMsaName()}))}if(i)s&&(a=WebSquare.jsLoader.getPageType(s)),this.frameDoc=WebSquare.jsLoader.getPageInfo(i,a),this.frameDoc.renderStartTime=new Date,this.makeParameter(),this.frameDoc.parsingUDC(!0,this),o?this.frameDoc.parsingUDC2Sync(!0,this):this.frameDoc.parsingWFrame(!0,this,!0),this.appendModels(this.frameDoc.models,null,{appendModel:!this.options.scope||"scope"}),this.renderBody(e,r)}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype.makeFrameUDC2Sync=function(e,t,r){try{this.udc2Parent=e,this.makeFrameSync(t,this.options.udc2Name,r),this._udc2Mapping()}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype.getSrc=function(){try{return this._getMsaSrc()}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype._getMsaSrc=function(e){try{e=e||{};var t=this.options.src;if(""==t)return"";var r=c.v.getPageURL(t,{skipURL:!0,skipUri:!0,msaName:e.msaName||this._getMsaName()});if(!0===e.msaSrc)"string"!=typeof r||r.startsWith("/")||r.startsWith("\\")||r.indexOf("://")>=0||(r=this._getMsaHome()+r);return r}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype.getMsaSrc=function(e,t){try{return(t=t||{}).msaSrc=!0,e&&(t.msaName=e),this._getMsaSrc(t)}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype._getMsaName=function(){try{if(this.options.msaName)return this.options.msaName;if(this.scope_obj)return this.scope_obj._getMsaName()}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype._getMsaHome=function(){try{var e=this.options.src;if("string"!=typeof e)return"/";if(this.options.msaName){var t=e.lastIndexOf("/");return t>=0?e.slice(0,t)+"/":"/"}if(this.scope_obj)return this.scope_obj._getMsaHome()}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype.appendModels=function(e,t,r){try{if("replace"==(r=r||{}).appendModel)return void this.replaceModels(e);if("scope"==r.appendModel)return void this.scopeModels(e,t,r);var i=WebSquare.ModelUtil.getModelByID(t);if(i)for(var a=0;a<e.length;a++){if(r.appendModel)for(var o=i.instances[0].document,s=e[a].instances[0].document.childNodes,n=0;n<s.length;n++)o.appendChild(s[n].cloneNode(!0));i.binds=i.binds.concat(e[a].binds);for(var c=0;c<e[a].submissions.length;c++){var u=e[a].submissions[c];u.parentElement=i.element,i.submissions.push(u)}for(var l=0;l<e[a].workflows.length;l++){var h=e[a].workflows[l];h.parentElement=i.element,i.workflows.push(h)}}}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype.replaceModels=function(e){try{WebSquare.WebSquaredoc.models.splice(0,WebSquare.WebSquaredoc.models.length),WebSquare.WebSquaredoc.models=WebSquare.WebSquaredoc.models.concat(e)}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype.scopeModels=function(e,t,r){try{var i=WebSquare.ModelUtil.getModelByID(t);if(i&&"scope"==r.appendModel)for(var a=0;a<e.length;a++){if(e[a].instances&&e[a].instances.length>0){var o
;i.instances&&i.instances.length>0&&(o=i.instances[0].xmlNode.parentNode);for(var s=e[a].instances,n=0,c=s.length;n<c;n++){for(var u=s[n].xmlNode.cloneNode(!0),l=u.firstChild;null!=l&&1!=l.nodeType;l=l.nextSibling);var h=new WebSquare.Model.Instance(u,l,null);h.scope_id=this.id;var d=h.xmlNode;d.setAttribute("scopeId",this.id),i.instances.push(h),o&&o.appendChild(d)}}i.binds=i.binds.concat(e[a].binds);for(var f=0;f<e[a].submissions.length;f++){var m=e[a].submissions[f];m.parentElement=i.element,i.submissions.push(m)}for(var S=0;S<e[a].workflows.length;S++){var g=e[a].workflows[S];g.parentElement=i.element,i.workflows.push(g)}}}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype.remove=function(){try{if(!0===this._removed)return;if(this.options.strictFrame){for(var e in window[this.id]&&(window[this.id]=null),this)delete this[e];return}for(var t in this.finalize(),this.activeStatus="finalize",null!=this.render&&WebSquare.removeNode(this.render),this.parentControl&&this.parentControl.removeControl(this),WebSquare.getBody().childControlList)WebSquare.getBody().childControlList[t]==this&&WebSquare.getBody().childControlList.splice(t,1);this.destroy(),l.D.emptySelection()}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype.finalize=function(e,t){try{var r=new Date;if(!0!==c.v.scriptPrecedence)for(var i=0;i<this.childControlList.length;i++)u.B.fireEvent(this.childControlList[i],"onpageunload");for(i=0;i<this.childControlList.length;i++)u.B.fireEvent(this.childControlList[i],"onbeforepageunload");var a=e||this.getSrc(),o=this.options.pluginName.toLowerCase();if(u.B.fireEvent(this,"onbefore"+o+"unload",a),this.popupList){i=0;for(var s=this.popupList.length;i<s;i++){var n=this.popupList[i];if(n){var d=WebSquare.getBody();if(this._parentFrameUUID)d=WebSquare.idCache[this._parentFrameUUID];var f=n.id;if(d){if(null!=d.stackComponents)for(var m in d.stackComponents){var S=d.stackComponents[m];if(f)for(var g=d.stackComponents[m].length-1;g>=0;g--)if(S[g].id===f){S.splice(g,1),d.modalStack.pop();break}}d.modalStack.pop()}n.close(),WebSquare.uiplugin.popup.removeFromPopupList(f)}}}this.hideProcessMessage(),null!=this._processMsgComp&&(this._processMsgComp.remove(),this._processMsgComp=null),null!=this._processMsgModal&&(this._processMsgModal.remove(),this._processMsgModal=null),null!=this._wframePopupModal&&(this._wframePopupModal.remove(),this._wframePopupModal=null);for(var b=[];this.childAllControlList.length>0;){var _;if(_=!0===c.v.scriptPrecedence?this.childAllControlList.shift():this.childAllControlList.pop(),(T=WebSquare.idCache[_])&&(!0!==T._isWframePopup||!0===this.options.popupAutoClose||this.options.frameModal))if(null==WebSquare.DataCollection.comp[T.id]){WebSquare.isPrintLog=!1,"function"==typeof T.finalize&&T.finalize(),WebSquare.isPrintLog=!0,"function"==typeof T.unbind&&T.unbind(),T.event&&T.event.clearCache(),T.modelControl&&(T.modelControl.unbindRef(),T.modelControl.unbindItemset()),WebSquare.getBody().getLayerListener().remove(T.id),T.childControlList=[];if(T.options){var y={secret:"input",selectbox:"select1",radio:"select1",multiselect:"select",checkbox:"select",checkcombobox:"select",switch:"Switch"}[T.options.pluginName]||T.options.pluginName;delete(WebSquare.componentsCache[y]||WebSquare.componentsCache[T._wTagName]||{})[T.uuid],c.v.memoryLeakComponent[y]&&(c.v.memoryLeakComponentCount+=c.v.memoryLeakComponent[y])}if(window[WebSquare.noConflict].comp[T.id]=null,delete window[WebSquare.noConflict].comp[T.id],window[WebSquare.noConflict].data[T.id]=null,delete window[WebSquare.noConflict].data[T.id],window[T.id])try{window[T.id]=null,(!l.D.isIE()||parseInt(c.v.browserVersion(),10)>8)&&delete window[T.id]}catch(e){window[T.id]=null}if(null!=T.render){if(T._closed&&T.frame&&T._isWframePopup){var w=T.frame.paramObj.popupID;w&&WebSquare.uiplugin.popup.removeFromPopupList(w);var v=T._targetFrameObjUUID,W=WebSquare.strictModeFrame?WebSquare.strictModeFrame.uuid:"";if(T.options.frameModal&&v&&v!==W){
var q=WebSquare.idCache[v];q&&q.hideFrameModal(w)}}WebSquare.removeNode(T.render)}WebSquare.idToUUID[T.id]=null,delete WebSquare.idToUUID[T.id];for(var k=Object.keys(T),C=k.length,M=0;M<C;M++)try{"function"==typeof T[k[M]]?T[k[M]]=c.v._emptyFunction:delete T[k[M]]}catch(e){delete T[k[M]]}if(null!=window.Proxy&&"function"==typeof Object.setPrototypeOf&&"function"==typeof Object.getPrototypeOf){var P=Object.getPrototypeOf(T),x=new window.Proxy(P,{get:function(e,t,r){return function(){}}});Object.setPrototypeOf(T,x)}else{for(var m in{setValue:!0,setDisabled:!0,setLabel:!0,toHTML:!0,setAction:!0,remove:!0,finalize:!0})"function"==typeof T[m]&&(T[m]=c.v._emptyFunction)}T._removed=!0,T=null,WebSquare.idCache[_]=null,delete WebSquare.idCache[_]}else b.push(_)}for(i=b.length-1;i>=0;i--){var T;null!=(T=WebSquare.idCache[b[i]])&&WebSquare.DataCollection.api.remove(T.id,{uuid:T.uuid})}this.childAllControlList=[];for(i=0;i<this.childControlList.length;i++){var D=this.childControlList[i];for(!0===c.v.scriptPrecedence&&u.B.fireEvent(D,"onpageunload");D.childControlList&&D.childControlList.length>0;){var L=D.childControlList.pop();null!=L.uuid&&L.remove()}D.render=null,D.remove()}for(var j in this.childControlList=[],this.scopeVariable)null!=window[this.id+"_"+j]&&(window[this.id+"_"+j]=null,!l.D.isIE()||parseInt(c.v.browserVersion(),10)>8?delete window[this.id+"_"+j]:window[this.id+"_"+j]=null);this.scope={},this.scopeVariable={},this.scopeLazyList=[];for(i=0;i<this.userComponentList.length;i++)l.D.loadedUserComponent[this.userComponentList[i]]=null,delete l.D.loadedUserComponent[this.userComponentList[i]];this.userComponentList=[];for(i=0;i<this.userPluginList.length;i++)l.D.loadedUserComponentPluginName[this.userPluginList[i]]=null,delete l.D.loadedUserComponentPluginName[this.userPluginList[i]];this.userPluginList=[],null!=this.render&&WebSquare.removeChildren(this.render),this.removeCommon(t);var O=new Date;h.k.printLog(this.options.pluginName+" unloading["+this.id+"]. Time:"+(O-r)+"ms");var F=null==e?this.getSrc():e;u.B.fireEvent(this,"on"+o+"unload",F),WebSquare.uiplugin.dateHelper&&null!=WebSquare.uiplugin.dateHelper._currentDate&&delete WebSquare.uiplugin.dateHelper._currentDate[this.id],this.wframeSubPopup&&(this.wframeSubPopup=[]),this.stackComponents={},this.modalStack=[]}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype.removeFrame=function(){try{this.finalize()}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype.removeFrame_old=function(){try{h.k.printLog("Wframe unloading start.["+this.id+"]");for(var e=0;e<this.childControlList.length;e++)u.B.fireEvent(this.childControlList[e],"onpageunload");WebSquare.DataCollection.stopBroadCast=!0,WebSquare.dragdrop2={droppable:{},scrollable:{},scrollByDragDelay:300,scrollByDragSpeed:50};var t=WebSquare.getBody();for(var r in WebSquare.idCache){var i=WebSquare.idCache[r];i!==t&&i!==this&&("function"!=typeof i.remove||i.remove==d.s.prototype.remove||i.options&&("wframe"==i.options.pluginName||"pageInherit"==i.options.pluginName)?(WebSquare.isPrintLog=!1,"function"==typeof i.finalize&&i.finalize(),WebSquare.isPrintLog=!0,"function"==typeof i.unbind&&i.unbind(),i.event&&i.event.clearCache(),WebSquare.useVisibleHelper&&i.render&&i.render.parentNode&&i!=WebSquare.body&&i.render.parentNode.removeChild(i.render),i.childControlList=[],window[i.id]&&(window[i.id]=null)):i.remove())}t.getLayerListener().removeAll(),WebSquare.idCache={},WebSquare.idCache[t.uuid]=t,WebSquare.idCache[this.uuid]=this,window[WebSquare.noConflict].comp={},window[WebSquare.noConflict].comp[this.id]=this,WebSquare.idToUUID={},WebSquare.idToUUID[t.id]=t.uuid,WebSquare.idToUUID[this.id]=this.uuid,WebSquare.WebSquaredoc.itemsetElement=[],WebSquare.WebSquaredoc.refElement=[],WebSquare.componentsCache={},WebSquare.componentsCache[t.options.pluginName]={},WebSquare.componentsCache[t.options.pluginName][t.uuid]=!0,WebSquare.componentsCache[this.options.pluginName]={},
WebSquare.componentsCache[this.options.pluginName][this.uuid]=!0,this.childAllControlList=[],this.childControlList=[],this.scope={},this.scopeVariable={},this.userComponentList=[],this.userPluginList=[],null!=this.render&&WebSquare.removeChildren(this.render),this.removeCommon(),c.v.clearCommon(),WebSquare&&WebSquare.strictModeFrame&&(WebSquare.strictModeFrame.remove(),WebSquare.strictModeFrame=null),h.k.printLog("Wframe unloading finished.["+this.id+"]")}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype.removeCommon=function(e){try{if(void 0!==e&&null!=e||(e={}),this.wframeScript=[],null!=this.frameDoc){for(;this.frameDoc.cssList.length>0;){var t=this.frameDoc.cssList.shift(),r=t&&t.href&&t.href.toString();r=r||"";var i=l.D._getAbsolutePath(r);WebSquare.skin._decreaseCache(i,t)}this.frameDoc.cssList=[];for(var a=0;a<this._cssCacheArr.length;a++){var o=this._cssCacheArr[a];WebSquare.skin._decreaseCache(o)}if(this.frameDoc.models&&this.frameDoc.models.length>0){var s=this.frameDoc.models[0].submissions,n=WebSquare.WebSquaredoc.models[0].submissions;for(a=0;a<s.length;a++){for(var u=0;u<WebSquare.layer.submissionIDQueue.length;u++)WebSquare.layer.submissionIDQueue[u]==s[a].id&&(WebSquare.layer.submissionIDQueue.splice(u,1),WebSquare.layer.submissionMessageQueue.splice(u,1));for(var h=0;h<n.length;h++)if(s[a].id===n[h].id&&s[a].ref===n[h].ref){n[h].dead=!0,c.v.useSubmissionGlobal&&(window[n[h].id]=null),n[h].parentElement=null,n.splice(h,1);break}}var d=this.frameDoc.models[0].workflows;for(n=WebSquare.WebSquaredoc.models[0].workflows,a=0;a<d.length;a++)for(h=0;h<n.length;h++)if(d[a].id===n[h].id&&d[a].ref===n[h].ref){n[h].promiseStatus="REJECT",c.v.useWorkflowGlobal&&(window[n[h].id]=null),n[h].parentElement=null,n.splice(h,1);break}}for(var f in this.frameDoc)this.frameDoc[f]=null,delete this.frameDoc[f]}!0!==e.keepDataObject&&this._removeDataObject(),this.frameDoc=null}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype.onPropertyChange=function(e,t){try{if("disabled"===e)for(var r=0;r<this.childControlList.length;r++){var i={componentId:this.childControlList[r].id,disabled:t};l.D.setDisabled(i)}}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype.onComplete=function(){try{if(null!=this.frame_dc_list){for(var e=0;e<this.frame_dc_list.length;e++)WebSquare.idCache[this.frame_dc_list[e]].completed||WebSquare.idCache[this.frame_dc_list[e]].onComplete();delete this.frame_dc_list}d.s.prototype.onComplete.call(this)}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype.getObj=function(e){try{return this.scope[e]}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype.getObjList=function(){try{var e=[];for(var t in this.scope)e.push(t);return e}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype.getWindow=function(){try{return this.options.scope?this.scope:window}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype.makeScopeVariable=function(){try{var e=0;if(this.options.scope&&this.options.scopeVariable)for(var t=this.options.scopeVariable.split(","),r=0;r<t.length;r++){var i=t[r].wq_trim(),a=e>0?String(e):"";e++,this._makeScopeVariable(i,WebSquare.noConflictFunction+a)}if(this.options.scope&&this.options.cloneVariable)for(t=this.options.cloneVariable.split(","),r=0;r<t.length;r++){var o=t[r].wq_trim();a=e>0?String(e):"";e++,this._makeCloneVariable(o)}if(this.options.scope&&this.options.linkVariable)for(t=this.options.linkVariable.split(","),r=0;r<t.length;r++){var s=t[r].wq_trim();a=e>0?String(e):"";e++,this._makeLinkVariable(s)}}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype._makeScopeVariable=function(e,t,r){try{if(this.scopeVariable[e]={},this.scope[e]=this.scopeVariable[e],window[this.id+"_"+e]=this.scopeVariable[e],this.options.scopeFunction){this.scopeVariable[e][this.options.scopeFunction]=new WebSquare.uiplugin.wframe.scope(this.uuid);var i=this.scopeVariable[e][this.options.scopeFunction];for(var a in WebSquare.api)"data"!==a&&"comp"!==a&&null==i[a]&&(i[a]=WebSquare.api[a])
;for(var o in i.data=new WebSquare.uiplugin.wframe.scope.data(this.id),i.model=new WebSquare.uiplugin.wframe.scope.model(this.id),i.bigDecimal=new WebSquare.uiplugin.wframe.scope.bigDecimal(this.id),i.bigDecimal._scopeId=this.id,i.id=this.id+"_",WebSquare.api.data)null==i.data[o]&&"function"==typeof WebSquare.api.data&&(i.data[o]=WebSquare.api.data[o]);this.options.scopeFunction!==WebSquare.noConflict&&null!=window[e]&&null==window[e][this.options.scopeFunction]&&n.x.extend(window[e][this.options.scopeFunction],WebSquare.api),t&&(this.scope[t]=this.scopeVariable[e][this.options.scopeFunction])}}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype._makeCloneVariable=function(e){try{this.scopeVariable[e]={},"object"===(0,i.Z)(window[e])&&null!=window[e]&&(this._isUDC2,this.scopeVariable[e]=c.v._copyCommon(e,this)),this.scope[e]=this.scopeVariable[e],window[this.id+"_"+e]=this.scopeVariable[e]}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype._makeLinkVariable=function(e){try{if("object"!==(0,i.Z)(window[e])||null==window[e])return;this.scopeVariable[e]=WebSquare.jsonUtil.cloneNode(window[e],!0,[],[],0,!0),this.scope[e]=this.scopeVariable[e],window[this.id+"_"+e]=this.scopeVariable[e]}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype.makeLazyScopeVariable=function(){try{if(this.options.scope&&this.options.scopeVariable){var e=this.options.scopeVariable;this.options.cloneVariable&&(e+=","+this.options.cloneVariable);for(var t=e.split(","),r=0;r<t.length;r++)for(var i=t[r].wq_trim(),a=r>0?String(r):"",o=WebSquare.noConflictFunction+a,s=0;s<this.scopeLazyList.length;s++)WebSquare.idCache[this.scopeLazyList[s]].scope[i]=this.scopeVariable[i],WebSquare.idCache[this.scopeLazyList[s]].scope[o]=this.scopeVariable[i][this.options.scopeFunction]}}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype._addScopeVariable=function(e){try{if(this.options.scope&&this.options.scopeVariable){var t=this.options.scopeVariable;this.options.cloneVariable&&(t+=","+this.options.cloneVariable);for(var r=t.split(","),i=0;i<r.length;i++){var a=r[i].wq_trim(),o=i>0?String(i):"",s=WebSquare.noConflictFunction+o;WebSquare.idCache[e].scope[a]=this.scopeVariable[a],WebSquare.idCache[e].scope[s]=this.scopeVariable[a][this.options.scopeFunction]}}}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype._udc2Mapping=function(){try{var e=this.udc2Parent;if(!e)return;var t={};for(var r in e._reservedName)for(var i=0;i<e._reservedName[r].length;i++)t[e._reservedName[r][i]]=!0;var a=this.options.cloneVariable.split(","),o={};for(i=0;i<a.length;i++)o[a[i]]=!0;var s,n=WebSquare.Elem.api.getElementsByTagName(this.frameDoc.getPageInfo(),"publicInfo",c.v._XML_NAMESPACE.W2)[0];if(n){var u=WebSquare.Parser.parseAttribute(n);for(var r in s={method:{},submission:{},component:{}},u){var l=u[r].split(",");for(i=0;i<l.length;i++)s[r][l[i].wq_trim()]=!0}}for(var r in this.scopeVariable)if(!0!==o[r]){var h=this.scopeVariable[r];for(var d in h)d!==this.options.scopeFunction&&!0!==t[d]&&(s&&!0!==s.method[r+"."+d]||(e[d]=h[d]))}for(var r in this.scope){var f=this.scope[r];null!=f&&(s?(!0===s.component[r]&&f.uuid&&WebSquare.idCache[f.uuid]===f&&f.id!==f.uuid&&f.org_id!==f.uuid||!0===s.submission[r]&&"submission"===f._pluginName)&&(e[r]=f):e[r]=f)}}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype.setMode=function(e){try{this.options.mode=e}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype.start=function(e){},f.prototype.renderBody=function(){var e=(0,a.Z)(s().mark((function e(t,r){var i,a,o,n,p;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=[],"json"===(a=this.frameDoc.getType())?(i=WebSquare.jsonUtil.getNodesByTagName(this.frameDoc.getPageInfo(),"body"),o=WebSquare.jsonUtil.getAttribute(i[0],"class")):(i=WebSquare.xml.getElementsByTagName(this.frameDoc.getPageInfo(),"body",c.v._XML_NAMESPACE.XHTML),o=i[0].getAttribute("class")),o&&(n=this,
this.render||"function"!=typeof requestAnimationFrame?this.addClass(o):requestAnimationFrame((function(){n.addClass(o)}))),WebSquare.cssManager.startCache(),p="json"===a?WebSquare.controlFactory.createByJSON(null,null,i[0],this.options.scope?this:null,this.uuid):WebSquare.controlFactory.create(null,null,i[0],this.options.scope?this:null,this.uuid),WebSquare.cssManager.endCache(),!0===r){e.next=11;break}return e.next=11,WebSquare.controlFactory.initAsync();case 11:if(this.childControlList.push(p),this.render&&(p.domStatus="new"),p&&(p.parentControl=this,p.options&&p.options.firstTabID&&!this.options.firstTabID&&(this.options.firstTabID=p.options.firstTabID)),this.options.scope&&(this.makeScope(this),this.makeLazyScopeVariable()),!(this._pageCommonArr.length>0)){e.next=22;break}if(!0!==r){e.next=20;break}this._parsePageCommons(),e.next=22;break;case 20:return e.next=22,this._parsePageCommons();case 22:return p&&t?this._lazyActivation():!0===WebSquare._async&&(c.v.executePointScript(4),this._markEnd()),e.abrupt("return",!!p);case 24:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),f.prototype.lazyActivation=function(){try{if(!this.render)return;var e=this.childControlList[0];this.render.innerHTML=e.toHTML(),"sync"===this.options.mode?(this._markEnd(),this.setChildAction({preExecuted:!0})):(e.preActivate(),this._markEnd(),l.D.setTimeout(this.setChildAction,{key:this.id+"_setChildAction",caller:this,delay:1,args:[{preExecuted:!0,skipPreActivate:!0}]}))}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype._lazyActivation=function(){try{if(c.v.executePointScript(4),WebSquare.externalScriptArr.length>0)if("sync"!==this.options.mode){var e=this.uuid;WebSquare.externalScriptArr.push((function(){try{WebSquare.idCache[e].lazyActivation()}catch(e){p.w.printStackTrace(e)}})),l.D.js.apply(null,WebSquare.externalScriptArr)}else{for(var t=0;t<WebSquare.externalScriptArr.length;t++)WebSquare.BootLoader.globalEval(c.v.load(WebSquare.externalScriptArr[t]));this.lazyActivation()}else this.lazyActivation();WebSquare.externalScriptArr=[]}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype.parseParameter=function(){try{if(!this.options.params||"string"!=typeof this.options.params)return;for(var e in this.paramObj=JSON.parse(this.options.params),this.paramObj){var t=this.paramObj[e].charAt(0),r=this.paramObj[e].slice(1);switch(t){case"j":case"a":this.paramObj[e]=JSON.parse(r);break;case"x":this.paramObj[e]=WebSquare.xml.parse(r);break;default:this.paramObj[e]=r}}}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype.makeParameter=function(){try{if("object"!==(0,i.Z)(this.paramObj)&&(this.paramObj={}),this.options.isWidget){var e=this.parentControl.getParams();"object"===(0,i.Z)(e)&&(this.paramObj.params=e)}var t=this.getSrc();if(!t)return;for(var r=t.substring(t.indexOf("?")+1).split("&"),a=0;a<r.length;a++){2==(o=r[a].split("=")).length&&(this.paramObj[o[0].wq_trim()]=o[1].wq_trim())}if(location.hash.length>0)for(r=t.substring(t.indexOf("#")+1).split(/[\&\?\#]/),a=0;a<r.length;a++){var o;2==(o=r[a].split("=")).length&&(this.paramObj[o[0].wq_trim()]=o[1].wq_trim())}}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype.setDataObject=function(e){try{if("string"==typeof e&&(e=JSON.parse(e)),null==e||"string"!=typeof e.name||0===e.name.length)return;var t=e.type||"string";t=t.toLowerCase();var r,i=e.data,a=e.name;switch(t){case"string":r=i;break;case"json":r="string"==typeof i?JSON.parse(i):l.D.cloneObject(i,{scope:this.scope_id,skipFunction:!0});break;case"xml":r="string"==typeof i?WebSquare.xml.parse(i):WebSquare.xml.parse(WebSquare.xml.serialize(i));break;case"array":r="string"==typeof i?JSON.parse(i):i.slice(0)}this._dataObject={type:t,name:a,data:r}}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype._getDataObject=function(e){try{var t
;return this._dataObject&&"string"==typeof this._dataObject.name&&this._dataObject.name.length>0&&this._dataObject.data&&(t=null==e?this._dataObject:this._dataObject[e]),t}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype._removeDataObject=function(){try{this._dataObject&&(delete this._dataObject.data,this._dataObject=null,delete this._dataObject)}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype.setFirstTabID=function(e){try{if(null!=e&&e!==this.options.firstTabID&&null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID){var t=WebSquare.tabOrder[this.id].preTabID,r=WebSquare.tabOrder[t].nextTabID,i=l.D.getComponentById(e,this.id).id,a=WebSquare.tabOrder[t].nextTabID;WebSquare.tabOrder[t].nextTabID=i,WebSquare.tabOrder[i]={},WebSquare.tabOrder[i].preTabID=t,a!==this.id&&delete WebSquare.tabOrder[r],this.options.firstTabID=e}}catch(e){p.w.printStackTrace(e)}},f.prototype.getParentFrame=function(){try{return this.scope_obj&&WebSquare.idCache[this.scope_obj.uuid]===this.scope_obj?this.scope_obj:null}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype._getRenderedParentFrame=function(){try{return this.scope_obj&&WebSquare.strictModeFrame.id!==this.scope_obj.id&&WebSquare.idCache[this.scope_obj.uuid]===this.scope_obj?this.scope_obj:null}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype.reload=function(e){try{var t;if(this.options.strictFrame)l.D.reinitialize(e);else this._dataObject&&(t={dataObject:this._dataObject,reload:!0}),this.setSrc(this.options.src,t)}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype._clearExecuteStatus=function(){try{this._executeStatus={script:!1,onpageload:!1,postscript:!1,lazyscript:!1,onwframeload:!1}}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype._getVersion=function(){try{var e=this.options.pluginName,t=c.v.getConfiguration("/WebSquare/"+e+"/version/@value");return t||(t=WebSquare.strictMode?3:"sync"===this.options.mode?2:1),Number(t)}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype.getURL=function(e,t){try{if(void 0!==t&&null!=t||(t={}),"string"!=typeof e||e.indexOf("://")>-1||!0===t.skipFullUrl)return e;if(this.options.msaName&&(t.msaName=this.options.msaName),t.msaName)return c.v.getURL(e,t);var r=this._getMsaName();if(r)return e=this.getMsaSrc(e),t.msaName=r,c.v.getURL(e,t);var i="",a=this.getParentFrame();if(a){var o,s=a.getSrc(),n=s.indexOf("://");if(n>=0)i=(o=e.startsWith("/")||e.startsWith("\\")?s.indexOf("/",n+3):s.lastIndexOf("/"))>0?s.slice(0,o)+"/":s.slice(0)+"/"}return i?i+e:c.v.getURL(e,{tempHome:this.getUdcRoot()})}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype.showProcessMessage=function(){var e=(0,a.Z)(s().mark((function e(t,r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",f._showProcessMessage(this,t,r));case 4:e.prev=4,e.t0=e.catch(0),p.w.printStackTrace(e.t0,null,this),this.hideProcessMessage();case 8:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(t,r){return e.apply(this,arguments)}}(),f.prototype.hideProcessMessage=function(){try{return f._hideProcessMessage(this)}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype._handleProcessEvent=function(e){try{u.B.stopEvent(e)}catch(e){p.w.printStackTrace(e,null,this),this.hideProcessMessage()}},f.prototype.addSubmissionMessage=function(){var e=(0,a.Z)(s().mark((function e(t,r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.showProcessMessage(r,{submissionId:t});case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),p.w.printStackTrace(e.t0,null,this),this.hideProcessMessage();case 9:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}(),f.prototype.deleteSubmissionMessage=function(e){try{return this._deleteSubmissionMessage(e)}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype._deleteSubmissionMessage=function(e){try{
for(var t=this._processMsgQueue.length-1;t>=0;t--)if(this._processMsgQueue[t].id==e){if(null!=this._processMsgComp&&"promise"!=this._processMsgComp&&t>0){var r=this._processMsgComp.getObj("text_msg");r&&r.setValue(this._processMsgQueue[t-1].msg)}this._processMsgQueue.splice(t,1)}if(e){var i=WebSquare.ModelUtil.getSubmission(e);0===this._processMsgQueue.length&&i&&!1!==i.hideProcessMsg?this.hideProcessMessage():this._processMessageShowCnt>0&&this._processMessageShowCnt--}}catch(e){p.w.printStackTrace(e,null,this),this.hideProcessMessage()}},f.prototype.deleteAjaxMessage=function(){try{this._processMsgAjaxCnt--,this._processMsgAjaxCnt<=0&&this.hideProcessMessage()}catch(e){p.w.printStackTrace(e,null,this),this.hideProcessMessage()}},f.prototype.showFrameModal=function(e){try{var t=e.className||"",r=(e.popupComponents,e.stackComponents||void 0),i=e.popupModal||!1;null==this.modalStack&&(this.modalStack=[]);var a=WebSquare.style.getStyle(this.render,"position");if(null==this._wframePopupModal){var o=WebSquare.controlFactory.create(this.id+"_wq_frameModal",{className:"w2_wframe_modal",pluginName:"group",parseChild:!1},null,this,this,!0);o.writeTo(this),o.activate(),o.render.style.width="100%",o.render.style.height="100%",this.addControl(o),this._wframePopupModal=o}else"static"!=a&&(this._wframePopupModal.render.style.height=this.render.offsetlHeight+"px",this._wframePopupModal.render.style.width=this.render.offsetWidth+"px");if("static"==(a=WebSquare.style.getStyle(this.render,"position"))){var s=this.render.offsetLeft,n=this.render.offsetTop;this._wframePopupModal.render.style.height=this.render.offsetHeight+"px",this._wframePopupModal.render.style.width=this.render.offsetWidth+"px",this._wframePopupModal.setPosition(s,n)}if(t?(this.modalStack[this.modalStack.length]=t,!0===i&&(this._wframePopupModal.className=t)):(this.modalStack[this.modalStack.length]="w2modal",!0===i&&(this._wframePopupModal.className="w2modal")),r)for(var c in null==this.stackComponents&&(this.stackComponents={}),r)if(null==this.stackComponents[c])this.stackComponents[c]=[r[c]];else{var u=this.stackComponents[c].length-1;if(u>=0)for(var h=u;h>=0;h--){var d=WebSquare.idCache[this.stackComponents[c][h].id];if(!d&&this.stackComponents[c][h].id){var f=l.D.getPopup(this.stackComponents[c][h].id);f&&(d=f.popupWin)}if(d&&d.render&&!0===i){var m=parseInt(d.getStyleProperty("z-index"),10),S=parseInt(l.D.getStyleProperty(this._wframePopupModal.render,"z-index"),10)-1;if(m==S)break;d.zIndex=m,d.setStyle("z-index",S)}}this.stackComponents[c].push(r[c])}!0===i&&(this._renderScrollLeft=this.render.scrollLeft,this._renderScrollTop=this.render.scrollTop,this._wframePopupModal.show(),l.D.isMobile()||this.addClass("w2modalopened_wframepopup"))}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype.hideFrameModal=function(e){try{if(null!=this._wframePopupModal){var t=!1,r=!1;if(null!=this.stackComponents)for(var i in this.stackComponents){var a=this.stackComponents[i];if(e){for(var o=this.stackComponents[i].length-1;o>=0;o--)if(a[o].id===e){a.splice(o,1),r=!0;break}}else a.pop(),r=!0;for(o=a.length-1;o>=0;o--){0!=o||0!==a.length&&!1!==a[o].modal||(t=!0);var s=WebSquare.idCache[a[o].id];if(s||(s=l.D.getComponentById(a[o].id)),s&&s.render){var n=s.zIndex;isNaN(n)&&(n=""),s.zIndex=void 0;var c=WebSquare.getBody();c.modal&&"block"===c.modal.style.display?(s.zIndex=l.D.getStyleProperty(c.modal,"z-index")-2,s.setStyle("z-index",s.zIndex)):s.setStyle("z-index",n)}if("popup"!=i||!0===a[o].modal)break}}if(r&&this.modalStack.pop(),0==this.modalStack.length||!0===t){var u=this._modal;this._modal=!1,0==this.modalStack.length&&null!=this._wframePopupModal?(this._wframePopupModal.remove(),this._wframePopupModal=null):!0===t&&this._wframePopupModal.hide(),this.render.scrollLeft=this._renderScrollLeft,this.render.scrollTop=this._renderScrollTop,this._renderScrollLeft=this._renderScrollTop=0,u&&this.removeClass("w2modalopened_wframepopup")}else{var h=this.modalStack[this.modalStack.length-1]
;this._wframePopupModal.className=h}}}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype.modalEvent=function(e){try{this._wframePopupModal&&e&&(u.B.addListener(this._wframePopupModal.render,"onclick",(function(){var t=WebSquare.uiplugin.popup.getPopupWindow(e);t&&t.focus()})),u.B.addListener(this._wframePopupModal.render,"ondblclick",(function(){var t=WebSquare.uiplugin.popup.getPopupWindow(e);t&&t.focus()})))}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype._cloneRecursive=function(e){try{if(!e)return;var t=this._clone(e);return t.initAsync=(0,a.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),t.makeFrameSync(!0,this.frameDoc,!0),t}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype._getPerfStr=function(e){try{return e+"."+this.id}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype._makeDetail=function(e){try{return{src:this.getURL(this.getSrc()||WebSquare.w2xPath),id:this.id,orgId:this.getOriginalID(),scopeId:this.scope_id,log:e||""}}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype._markStart=function(){try{this._pCount++;var e={detail:this._makeDetail()};WebSquare._performance.mark(this._getPerfStr("wframe.start"),e)}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype._markEnd=function(){try{WebSquare._performance.mark(this._getPerfStr("wframe.step1"));var e=WebSquare.language.getMessage("Performance_wframe_step1");WebSquare._performance.measure(this._getPerfStr("wframe.step1"),this._getPerfStr("wframe.start"),this._makeDetail(e))}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype._markStart2=function(){try{var e={detail:this._makeDetail()};WebSquare._performance.mark(this._getPerfStr("wframe.step2"),e)}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype._markEnd2=function(){try{WebSquare._performance.mark(this._getPerfStr("wframe.end"));var e=WebSquare.language.getMessage("Performance_wframe_step2");WebSquare._performance.measure(this._getPerfStr("wframe.end"),this._getPerfStr("wframe.step2"),this._makeDetail(e))}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype._addPageCommon=function(e,t){try{this._pageCommonArr.push({src:e,id:t})}catch(e){p.w.printStackTrace(e,null,this)}},f.prototype._parsePageCommons=(0,a.Z)(s().mark((function e(){var t,r,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,t=[];this._pageCommonArr.length>0;)r=this._pageCommonArr.shift(),i=this._parsePageCommon(r),t.push(i);return e.next=5,Promise.all(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),p.w.printStackTrace(e.t0,null,this);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),f.prototype._parsePageCommon=function(){var e=(0,a.Z)(s().mark((function e(t){var r,i,a,o,u,l,h,d,f,m,S,g,b,_,y;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t.src,i=t.id,e.next=5,WebSquare.jsLoader._loadObj(this.getURL(r),{msaName:this._getMsaName()});case 5:for(a=e.sent,o=WebSquare.jsonUtil.getNodesByTagName(a,"script"),u=n.x.extend({},this.scope),l=this.options.scopeVariable.split(",")[0]||"scwin",h={},null!=this.scope[i]&&(h=this.scope[i]),u[l]=h,d=0;d<o.length;d++)f=o[d],"function"==typeof(m=WebSquare.jsonUtil.getCDataNodeValue(f))&&m(u);if((S=WebSquare.Elem.api.getElementsByTagName(a,"publicInfo",c.v._XML_NAMESPACE.W2)[0])&&"string"==typeof(g=S.getAttribute("method"))&&g){for(b=g.split(","),_={},d=0;d<b.length;d++)y=b[d].wq_trim("").replace(l+".",""),_[y]=h[y];h=_}this.scope[i]=h,e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),p.w.printStackTrace(e.t0,null,this);case 21:case"end":return e.stop()}}),e,this,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),f.prototype._addCssCache=function(e){try{this._cssCacheArr.push(e)}catch(e){p.w.printStackTrace(e,null,this)}},f._increasePendingWframeCount=function(){try{WebSquare.uiplugin.wframe.__pendingWframeCount<0&&(WebSquare.uiplugin.wframe.__pendingWframeCount=0),
WebSquare.uiplugin.wframe.__pendingWframeCount++}catch(e){p.w.printStackTrace(e,null,this)}},f._decreasePendingWframeCount=function(){try{WebSquare.uiplugin.wframe.__pendingWframeCount--,WebSquare.uiplugin.wframe.__pendingWframeCount<=0&&(WebSquare.uiplugin.wframe.__pendingWframeCount=0)}catch(e){p.w.printStackTrace(e,null,this)}},f._isPending=function(){return WebSquare.uiplugin.wframe.__pendingWframeCount>0},f._addWframePreorder=function(e){try{WebSquare.uiplugin.wframe.__pendingWframePreOrderList.push(e)}catch(e){p.w.printStackTrace(e,null,this)}},f._addWframePostorder=function(e){try{WebSquare.uiplugin.wframe.__pendingWframePostOrderList.push(e)}catch(e){p.w.printStackTrace(e,null,this)}},f._execute=function(e,t){try{if(void 0!==t&&null!=t||(t={}),WebSquare.uiplugin.wframe._isPending())return;var r="postorder"===t.order?WebSquare.uiplugin.wframe.__pendingWframePostOrderList.slice(0):WebSquare.uiplugin.wframe.__pendingWframePreOrderList.slice(0);if(r.length<=0)return;switch(!0===t.reverse&&r.reverse(),e){case"script":for(var i="",a=0;a<r.length;a++){!0!==(n=WebSquare.idCache[r[a]])._executeStatus.script&&(n._executeStatus.script=!0,n.frameDoc&&"string"==typeof n.frameDoc.scriptSection&&n.frameDoc.scriptSection&&(i+=WebSquare.scriptIdentifier+n.getURL(n.getSrc())+'";',i+=n.frameDoc.scriptSection))}"executed"===WebSquare.scriptSectionExcuteFlag||!0===t.preExecuted?WebSquare.BootLoader.globalEval(i):WebSquare.scriptSection+=i;break;case"onpageload":for(a=0;a<r.length;a++){if(!0!==(n=WebSquare.idCache[r[a]])._executeStatus.onpageload&&(!t._isProcessMsgFrame||n.uuid===t._processMsgCompId)){n._executeStatus.onpageload=!0;for(var o=0;o<n.childControlList.length;o++)u.B.fireEvent(n.childControlList[o],"onpageload",n.getSrc())}}break;case"postscript":for(i="",a=0;a<r.length;a++){!0!==(n=WebSquare.idCache[r[a]])._executeStatus.postscript&&(n._executeStatus.postscript=!0,n.frameDoc&&"string"==typeof n.options.postScript&&n.options.postScript&&(i+=WebSquare.scriptIdentifier+n.getURL(n.getSrc())+'";',i+=n.options.postScript))}WebSquare.BootLoader.globalEval(i);break;case"lazyscript":var s=[];for(a=0;a<r.length;a++){!0!==(n=WebSquare.idCache[r[a]])._executeStatus.lazyscript&&(n._executeStatus.lazyscript=!0,n.frameDoc&&n.lazyImportsArr&&n.lazyImportsArr.length>0&&(s=s.concat(n.lazyImportsArr),n.lazyImportsArr=[]))}s.length>0&&"executed"===WebSquare.scriptSectionExcuteFlag&&l.D.js.apply(null,s);break;case"onwframeload":for(a=0;a<r.length;a++){var n;if(!0!==(n=WebSquare.idCache[r[a]])._executeStatus.onwframeload){n._executeStatus.onwframeload=!0;var c=n.options.pluginName.toLowerCase();u.B.fireEvent(n,"on"+c+"load",n.getSrc())}}}}catch(e){p.w.printStackTrace(e,null,this)}},f._clearPending=function(e){try{void 0!==e&&null!=e||(e={});for(var t={pendingWframeCount:WebSquare.uiplugin.wframe.__pendingWframeCount,pendingWframePreOrderList:WebSquare.uiplugin.wframe.__pendingWframePreOrderList.slice(0),pendingWframePostOrderList:WebSquare.uiplugin.wframe.__pendingWframePostOrderList.slice(0)};WebSquare.uiplugin.wframe.__pendingWframePreOrderList.length>0;){(r=WebSquare.idCache[WebSquare.uiplugin.wframe.__pendingWframePreOrderList.pop()])&&!0!==e.keepStatus&&r._clearExecuteStatus()}for(;WebSquare.uiplugin.wframe.__pendingWframePostOrderList.length>0;){var r;(r=WebSquare.idCache[WebSquare.uiplugin.wframe.__pendingWframePostOrderList.pop()])&&!0!==e.keepStatus&&r._clearExecuteStatus()}return WebSquare.uiplugin.wframe.__pendingWframeCount=0,t}catch(e){p.w.printStackTrace(e,null,this)}},f._setPending=function(e){try{WebSquare.uiplugin.wframe.__pendingWframeCount=e.pendingWframeCount,WebSquare.uiplugin.wframe.__pendingWframePreOrderList=e.pendingWframePreOrderList.slice(0),WebSquare.uiplugin.wframe.__pendingWframePostOrderList=e.pendingWframePostOrderList.slice(0)}catch(e){p.w.printStackTrace(e,null,this)}},f._showProcessMessage=function(){var e=(0,a.Z)(s().mark((function e(t,r,i){var a,o,u,h,d,m,S,g,b,_,y,w,v,W,q,k,C,M,P,x,T,D,L,j
;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"$blank"!=r&&r&&t){e.next=3;break}return e.abrupt("return");case 3:if((a=c.v.getConfiguration("processMsgFrameURL"))||(a=n.x._resourceURI+"message/processMsg.js"),u={},i&&i.submissionId&&("string"==typeof i.submissionId?(o=i.submissionId,u=WebSquare.ModelUtil.getSubmission(o)):(u=i.submissionId,o=u.id),!1!==u.hideProcessMsg&&t._processMsgQueue.push({scope_id:u.scope_id,org_id:u.org_id,id:o,msg:r})),i&&!0===i.ajax&&t._processMsgAjaxCnt++,null!=t._processMsgComp){e.next=29;break}return t._processMessageShowCnt=1,h=t,!t.scope_obj||t.options&&"wframe"===t.options.pluginName||(h=t.scope_obj),h&&(d=h.uuid),m=WebSquare.controlFactory.create(t.id+"_wq_processMsgComp",{src:a,className:"w2_proc",scope:!0,pluginName:"wframe",preload:!0},null,h,d,!0),t._processMsgComp="promise",e.next=17,WebSquare.controlFactory.initAsync();case 17:if(t._processMsgComp=m,m.writeTo(t),m._isProcessMsgFrame=!0,m.activate(),t.addControl(m),t._processMessageShowCnt>0){e.next=27;break}return f._hideProcessMessage(t),t._processMessageShowCnt=0,e.abrupt("return");case 27:e.next=32;break;case 29:if("promise"!==t._processMsgComp){e.next=32;break}return isNaN(t._processMessageShowCnt)?t._processMessageShowCnt=1:t._processMessageShowCnt++,e.abrupt("return");case 32:if(t._processMsgComp.show(),(S=t._processMsgComp.getObj("btn_hide"))&&(u.hideTrigger?S.show():S.hide()),(g=t._processMsgComp.getObj("btn_cancel"))&&(u.abortTrigger?g.show():g.hide()),(b=t._processMsgComp.getObj("text_msg"))&&b.setValue(r),_=WebSquare.style.getStyle(t.render,"position"),y=0,w=0,v="","static"!=_){e.next=54;break}v="static",W=t.render.parentElement;case 46:if(!W||"BODY"==W.tagName){e.next=54;break}if("relative"!=(q=WebSquare.style.getStyle(W,"position"))&&"absolute"!=q){e.next=51;break}return v=q,e.abrupt("break",54);case 51:W=W.parentElement,e.next=46;break;case 54:k=t.render.offsetLeft,C=t.render.offsetTop,M=t.render.offsetHeight,P=t.render.offsetWidth,x=t.render.scrollLeft,T=t.render.scrollTop,"relative"==_?(y=x,w=T):"static"==_&&"absolute"!=v&&(y=k,w=C),D=y+(t.getSize("outerWidth")-t._processMsgComp.getSize("outerWidth"))/2,L=w+(t.getSize("outerheight")-t._processMsgComp.getSize("outerheight"))/2,t._processMsgComp.setPosition(D,L),t.bind("onkeydown",t._handleProcessEvent),null==t._processMsgModal&&((j=WebSquare.controlFactory.create(t.id+"_wq_proessMsgModal",{className:"w2_proc_modal",pluginName:"group",parseChild:!1},null,t,t,!0)).writeTo(t),j.activate(),t.addControl(j),t._processMsgModal=j),t._processMsgModal.render.style.height=M+"px",t._processMsgModal.render.style.width=P+"px",t._processMsgModal.setPosition(y,w),t._processMsgModal.show(),l.D.isMobile()||t.addClass("w2modalopened_wframe"),e.next=77;break;case 73:e.prev=73,e.t0=e.catch(0),p.w.printStackTrace(e.t0,null,t),f._hideProcessMessage(t);case 77:case"end":return e.stop()}}),e,null,[[0,73]])})));return function(t,r,i){return e.apply(this,arguments)}}(),f._hideProcessMessage=function(e){try{if(e._processMsgQueue=[],e._processMsgAjaxCnt=0,null!=e._processMsgComp&&"promise"!==e._processMsgComp)e._processMsgComp.hide(),e.unbind("onkeydown",e._handleProcessEvent);else if(e._processMessageShowCnt>0)return void e._processMessageShowCnt--;null!=e._processMsgModal&&e._processMsgModal.hide(),e.removeClass("w2modalopened_wframe")}catch(t){p.w.printStackTrace(t,null,e)}},f.__pendingWframeCount=0,f.__pendingWframePreOrderList=[],f.__pendingWframePostOrderList=[],f._cacheObj={},f.scope=function(e){this._parent_uuid=e,this._identifier="wframe_scope"},f.scope.prototype.getRuntimeId=function(e,t){try{for(var r=this._parent_uuid,i="",a=WebSquare.idCache[this._parent_uuid].options.scopeVariable.split(","),o={},s=0;s<a.length;s++)o[a[s].wq_trim()]=!0;if("string"==typeof t){var n=t.split("parent").length-1;for(s=0;s<n&&null!=r&&null!=WebSquare.idCache[r];s++)r=WebSquare.idCache[r].parentFrame}
return!0===o[e]?i=null!=r?WebSquare.idCache[r].id+"_"+e:e:null!=r&&null!=WebSquare.idCache[r].scope[e]?i=WebSquare.idCache[r].scope[e].id||"":WebSquare.idToUUID[e]&&WebSquare.idCache[WebSquare.idToUUID[e]]&&(i=WebSquare.strictMode&&null!=WebSquare.idCache[r]&&WebSquare.idCache[WebSquare.idToUUID[e]].scope_id!==WebSquare.idCache[r].id?"":e),i}catch(e){return p.w.printStackTrace(e,null,this),""}},f.scope.prototype.getSubmission=function(e,t){try{for(var r=WebSquare.ModelUtil.getModelByID(t),i=null,a=WebSquare.idCache[this._parent_uuid].id,o=WebSquare.idCache[this._parent_uuid].scope[e],s=0;s<r.submissions.length;s++){var n=r.submissions[s];if(o===n||n.scope_id===a&&n.id===e){i=n;break}}return i}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.getSubmissionList=function(e){try{return void 0!==e&&null!=e||(e={}),!0!==e.all&&(e.scopeId=WebSquare.idCache[this._parent_uuid].id),WebSquare.ModelUtil.getSubmissionList(e)}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.executeSubmission=function(e,t,r,i,a){try{var o;if("string"==typeof e)o=this.getSubmission(e);else if(o=e,WebSquare.strictMode&&o.scope_id!==WebSquare.idCache[this._parent_uuid].id)return;return WebSquare.ModelUtil.executeSubmission(o,t,r,i,a)}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.createSubmission=function(e,t){try{var r,i=e.id,a=this.getFrame(),o=a.id,s=o+"_";return e.id=s+i,e.scope_id=o,e.org_id=i,r=WebSquare.ModelUtil.createSubmission(e,t),a.scope[i]=WebSquare.ModelUtil.getSubmission(e.id,null,{scope_id:o}),null!=a.frameDoc&&a.frameDoc.models[0].submissions.push(a.scope[i]),r}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.deleteSubmission=function(e,t){try{var r=this.getSubmission(e),i=WebSquare.ModelUtil.deleteSubmission(r.id,t,{scope_id:this.getFrameId()});return delete WebSquare.idCache[this._parent_uuid].scope[e],i}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.createWorkflow=function(e,t){try{var r,i=e.id,a=this.getFrame(),o=a.id,s=o+"_";return e.id=s+i,e.scope_id=o,r=WebSquare.ModelUtil.createWorkflow(e,t),a.scope[i]=WebSquare.ModelUtil.getWorkflow(e.id,null,{scope_id:o}),r}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.deleteWorkflow=function(e,t){try{var r=this.getWorkflow(e),i=WebSquare.ModelUtil.deleteWorkflow(r.id,t,{scope_id:this.getFrameId()});return delete WebSquare.idCache[this._parent_uuid].scope[e],i}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.getWorkflow=function(e,t){try{for(var r=WebSquare.ModelUtil.getModelByID(t),i=null,a=WebSquare.idCache[this._parent_uuid].id,o=WebSquare.idCache[this._parent_uuid].scope[e],s=0;s<r.workflows.length;s++){var n=r.workflows[s];if(o===n||n.scope_id===a&&n.id===e){i=n;break}}return i}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.getRunningWorkflow=function(e,t){try{var r=null;if(e)null!=(s=this.getWorkflow(e,t))&&s.promiseStatus&&""!=s.promiseStatus&&(r=s);else for(var i=WebSquare.idCache[this._parent_uuid].id,a=WebSquare.ModelUtil.getModelByID(t),o=0;o<a.workflows.length;o++){var s;if((s=a.workflows[o]).scope_id===i&&s.promiseStatus&&""!=s.promiseStatus){r=s;break}}return r}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.isRunningWorkflow=function(e,t){try{return null!=this.getRunningWorkflow(e,t)}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.getRunningWorkflowID=function(e){try{var t=this.getRunningWorkflow(null,e),r=null;return null!=t&&(r=t.id),r}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.rejectWorkflow=function(e,t,r){try{var i=this.getRunningWorkflow(t,r),a=null;return null!=i&&(i.promiseStatus="REJECT",i.promiseValue=e||"REJECT",a=i),a}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.executeWorkflow=function(e){try{return WebSquare.ModelUtil.executeWorkflow(e,{scope_function:this})}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.executeSerial=function(e,t,r,i,a){try{return WebSquare.ModelUtil.executeSerial(e,t,r,i,a,{scope_function:this})}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.executeWhilst=function(e,t,r,i,a,o,s){try{
return WebSquare.ModelUtil.executeWhilst(e,t,r,i,a,o,s,{scope_id:this.getFrameId()})}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.ajax=function(e){try{if(e){var t=this.getFrame();t&&(e.scope=t.id),WebSquare.net.ajax(e)}}catch(e){p.w.printStackTrace(e),this.hideProcessMessage()}},f.scope.prototype.dynamicCreate=function(e,t,r,i,a,o){try{return l.D.dynamicCreate(e,t,r,i,a,o,this.getFrame())}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.getFrameId=function(){try{return WebSquare.idCache[this._parent_uuid]&&WebSquare.idCache[this._parent_uuid].id||null}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.getFrame=function(){try{return WebSquare.idCache[this._parent_uuid]}catch(e){p.w.printStackTrace(e)}},f.scope.prototype._getProcessMsgTargetFrame=function(){try{return WebSquare.idCache[this._parent_uuid].parentControl}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.getParentWindow=function(){try{var e=WebSquare.idCache[this._parent_uuid].getParentFrame();return null==e?this.getFrame().options.strictFrame?l.D.getParentWindow():window:e.scope}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.getTopWindow=function(){try{return top}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.top=function(){try{return l.D.getTopWindow()}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.parent=function(){try{return this.getParentWindow()}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.main=function(){try{return l.D.getMainFrame()}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.self=function(){try{return this.getFrame().scope}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.getComponentById=function(e){try{return l.D.getComponentById(e,this.getFrameId())}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.getPopupParam=function(e){try{void 0!==e&&null!=e||(e={});var t="",r=WebSquare.idCache[this._parent_uuid],i=null!=r._dataObject&&""!=r.options.popupParam&&r._dataObject.name===r.options.popupParam.slice(1);i=i||!0===e.dataObject;var a=null!=r.paramObj&&""!=r.options.popupParam;if(i||a){var o=i?r._dataObject.type.charAt(0):r.options.popupParam.charAt(0),s=i?r._dataObject.data:r.paramObj[r.options.popupParam.slice(1)];switch(o){case"j":t=JSON.stringify(s);break;case"x":t=WebSquare.xml.serialize(s);break;case"a":t=l.D.parseArray(s);break;default:t=s}}return t}catch(e){return p.w.printStackTrace(e),""}},f.scope.prototype.getParameter=function(e){try{var t,r=this.getFrame();if(r._dataObject&&r._dataObject.name===e)t=r._dataObject.data;else{var i=WebSquare.idCache[this._parent_uuid].paramObj;null!=i&&(t=i[e]),WebSquare.strictMode&&!this.getFrame().options.strictFrame||null!=t||(t=WebSquare.net.getParameter(e))}return t}catch(e){return p.w.printStackTrace(e),""}},f.scope.prototype.getAllParameter=function(){try{var e=JSON.parse(WebSquare.idCache[this._parent_uuid].options.params||null);for(var t in e)e[t]=e[t].slice(1);var r=this.getFrame(),i=r._getDataObject();return null!=i&&(null==e&&(e={}),r._getVersion()>=3?e[i.name]=i.data:e[i.name]=this.getPopupParam({dataObject:!0})),WebSquare.strictMode&&!this.getFrame().options.strictFrame||null!=e||(e=WebSquare.net.getAllParameter()),e}catch(e){return p.w.printStackTrace(e),null}},f.scope.prototype.getOptions=function(e){try{var t,r=this.getFrame(),i=c.v._getParentObj();if(r.options.strictFrame){if(WebSquare.isWebSquarePopup&&null!=i&&null!=i.WebSquare){var a=WebSquare.net.getParameter("popupID");t=i.WebSquare.dataObject[a].data}}else t="udcFrame"===r.options.pluginName?WebSquare.WebSquareparser.parseAttribute(r.element):r._getDataObject("data");return n.x.extendKeepingType(e||{},t)||{}}catch(e){return p.w.printStackTrace(e),""}},f.scope.prototype.setPopupParam=function(e,t){},f.scope.prototype.getPopupUrl=function(){try{var e=null;if(this.isWFramePopup()||this.getFrame()._getVersion()<3){var t=WebSquare.idCache[this._parent_uuid].getSrc();e=WebSquare.idCache[this._parent_uuid].getURL(t)}return e}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.getPopupId=function(){try{
var e=null;return this.isWFramePopup()&&(e=WebSquare.idCache[this._parent_uuid].paramObj.popupID),e}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.isWFramePopup=function(e,t){try{if(!e)return WebSquare.idCache[this._parent_uuid]._isWframePopup;for(var r=WebSquare.idCache[this._parent_uuid];r;){if(r.options.strictFrame)return!!t&&l.D.isPopup();if(r._isWframePopup)return r._isWframePopup;r=r.getParentFrame()}}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.isPopup=function(e){try{return this.getFrame().options.strictFrame?l.D.isPopup2():this.isWFramePopup(e,!0)}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.getPopup=function(e){try{return l.D.getPopup(e,this._parent_uuid)}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.getPopupList=function(e){try{return l.D.getPopupList(e,this._parent_uuid)}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.getPopupWindow=function(e){try{return l.D.getPopupWindow(e,this._parent_uuid)}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.getPopupWindowList=function(e){try{return l.D.getPopupWindowList(e,this._parent_uuid)}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.openPopup=function(e,t,r,i){try{void 0!==t&&null!=t||(t={}),t.scope_uuid||(t.scope_uuid=this._parent_uuid),l.D.openPopup(e,t,r,i)}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.closePopup=function(e,t){try{var r=e;void 0===e&&(r=this.getParameter("popupID"));var i=this.getPopup(r);if(i){var a=i.id;i.close(r,t),WebSquare.uiplugin.popup.startChkModalClosed(),!0===i.useWindowPopup()&&WebSquare.uiplugin.popup.removeFromPopupList(a)}else this.getFrame().options.strictFrame&&l.D.closePopup(r,t)}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.reinitialize=function(e){try{this.getFrame().reload(e)}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.getMetaValue=function(e){try{if(this.getFrame().options.strictFrame)return l.D.getMetaValue(e);var t="",r=WebSquare.Elem.api.getElementsByTagName(this.getFrame().frameDoc.getPageInfo(),"head")[0];return r&&(t=WebSquare.Elem.api.getAttribute(r,e)),t}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.multipleExcelUpload=function(e){try{e.scopeId=this.id,l.D.multipleExcelUpload(e)}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.multipleExcelDownload=function(e){try{e.scopeId=this.id,l.D.multipleExcelDownload(e)}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.$=function(e){try{for(var t,r=e.split("#"),i=0;i<r.length;i++){var a=r[i].search(/[\W]/);if(0!==a){var o,s="";a<0?o=r[i]:(o=r[i].slice(0,a),s=r[i].slice(a));var n=this.getComponentById(o);null!=n&&(r[i]=n.id+s)}}t=r.join("#");var c="";return this.getFrame().options.strictFrame||(c="#"+this.getFrameId()+" "),l.D.jQuerySelector(c+t)}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.watermark=function(e,t){try{void 0!==t&&null!=t||(t={});var r=this.getFrame(),i=r.id;t.canvasId||(t.canvasId=i+"_watermarkCanvas"),t.target||(t.target=r),l.D.watermark(e,t)}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.emit=function(e){try{var t=[].slice.apply(arguments,[0]);return t.shift(),this.getFrame().trigger(e,t)}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.updateSuffix=function(e){try{void 0!==e&&null!=e||(e={});var t=this.getFrame().id;e.scopeId=t,l.D.updateSuffix(e)}catch(e){p.w.printStackTrace(e)}},f.scope.bigDecimal=function(e){try{var t=function(e){return WebSquare.bigDecimal(e)};return t.calc=(r=e,function(e,t){return WebSquare.bigDecimal.calc(e,t,r)}),t}catch(e){p.w.printStackTrace(e)}var r},f.scope.prototype.updateServerTime=function(e,t,r){try{var i,a=this.getFrame()._getMsaName();return i=!a||void 0!==r&&""!=r?a||void 0!==r&&""!=r?r:"":a,WebSquare.date.updateServerTime(e,t,i)}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.getCurrentServerDate=function(e,t){try{var r,i=this.getFrame()._getMsaName();return r=!i||void 0!==t&&""!=t?i||void 0!==t&&""!=t?t:void 0:i,WebSquare.date.getCurrentServerDate(e,r)}catch(e){p.w.printStackTrace(e)}},f.scope.data=function(e){this._parent_id=e,
this._identifier="wframe_scope_data"},f.scope.data.prototype.get=function(e,t,r){try{return r||(r={}),r.scope_obj||(r.scope_obj=this._parent_id),WebSquare.DataCollection.api.get(e,t,r)}catch(e){p.w.printStackTrace(e)}},f.scope.data.prototype.set=function(e,t,r,i){try{return i||(i={}),i.scope_obj||(i.scope_obj=this._parent_id),WebSquare.DataCollection.api.set(e,t,r,i)}catch(e){p.w.printStackTrace(e)}},f.scope.data.prototype.create=function(e,t){try{return void 0!==t&&null!=t||(t={}),t.scope_obj||(t.scope_obj=this._parent_id),WebSquare.DataCollection.api.create(e,t)}catch(e){p.w.printStackTrace(e)}},f.scope.data.prototype.remove=function(e,t){try{return void 0!==t&&null!=t||(t={}),t.scope_obj||(t.scope_obj=this._parent_id),WebSquare.DataCollection.api.remove(e,t)}catch(e){p.w.printStackTrace(e)}},f.scope.data.prototype.bindPath=function(e){try{var t=e.split("."),r={};return r.collectionId=t[0].replace(/^data:/,""),t>1&&(r.columnId=t[1]),r}catch(e){p.w.printStackTrace(e)}},f.scope.data.prototype.getAllDataCollection=function(e,t){try{return void 0!==t&&null!=t||(t={}),t.scope_obj||(t.scope_obj=this._parent_id),WebSquare.DataCollection.api.getAllDataCollection(e,t)}catch(e){p.w.printStackTrace(e)}},f.scope.data.prototype.getBroadcast=function(e){try{return void 0!==e&&null!=e||(e={}),e.scope_obj||(e.scope_obj=this._parent_id),WebSquare.DataCollection.api.getBroadcast(e)}catch(e){p.w.printStackTrace(e)}},f.scope.data.prototype.getInfo=function(e,t,r,i){try{return void 0!==i&&null!=i||(i={}),i.scope_obj||(i.scope_obj=this._parent_id),WebSquare.DataCollection.api.getInfo(e,t,r,i)}catch(e){p.w.printStackTrace(e)}},f.scope.data.prototype.getOption=function(e,t){try{return void 0!==t&&null!=t||(t={}),t.scope_obj||(t.scope_obj=this._parent_id),WebSquare.DataCollection.api.getOption(e,t)}catch(e){p.w.printStackTrace(e)}},f.scope.data.prototype.setBroadcast=function(e,t){try{return void 0!==t&&null!=t||(t={}),t.scope_obj||(t.scope_obj=this._parent_id),WebSquare.DataCollection.api.setBroadcast(e,t)}catch(e){p.w.printStackTrace(e)}},f.scope.data.prototype.setOption=function(e,t,r){try{return void 0!==r&&null!=r||(r={}),r.scope_obj||(r.scope_obj=this._parent_id),WebSquare.DataCollection.api.setOption(e,t,r)}catch(e){p.w.printStackTrace(e)}},f.scope.model=function(e){this.scope_id=e},f.scope.model.prototype.setInstanceValue=function(e,t,r){return WebSquare.ModelUtil.setInstanceValue(e,t,r,this.scope_id)},f.scope.model.prototype.getInstanceValue=function(e,t){return WebSquare.ModelUtil.getInstanceValue(e,t,this.scope_id)},f.scope.model.prototype.findInstanceNode=function(e,t){return WebSquare.ModelUtil.findInstanceNode(e,t,this.scope_id)},f.scope.model.prototype.findInstanceNodes=function(e,t){return WebSquare.ModelUtil.findInstanceNodes(e,t,this.scope_id)},f.scope.model.prototype.findSerializedNode=function(e,t){return WebSquare.ModelUtil.findSerializedNode(e,t,this.scope_id)},f.scope.model.prototype.removeInstanceNode=function(e){return WebSquare.ModelUtil.removeInstanceNode(e,this.scope_id)},f.scope.model.prototype.removeInstanceNodes=function(e){return WebSquare.ModelUtil.removeInstanceNodes(e,this.scope_id)},f.scope.model.prototype.removeChildNodes=function(e){return WebSquare.ModelUtil.removeChildNodes(e,this.scope_id)},f.scope.model.prototype.copyNode=function(e,t,r,i){return WebSquare.ModelUtil.copyNode(e,t,r,i,this.scope_id)},f.scope.prototype.updateSuffix=function(e){try{void 0!==e&&null!=e||(e={});var t=this.getFrame().id;e.scopeId=t,l.D.updateSuffix(e)}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.showProcessMessage=function(e,t){try{void 0!==t&&null!=t||(t={});var r=WebSquare.idCache[this._parent_uuid].id;return t.scope||(t.scope=r),WebSquare.layer.showProcessMessage(e,t)}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.hideProcessMessage=function(e){try{void 0!==e&&null!=e||(e={});var t=WebSquare.idCache[this._parent_uuid].id;return e.scope||(e.scope=t),WebSquare.layer.hideProcessMessage(e)}catch(e){p.w.printStackTrace(e)
}},f.scope.prototype.js=function(){try{for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)return;var i=t.slice(0),a=i[i.length-1];return"string"==typeof a&&c.v._msaServerHash[a]&&i.length>=2||"string"==typeof(a=this.getFrame()._getMsaName())&&c.v._msaServerHash[a]&&i.push(a),WebSquare.util.js.apply(this,i)}catch(e){p.w.printStackTrace(e)}},f.scope.prototype.jsAsync=function(){var e=(0,a.Z)(s().mark((function e(t,r){var a,o,n,u,h,d,m,S,g,b,_,y;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"string"==typeof t&&(t=t.split(",")),t instanceof Array){e.next=4;break}return e.abrupt("return");case 4:if(void 0!==r&&null!=r||(r={}),a=[],o=this.getFrame(),n={frameObj:o,msaName:r.msaName,wpack:r.wpack},r.scopeVariable&&(u=r.scopeVariable,"string"==typeof r.scopeVariable&&(u=r.scopeVariable.split(",")),u instanceof Array))for(h=0;h<u.length;h++)(d=u[h])&&null==o.scope[d]&&(o.scope[d]={});for(h=0;h<t.length;h++)m=t[h],S=c.v._getMsaSrc(m,n),"function"==typeof f._cacheObj[S]?(b=f._cacheObj[S],_={func:b,cached:!0,scopeId:o.id},g=Promise.resolve(_)):(y={skipError:!0,noPostfix:!0,useInfo:!0,infoObj:{url:S,scopeId:o.id,noCache:r.noCache}},g=c.v.loadAsync(S,y)),g instanceof window.Promise&&a.push(g);return o.id,e.next=13,Promise.all(a).then((function(e,t){for(var r=0;r<e.length;r++){var a,o=e[r];if(o&&"object"===(0,i.Z)(o)){if(!0===o.cached)a=o.func;else if(o.data){var s=l.D.scopingFuncBody(o.data,"scopeComp","scopeObj");a=new Function("scopeComp",s),"string"==typeof o.url&&o.url&&!0!==o.noCache&&(f._cacheObj[o.url]=a)}if("function"==typeof a)a(l.D.getComponentById(o.scopeId))}}}));case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),p.w.printStackTrace(e.t0);case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));return function(t,r){return e.apply(this,arguments)}}()}}]);